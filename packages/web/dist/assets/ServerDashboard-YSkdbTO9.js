import{j as e,A as zt,m as Tt}from"./vendor-motion-DD2yjgze.js";import{r as u,f as at,e as At}from"./vendor-react-Chdf233T.js";import{U as tt,b as ge,G as Sa,V as me,W as na,F as we,x as Ma,S as Pt,k as Me,X as Re,o as X,Y as Ft,Z as Dt,_ as Lt,$ as Wt,a0 as $t,a1 as Ot,a2 as Ut,a3 as Bt,a4 as Vt,a5 as Ra,a6 as ke,J as Be,D as pe,a7 as ya,a8 as Ua,a9 as Gt,aa as Ia,ab as ta,ac as ja,ad as Ve,ae as sa,g as Ce,v as He,af as st,ag as Ea,ah as Kt,ai as _t,aj as qt,E as de,B as oe,ak as ka,al as We,am as Te,l as rt,an as Xt,ao as Ht,ap as Se,C as da,aq as ra,ar as lt,r as nt,as as fa,at as Zt,au as Yt,av as la,aw as Jt,ax as je,ay as aa,j as dt,az as Fe,i as Oe,h as Ze,aA as va,aB as Ba,aC as Na,aD as Qt,aE as Va,aF as Ye,aG as it,aH as es,aI as as,aJ as ts,z as ss,aK as rs,aL as ls,aM as Ga,aN as ot,aO as Ae,aP as ns,aQ as wa,H as Ka,aR as ds,aS as is,aT as os,aU as ga,O as _a,aV as ct,aW as mt,aX as xt,aY as gt,aZ as qa,a_ as cs,a$ as ms,b0 as xs,b1 as gs,b2 as hs,b3 as us,b4 as ps,b5 as bs,y as za,b6 as ys,b7 as ht,b8 as Ee,b9 as Ue,ba as js,bb as ks,bc as fs,bd as vs,q as Ca,be as Xa,R as Ns,bf as ws,bg as Cs}from"./index-Cwht9-s6.js";import{M as Le}from"./Modal-BPkZiGXf.js";import"./vendor-utils-BpAiQRgT.js";import"./vendor-icons-DwoABqcb.js";function De({label:x,error:f,required:a=!1,hint:o,children:m,className:L=""}){return e.jsxs("div",{className:`space-y-1.5 ${L}`,children:[x&&e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:[x,a&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),m,o&&!f&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o}),f&&e.jsxs("p",{className:"flex items-center gap-1.5 text-xs text-red-600 dark:text-red-400",children:[e.jsx(tt,{className:"w-3 h-3"}),f]})]})}function Ha({guild:x,channels:f,roles:a,onSave:o}){var A,I,l,i;const{t:m}=ge(),L=Sa(),G=((I=(A=x==null?void 0:x.settings)==null?void 0:A.reactionRoles)==null?void 0:I.length)||0,[j,v]=u.useState(!1),[M,d]=u.useState({customCommandPrefix:((l=x==null?void 0:x.settings)==null?void 0:l.customCommandPrefix)||"!",slashCommandsOnly:((i=x==null?void 0:x.settings)==null?void 0:i.slashCommandsOnly)||!1}),t=async()=>{v(!0);try{await X.updateGuildSettings(x.guildId,M),L.success(m("dashboard.prefixSaved")),o&&o()}catch{L.error(m("dashboard.settingsSaveFailed"))}finally{v(!1)}},C=[{icon:me,labelKey:"common.channels",value:f.length,color:"blue"},{icon:na,labelKey:"common.roles",value:a.length,color:"purple"},{icon:we,labelKey:"dashboard.reactionPanels",value:G,color:"green"}],T={blue:"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400",purple:"bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400",green:"bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400"};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white mb-2",children:x.guildName}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:m("dashboard.manageServer")})]}),x.license&&e.jsxs("div",{className:"flex items-center gap-3 px-4 py-3 bg-gray-50 dark:bg-dark-700 rounded-xl",children:[e.jsx("div",{className:`p-2 rounded-lg ${x.license.tier==="VIP"?"bg-purple-100 dark:bg-purple-900/30":"bg-primary-100 dark:bg-primary-900/30"}`,children:x.license.tier==="VIP"?e.jsx(Ma,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"}):e.jsx(Pt,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-gray-900 dark:text-white",children:x.license.tier||"Standard"}),e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:[m("dashboard.expires"),": ",x.license.expiresAt?new Date(x.license.expiresAt).toLocaleDateString():m("dashboard.never")]})]})]})]})}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 md:gap-6",children:C.map((U,N)=>e.jsx("div",{className:"card p-5",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`p-3 rounded-xl ${T[U.color]}`,children:e.jsx(U.icon,{className:"w-6 h-6"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-gray-500 dark:text-gray-400 uppercase tracking-wide",children:m(U.labelKey)}),e.jsx("div",{className:"text-2xl md:text-3xl font-bold text-gray-900 dark:text-white",children:U.value})]})]})},N))}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary-50 dark:bg-primary-900/20",children:e.jsx(Me,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:m("dashboard.botConfig")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:m("dashboard.botConfigDesc")})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:m("dashboard.commandPrefix")}),e.jsx("input",{type:"text",value:M.customCommandPrefix,onChange:U=>d({...M,customCommandPrefix:U.target.value}),className:"input max-w-xs font-mono",maxLength:5,placeholder:"!"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:[m("dashboard.prefixHint")," (",e.jsxs("code",{className:"px-1 py-0.5 bg-gray-100 dark:bg-dark-700 rounded text-primary-600 dark:text-primary-400",children:[M.customCommandPrefix,"welcome"]}),")"]})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{onClick:t,disabled:j,className:"btn-primary",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),m("dashboard.saving")]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4"}),m("dashboard.saveSettings")]})})})]})]})]})}const Je=({message:x,image:f,channelName:a,titleText:o,embed:m,embedSections:L,useEmbed:G=!0,imageOptions:j={},buttons:v=[]})=>{const{fontFamily:M="sans-serif",fontSize:d=40,fontWeight:t="bold",textColor:C="#ffffff",useGradient:T=!1,gradientColors:A=["#ff512f","#f09819"],gradientDirection:I="horizontal",showBorder:l=!1,borderColor:i="#ffffff",overlayOpacity:U=.4}=j,N=y=>y?y.replace(/\{user\}/g,'<span class="bg-[#5865F2]/30 text-[#5865F2] rounded px-1 cursor-pointer hover:bg-[#5865F2]/50">@User</span>').replace(/\{username\}/g,"<strong>User</strong>").replace(/\{server\}/g,"<strong>Server Name</strong>").replace(/\{memberCount\}/g,"<strong>123</strong>"):"",E=()=>{const y={fontFamily:M,fontSize:`${Math.round(d*.6)}px`,fontWeight:t,textShadow:"2px 2px 8px rgba(0,0,0,0.8)"};return T&&A&&A.length>=2?{...y,background:`linear-gradient(${I==="vertical"?"to bottom":I==="diagonal"?"45deg":"to right"}, ${A.join(", ")})`,WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",backgroundClip:"text"}:{...y,color:C}},g=(y,b)=>{var W;if(b)return"bg-[#4e5058] hover:bg-[#6d6f78] text-white";const S=((W=y==null?void 0:y.toUpperCase)==null?void 0:W.call(y))||y,h={PRIMARY:"bg-[#5865F2] hover:bg-[#4752C4] text-white",SECONDARY:"bg-[#4e5058] hover:bg-[#6d6f78] text-white",SUCCESS:"bg-[#248046] hover:bg-[#1a6334] text-white",DANGER:"bg-[#da373c] hover:bg-[#a12d31] text-white",LINK:"bg-[#4e5058] hover:bg-[#6d6f78] text-white"};return h[S]||h.PRIMARY},z=(y,b)=>e.jsxs("div",{className:"relative rounded-lg overflow-hidden max-w-[520px] mb-2 mt-2",style:l?{border:`3px solid ${i}`}:{},children:[e.jsx("img",{src:y.image,alt:"Generated Header",className:"block w-full h-32 object-cover"}),e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",style:{backgroundColor:`rgba(0, 0, 0, ${U})`},children:e.jsx("span",{className:"px-4 text-center uppercase",style:E(),children:y.titleText||"Section Title"})})]},`img-${b}`),P=y=>!y||!(y.title||y.description||y.author||y.fields&&y.fields.length>0||y.image||y.thumbnail||y.footer)?null:e.jsxs("div",{className:"mt-2 bg-[#2b2d31] border-l-4 rounded-r max-w-[520px] overflow-hidden flex",style:{borderLeftColor:y.color||"#2b2d31"},children:[e.jsxs("div",{className:"flex-1 px-4 py-3",children:[y.author&&y.author.name&&e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[(y.author.iconUrl||y.author.icon_url)&&e.jsx("img",{src:y.author.iconUrl||y.author.icon_url,alt:"",className:"w-6 h-6 rounded-full object-cover",onError:S=>S.target.style.display="none"}),y.author.url?e.jsx("a",{href:y.author.url,className:"text-sm font-medium text-white hover:underline",target:"_blank",rel:"noopener noreferrer",children:y.author.name}):e.jsx("span",{className:"text-sm font-medium text-white",children:y.author.name})]}),y.title&&(y.url?e.jsx("a",{href:y.url,className:"font-bold text-[#00a8fc] hover:underline text-base block mb-1",target:"_blank",rel:"noopener noreferrer",children:y.title}):e.jsx("div",{className:"font-bold text-white text-base mb-1",children:y.title})),y.description&&e.jsx("div",{className:"text-[#dbdee1] text-sm whitespace-pre-wrap mb-2",dangerouslySetInnerHTML:{__html:N(y.description)}}),y.fields&&y.fields.length>0&&e.jsx("div",{className:"grid gap-2 mt-2",style:{gridTemplateColumns:y.fields.some(S=>S.inline)?"repeat(auto-fill, minmax(150px, 1fr))":"1fr"},children:y.fields.map((S,h)=>e.jsxs("div",{className:S.inline?"":"col-span-full",children:[e.jsx("div",{className:"text-white font-semibold text-sm",children:S.name}),e.jsx("div",{className:"text-[#dbdee1] text-sm whitespace-pre-wrap",dangerouslySetInnerHTML:{__html:N(S.value)}})]},h))}),y.image&&y.image.url&&e.jsx("div",{className:"mt-3",children:e.jsx("img",{src:y.image.url,alt:"",className:"max-w-full rounded max-h-[300px] object-contain",onError:S=>S.target.style.display="none"})}),(y.footer||y.timestamp)&&e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-400 mt-3 pt-2 border-t border-gray-700",children:[y.footer&&(y.footer.iconUrl||y.footer.icon_url)&&e.jsx("img",{src:y.footer.iconUrl||y.footer.icon_url,alt:"",className:"w-5 h-5 rounded-full object-cover",onError:S=>S.target.style.display="none"}),y.footer&&y.footer.text&&e.jsx("span",{children:y.footer.text}),y.footer&&y.footer.text&&y.timestamp&&e.jsx("span",{className:"mx-1",children:"â€¢"}),y.timestamp&&e.jsx("span",{children:new Date().toLocaleDateString("pl-PL",{day:"numeric",month:"short",year:"numeric",hour:"2-digit",minute:"2-digit"})})]})]}),y.thumbnail&&y.thumbnail.url&&e.jsx("div",{className:"flex-shrink-0 p-3",children:e.jsx("img",{src:y.thumbnail.url,alt:"",className:"w-20 h-20 rounded object-cover",onError:S=>S.target.style.display="none"})})]}),w=()=>!v||v.length===0?null:e.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:v.map((y,b)=>{var h,W;const S=y.isLink||y.style==="LINK"||((W=(h=y.style)==null?void 0:h.toUpperCase)==null?void 0:W.call(h))==="LINK";return e.jsxs("button",{className:`px-4 py-2 rounded text-sm font-medium transition-colors flex items-center gap-2 ${g(y.style,S)}`,disabled:!0,children:[y.emoji&&e.jsx("span",{children:y.emoji}),y.label,S&&e.jsx(Ft,{className:"w-3 h-3"})]},b)})});return e.jsxs("div",{className:"bg-[#313338] rounded-md overflow-hidden font-sans text-gray-100 p-4 shadow-lg border border-[#1e1f22]",children:[e.jsxs("div",{className:"text-xs font-bold text-gray-400 uppercase mb-4 tracking-wide flex items-center",children:[e.jsx(me,{className:"mr-1 text-gray-500"})," ",a||"general"]}),e.jsxs("div",{className:"flex items-start space-x-4 group hover:bg-[#2e3035] -mx-4 px-4 py-2 transition-colors",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex-shrink-0 flex items-center justify-center text-lg",children:"ðŸ¤–"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:"font-medium text-white hover:underline cursor-pointer",children:"ã€ŒðŸŸ£ã€ ð“šð“²ð“»ð“ª  ð“”ð“¿ð“¸ð“µð“¿ð“®ð“­"}),e.jsx("span",{className:"bg-[#5865F2] text-white text-[10px] px-1.5 rounded-[3px] py-[1px] flex items-center h-4",children:"BOT"}),e.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["Today at ",new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})]})]}),x&&e.jsx("div",{className:"text-[#dbdee1] mt-1 whitespace-pre-wrap leading-relaxed",dangerouslySetInnerHTML:{__html:N(x)}}),f&&e.jsxs("div",{className:"mt-3 relative rounded-lg overflow-hidden max-w-full h-auto max-h-64 inline-block",style:l?{border:`3px solid ${i}`}:{},children:[e.jsx("img",{src:f,alt:"Attachment",className:"block max-w-full h-auto"}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center pointer-events-none",style:{backgroundColor:`rgba(0, 0, 0, ${U})`},children:e.jsx("span",{className:"px-2 rounded mb-8 uppercase",style:E(),children:o||"Title Text"})})]}),m&&!L&&P(m),L&&G&&L.map((y,b)=>e.jsxs("div",{className:"mt-2",children:[y.image&&z(y,b),(y.content||b===L.length-1&&(m==null?void 0:m.footer))&&e.jsxs("div",{className:"bg-[#2b2d31] border-l-4 rounded-r px-4 py-3 max-w-[520px]",style:{borderLeftColor:(m==null?void 0:m.color)||"#3b82f6"},children:[y.content&&e.jsx("div",{className:"text-[#dbdee1] text-sm whitespace-pre-wrap",children:y.content}),b===L.length-1&&(m==null?void 0:m.footer)&&e.jsx("div",{className:"text-xs text-gray-400 mt-2 pt-2 border-t border-gray-700",children:typeof m.footer=="string"?m.footer:m.footer.text})]})]},b)),L&&!G&&e.jsxs("div",{className:"mt-1",children:[e.jsx("div",{className:"text-[#dbdee1] whitespace-pre-wrap leading-relaxed",children:L.map(y=>y.content).join(`

`)}),L.some(y=>y.image)&&e.jsx("div",{className:"grid grid-cols-2 gap-2 mt-3 max-w-[520px]",children:L.filter(y=>y.image).map((y,b)=>e.jsx("div",{className:L.filter(S=>S.image).length===1?"col-span-2":"",children:z(y,b)},b))})]}),w()]})]})]})},ha={recent:{icon:ke,name:"Recent",emojis:[]},smileys:{icon:Ra,name:"Smileys",emojis:["ðŸ˜€","ðŸ˜ƒ","ðŸ˜„","ðŸ˜","ðŸ˜…","ðŸ˜‚","ðŸ¤£","ðŸ˜Š","ðŸ˜‡","ðŸ™‚","ðŸ™ƒ","ðŸ˜‰","ðŸ˜Œ","ðŸ˜","ðŸ¥°","ðŸ˜˜","ðŸ˜—","ðŸ˜™","ðŸ˜š","ðŸ˜‹","ðŸ˜›","ðŸ˜œ","ðŸ¤ª","ðŸ˜","ðŸ¤‘","ðŸ¤—","ðŸ¤­","ðŸ¤«","ðŸ¤”","ðŸ¤","ðŸ¤¨","ðŸ˜","ðŸ˜‘","ðŸ˜¶","ðŸ˜","ðŸ˜’","ðŸ™„","ðŸ˜¬","ðŸ¤¥","ðŸ˜Œ","ðŸ˜”","ðŸ˜ª","ðŸ¤¤","ðŸ˜´","ðŸ˜·","ðŸ¤’","ðŸ¤•","ðŸ¤¢","ðŸ¤®","ðŸ¤§","ðŸ¥µ","ðŸ¥¶","ðŸ¥´","ðŸ˜µ","ðŸ¤¯","ðŸ¤ ","ðŸ¥³","ðŸ¥¸","ðŸ˜Ž","ðŸ¤“","ðŸ§","ðŸ˜•","ðŸ˜Ÿ","ðŸ™","â˜¹ï¸","ðŸ˜®","ðŸ˜¯","ðŸ˜²","ðŸ˜³","ðŸ¥º","ðŸ˜¦","ðŸ˜§","ðŸ˜¨","ðŸ˜°","ðŸ˜¥","ðŸ˜¢","ðŸ˜­","ðŸ˜±","ðŸ˜–","ðŸ˜£","ðŸ˜ž","ðŸ˜“","ðŸ˜©","ðŸ˜«","ðŸ¥±","ðŸ˜¤","ðŸ˜¡","ðŸ˜ ","ðŸ¤¬","ðŸ˜ˆ","ðŸ‘¿","ðŸ’€","â˜ ï¸","ðŸ’©","ðŸ¤¡","ðŸ‘¹","ðŸ‘º","ðŸ‘»","ðŸ‘½","ðŸ‘¾","ðŸ¤–"]},gestures:{icon:Vt,name:"Gestures",emojis:["ðŸ‘‹","ðŸ¤š","ðŸ–ï¸","âœ‹","ðŸ––","ðŸ‘Œ","ðŸ¤Œ","ðŸ¤","âœŒï¸","ðŸ¤ž","ðŸ¤Ÿ","ðŸ¤˜","ðŸ¤™","ðŸ‘ˆ","ðŸ‘‰","ðŸ‘†","ðŸ–•","ðŸ‘‡","â˜ï¸","ðŸ‘","ðŸ‘Ž","âœŠ","ðŸ‘Š","ðŸ¤›","ðŸ¤œ","ðŸ‘","ðŸ™Œ","ðŸ‘","ðŸ¤²","ðŸ¤","ðŸ™","âœï¸","ðŸ’…","ðŸ¤³","ðŸ’ª","ðŸ¦¾","ðŸ¦¿","ðŸ¦µ","ðŸ¦¶","ðŸ‘‚","ðŸ¦»","ðŸ‘ƒ","ðŸ§ ","ðŸ«€","ðŸ«","ðŸ¦·","ðŸ¦´","ðŸ‘€","ðŸ‘ï¸","ðŸ‘…","ðŸ‘„","ðŸ’‹","ðŸ©¸"]},animals:{icon:Bt,name:"Animals",emojis:["ðŸ¶","ðŸ±","ðŸ­","ðŸ¹","ðŸ°","ðŸ¦Š","ðŸ»","ðŸ¼","ðŸ»â€â„ï¸","ðŸ¨","ðŸ¯","ðŸ¦","ðŸ®","ðŸ·","ðŸ½","ðŸ¸","ðŸµ","ðŸ™ˆ","ðŸ™‰","ðŸ™Š","ðŸ’","ðŸ”","ðŸ§","ðŸ¦","ðŸ¤","ðŸ£","ðŸ¥","ðŸ¦†","ðŸ¦…","ðŸ¦‰","ðŸ¦‡","ðŸº","ðŸ—","ðŸ´","ðŸ¦„","ðŸ","ðŸª±","ðŸ›","ðŸ¦‹","ðŸŒ","ðŸž","ðŸœ","ðŸª°","ðŸª²","ðŸª³","ðŸ¦Ÿ","ðŸ¦—","ðŸ•·ï¸","ðŸ•¸ï¸","ðŸ¦‚","ðŸ¢","ðŸ","ðŸ¦Ž","ðŸ¦–","ðŸ¦•","ðŸ™","ðŸ¦‘","ðŸ¦","ðŸ¦ž","ðŸ¦€","ðŸ¡","ðŸ ","ðŸŸ","ðŸ¬","ðŸ³","ðŸ‹","ðŸ¦ˆ","ðŸŠ","ðŸ…","ðŸ†","ðŸ¦“","ðŸ¦","ðŸ¦§","ðŸ¦£","ðŸ˜","ðŸ¦›","ðŸ¦","ðŸª","ðŸ«","ðŸ¦’","ðŸ¦˜","ðŸ¦¬","ðŸƒ","ðŸ‚","ðŸ„","ðŸŽ","ðŸ–","ðŸ","ðŸ‘","ðŸ¦™","ðŸ","ðŸ¦Œ","ðŸ•","ðŸ©","ðŸ¦®","ðŸ•â€ðŸ¦º","ðŸˆ","ðŸˆâ€â¬›","ðŸª¶","ðŸ“","ðŸ¦ƒ","ðŸ¦¤","ðŸ¦š","ðŸ¦œ","ðŸ¦¢","ðŸ¦©","ðŸ•Šï¸","ðŸ‡","ðŸ¦","ðŸ¦¨","ðŸ¦¡","ðŸ¦«","ðŸ¦¦","ðŸ¦¥","ðŸ","ðŸ€","ðŸ¿ï¸","ðŸ¦”"]},food:{icon:Ut,name:"Food",emojis:["ðŸ","ðŸŽ","ðŸ","ðŸŠ","ðŸ‹","ðŸŒ","ðŸ‰","ðŸ‡","ðŸ“","ðŸ«","ðŸˆ","ðŸ’","ðŸ‘","ðŸ¥­","ðŸ","ðŸ¥¥","ðŸ¥","ðŸ…","ðŸ†","ðŸ¥‘","ðŸ¥¦","ðŸ¥¬","ðŸ¥’","ðŸŒ¶ï¸","ðŸ«‘","ðŸŒ½","ðŸ¥•","ðŸ«’","ðŸ§„","ðŸ§…","ðŸ¥”","ðŸ ","ðŸ¥","ðŸ¥¯","ðŸž","ðŸ¥–","ðŸ¥¨","ðŸ§€","ðŸ¥š","ðŸ³","ðŸ§ˆ","ðŸ¥ž","ðŸ§‡","ðŸ¥“","ðŸ¥©","ðŸ—","ðŸ–","ðŸ¦´","ðŸŒ­","ðŸ”","ðŸŸ","ðŸ•","ðŸ«“","ðŸ¥ª","ðŸ¥™","ðŸ§†","ðŸŒ®","ðŸŒ¯","ðŸ«”","ðŸ¥—","ðŸ¥˜","ðŸ«•","ðŸ¥«","ðŸ","ðŸœ","ðŸ²","ðŸ›","ðŸ£","ðŸ±","ðŸ¥Ÿ","ðŸ¦ª","ðŸ¤","ðŸ™","ðŸš","ðŸ˜","ðŸ¥","ðŸ¥ ","ðŸ¥®","ðŸ¢","ðŸ¡","ðŸ§","ðŸ¨","ðŸ¦","ðŸ¥§","ðŸ§","ðŸ°","ðŸŽ‚","ðŸ®","ðŸ­","ðŸ¬","ðŸ«","ðŸ¿","ðŸ©","ðŸª","ðŸŒ°","ðŸ¥œ","ðŸ¯","ðŸ¥›","ðŸ¼","ðŸ«–","â˜•","ðŸµ","ðŸ§ƒ","ðŸ¥¤","ðŸ§‹","ðŸ¶","ðŸº","ðŸ»","ðŸ¥‚","ðŸ·","ðŸ¥ƒ","ðŸ¸","ðŸ¹","ðŸ§‰","ðŸ¾","ðŸ§Š","ðŸ¥„","ðŸ´","ðŸ½ï¸","ðŸ¥£","ðŸ¥¡","ðŸ¥¢","ðŸ§‚"]},activities:{icon:Ot,name:"Activities",emojis:["âš½","ðŸ€","ðŸˆ","âš¾","ðŸ¥Ž","ðŸŽ¾","ðŸ","ðŸ‰","ðŸ¥","ðŸŽ±","ðŸª€","ðŸ“","ðŸ¸","ðŸ’","ðŸ‘","ðŸ¥","ðŸ","ðŸªƒ","ðŸ¥…","â›³","ðŸª","ðŸ¹","ðŸŽ£","ðŸ¤¿","ðŸ¥Š","ðŸ¥‹","ðŸŽ½","ðŸ›¹","ðŸ›¼","ðŸ›·","â›¸ï¸","ðŸ¥Œ","ðŸŽ¿","â›·ï¸","ðŸ‚","ðŸª‚","ðŸ‹ï¸","ðŸ¤¼","ðŸ¤¸","â›¹ï¸","ðŸ¤º","ðŸ¤¾","ðŸŒï¸","ðŸ‡","ðŸ§˜","ðŸ„","ðŸŠ","ðŸ¤½","ðŸš£","ðŸ§—","ðŸšµ","ðŸš´","ðŸ†","ðŸ¥‡","ðŸ¥ˆ","ðŸ¥‰","ðŸ…","ðŸŽ–ï¸","ðŸµï¸","ðŸŽ—ï¸","ðŸŽ«","ðŸŽŸï¸","ðŸŽª","ðŸ¤¹","ðŸŽ­","ðŸ©°","ðŸŽ¨","ðŸŽ¬","ðŸŽ¤","ðŸŽ§","ðŸŽ¼","ðŸŽ¹","ðŸ¥","ðŸª˜","ðŸŽ·","ðŸŽº","ðŸª—","ðŸŽ¸","ðŸª•","ðŸŽ»","ðŸŽ²","â™Ÿï¸","ðŸŽ¯","ðŸŽ³","ðŸŽ®","ðŸŽ°","ðŸ§©"]},travel:{icon:$t,name:"Travel",emojis:["ðŸš—","ðŸš•","ðŸš™","ðŸšŒ","ðŸšŽ","ðŸŽï¸","ðŸš“","ðŸš‘","ðŸš’","ðŸš","ðŸ›»","ðŸšš","ðŸš›","ðŸšœ","ðŸ¦¯","ðŸ¦½","ðŸ¦¼","ðŸ›´","ðŸš²","ðŸ›µ","ðŸï¸","ðŸ›º","ðŸš¨","ðŸš”","ðŸš","ðŸš˜","ðŸš–","ðŸš¡","ðŸš ","ðŸšŸ","ðŸšƒ","ðŸš‹","ðŸšž","ðŸš","ðŸš„","ðŸš…","ðŸšˆ","ðŸš‚","ðŸš†","ðŸš‡","ðŸšŠ","ðŸš‰","âœˆï¸","ðŸ›«","ðŸ›¬","ðŸ›©ï¸","ðŸ’º","ðŸ›°ï¸","ðŸš€","ðŸ›¸","ðŸš","ðŸ›¶","â›µ","ðŸš¤","ðŸ›¥ï¸","ðŸ›³ï¸","â›´ï¸","ðŸš¢","âš“","ðŸª","â›½","ðŸš§","ðŸš¦","ðŸš¥","ðŸš","ðŸ—ºï¸","ðŸ—¿","ðŸ—½","ðŸ—¼","ðŸ°","ðŸ¯","ðŸŸï¸","ðŸŽ¡","ðŸŽ¢","ðŸŽ ","â›²","â›±ï¸","ðŸ–ï¸","ðŸï¸","ðŸœï¸","ðŸŒ‹","â›°ï¸","ðŸ”ï¸","ðŸ—»","ðŸ•ï¸","â›º","ðŸ›–","ðŸ ","ðŸ¡","ðŸ˜ï¸","ðŸšï¸","ðŸ—ï¸","ðŸ­","ðŸ¢","ðŸ¬","ðŸ£","ðŸ¤","ðŸ¥","ðŸ¦","ðŸ¨","ðŸª","ðŸ«","ðŸ©","ðŸ’’","ðŸ›ï¸","â›ª","ðŸ•Œ","ðŸ•","ðŸ›•","ðŸ•‹","â›©ï¸","ðŸ›¤ï¸","ðŸ›£ï¸","ðŸ—¾","ðŸŽ‘","ðŸžï¸","ðŸŒ…","ðŸŒ„","ðŸŒ ","ðŸŽ‡","ðŸŽ†","ðŸŒ‡","ðŸŒ†","ðŸ™ï¸","ðŸŒƒ","ðŸŒŒ","ðŸŒ‰","ðŸŒ"]},objects:{icon:Wt,name:"Objects",emojis:["âŒš","ðŸ“±","ðŸ“²","ðŸ’»","âŒ¨ï¸","ðŸ–¥ï¸","ðŸ–¨ï¸","ðŸ–±ï¸","ðŸ–²ï¸","ðŸ•¹ï¸","ðŸ—œï¸","ðŸ’½","ðŸ’¾","ðŸ’¿","ðŸ“€","ðŸ“¼","ðŸ“·","ðŸ“¸","ðŸ“¹","ðŸŽ¥","ðŸ“½ï¸","ðŸŽžï¸","ðŸ“ž","â˜Žï¸","ðŸ“Ÿ","ðŸ“ ","ðŸ“º","ðŸ“»","ðŸŽ™ï¸","ðŸŽšï¸","ðŸŽ›ï¸","ðŸ§­","â±ï¸","â²ï¸","â°","ðŸ•°ï¸","âŒ›","â³","ðŸ“¡","ðŸ”‹","ðŸ”Œ","ðŸ’¡","ðŸ”¦","ðŸ•¯ï¸","ðŸª”","ðŸ§¯","ðŸ›¢ï¸","ðŸ’¸","ðŸ’µ","ðŸ’´","ðŸ’¶","ðŸ’·","ðŸª™","ðŸ’°","ðŸ’³","ðŸ’Ž","âš–ï¸","ðŸªœ","ðŸ§°","ðŸª›","ðŸ”§","ðŸ”¨","âš’ï¸","ðŸ› ï¸","â›ï¸","ðŸªš","ðŸ”©","âš™ï¸","ðŸª¤","ðŸ§±","â›“ï¸","ðŸ§²","ðŸ”«","ðŸ’£","ðŸ§¨","ðŸª“","ðŸ”ª","ðŸ—¡ï¸","âš”ï¸","ðŸ›¡ï¸","ðŸš¬","âš°ï¸","ðŸª¦","âš±ï¸","ðŸº","ðŸ”®","ðŸ“¿","ðŸ§¿","ðŸ’ˆ","âš—ï¸","ðŸ”­","ðŸ”¬","ðŸ•³ï¸","ðŸ©¹","ðŸ©º","ðŸ’Š","ðŸ’‰","ðŸ©¸","ðŸ§¬","ðŸ¦ ","ðŸ§«","ðŸ§ª","ðŸŒ¡ï¸","ðŸ§¹","ðŸª ","ðŸ§º","ðŸ§»","ðŸš½","ðŸš°","ðŸš¿","ðŸ›","ðŸ›€","ðŸ§¼","ðŸª¥","ðŸª’","ðŸ§½","ðŸª£","ðŸ§´","ðŸ›Žï¸","ðŸ”‘","ðŸ—ï¸","ðŸšª","ðŸª‘","ðŸ›‹ï¸","ðŸ›ï¸","ðŸ›Œ","ðŸ§¸","ðŸª†","ðŸ–¼ï¸","ðŸªž","ðŸªŸ","ðŸ›ï¸","ðŸ›’","ðŸŽ","ðŸŽˆ","ðŸŽ","ðŸŽ€","ðŸª„","ðŸª…","ðŸŽŠ","ðŸŽ‰","ðŸŽŽ","ðŸ®","ðŸŽ","ðŸ§§","âœ‰ï¸","ðŸ“©","ðŸ“¨","ðŸ“§","ðŸ’Œ","ðŸ“¥","ðŸ“¤","ðŸ“¦","ðŸ·ï¸","ðŸª§","ðŸ“ª","ðŸ“«","ðŸ“¬","ðŸ“­","ðŸ“®","ðŸ“¯","ðŸ“œ","ðŸ“ƒ","ðŸ“„","ðŸ“‘","ðŸ§¾","ðŸ“Š","ðŸ“ˆ","ðŸ“‰","ðŸ—’ï¸","ðŸ—“ï¸","ðŸ“†","ðŸ“…","ðŸ—‘ï¸","ðŸ“‡","ðŸ—ƒï¸","ðŸ—³ï¸","ðŸ—„ï¸","ðŸ“‹","ðŸ“","ðŸ“‚","ðŸ—‚ï¸","ðŸ—žï¸","ðŸ“°","ðŸ““","ðŸ“”","ðŸ“’","ðŸ“•","ðŸ“—","ðŸ“˜","ðŸ“™","ðŸ“š","ðŸ“–","ðŸ”–","ðŸ§·","ðŸ”—","ðŸ“Ž","ðŸ–‡ï¸","ðŸ“","ðŸ“","ðŸ§®","ðŸ“Œ","ðŸ“","âœ‚ï¸","ðŸ–Šï¸","ðŸ–‹ï¸","âœ’ï¸","ðŸ–Œï¸","ðŸ–ï¸","ðŸ“","âœï¸","ðŸ”","ðŸ”Ž","ðŸ”","ðŸ”","ðŸ”’","ðŸ”“"]},symbols:{icon:Lt,name:"Symbols",emojis:["â¤ï¸","ðŸ§¡","ðŸ’›","ðŸ’š","ðŸ’™","ðŸ’œ","ðŸ–¤","ðŸ¤","ðŸ¤Ž","ðŸ’”","â£ï¸","ðŸ’•","ðŸ’ž","ðŸ’“","ðŸ’—","ðŸ’–","ðŸ’˜","ðŸ’","ðŸ’Ÿ","â˜®ï¸","âœï¸","â˜ªï¸","ðŸ•‰ï¸","â˜¸ï¸","âœ¡ï¸","ðŸ”¯","ðŸ•Ž","â˜¯ï¸","â˜¦ï¸","ðŸ›","â›Ž","â™ˆ","â™‰","â™Š","â™‹","â™Œ","â™","â™Ž","â™","â™","â™‘","â™’","â™“","ðŸ†”","âš›ï¸","ðŸ‰‘","â˜¢ï¸","â˜£ï¸","ðŸ“´","ðŸ“³","ðŸˆ¶","ðŸˆš","ðŸˆ¸","ðŸˆº","ðŸˆ·ï¸","âœ´ï¸","ðŸ†š","ðŸ’®","ðŸ‰","ãŠ™ï¸","ãŠ—ï¸","ðŸˆ´","ðŸˆµ","ðŸˆ¹","ðŸˆ²","ðŸ…°ï¸","ðŸ…±ï¸","ðŸ†Ž","ðŸ†‘","ðŸ…¾ï¸","ðŸ†˜","âŒ","â­•","ðŸ›‘","â›”","ðŸ“›","ðŸš«","ðŸ’¯","ðŸ’¢","â™¨ï¸","ðŸš·","ðŸš¯","ðŸš³","ðŸš±","ðŸ”ž","ðŸ“µ","ðŸš­","â—","â•","â“","â”","â€¼ï¸","â‰ï¸","ðŸ”…","ðŸ”†","ã€½ï¸","âš ï¸","ðŸš¸","ðŸ”±","âšœï¸","ðŸ”°","â™»ï¸","âœ…","ðŸˆ¯","ðŸ’¹","â‡ï¸","âœ³ï¸","âŽ","ðŸŒ","ðŸ’ ","â“‚ï¸","ðŸŒ€","ðŸ’¤","ðŸ§","ðŸš¾","â™¿","ðŸ…¿ï¸","ðŸ›—","ðŸˆ³","ðŸˆ‚ï¸","ðŸ›‚","ðŸ›ƒ","ðŸ›„","ðŸ›…","ðŸš¹","ðŸšº","ðŸš¼","âš§ï¸","ðŸš»","ðŸš®","ðŸŽ¦","ðŸ“¶","ðŸˆ","ðŸ”£","â„¹ï¸","ðŸ”¤","ðŸ”¡","ðŸ” ","ðŸ†–","ðŸ†—","ðŸ†™","ðŸ†’","ðŸ†•","ðŸ†“","0ï¸âƒ£","1ï¸âƒ£","2ï¸âƒ£","3ï¸âƒ£","4ï¸âƒ£","5ï¸âƒ£","6ï¸âƒ£","7ï¸âƒ£","8ï¸âƒ£","9ï¸âƒ£","ðŸ”Ÿ","ðŸ”¢","#ï¸âƒ£","*ï¸âƒ£","âï¸","â–¶ï¸","â¸ï¸","â¯ï¸","â¹ï¸","âºï¸","â­ï¸","â®ï¸","â©","âª","â«","â¬","â—€ï¸","ðŸ”¼","ðŸ”½","âž¡ï¸","â¬…ï¸","â¬†ï¸","â¬‡ï¸","â†—ï¸","â†˜ï¸","â†™ï¸","â†–ï¸","â†•ï¸","â†”ï¸","â†ªï¸","â†©ï¸","â¤´ï¸","â¤µï¸","ðŸ”€","ðŸ”","ðŸ”‚","ðŸ”„","ðŸ”ƒ","ðŸŽµ","ðŸŽ¶","âž•","âž–","âž—","âœ–ï¸","â™¾ï¸","ðŸ’²","ðŸ’±","â„¢ï¸","Â©ï¸","Â®ï¸","ðŸ‘ï¸â€ðŸ—¨ï¸","ðŸ”š","ðŸ”™","ðŸ”›","ðŸ”","ðŸ”œ","ã€°ï¸","âž°","âž¿","âœ”ï¸","â˜‘ï¸","ðŸ”˜","ðŸ”´","ðŸŸ ","ðŸŸ¡","ðŸŸ¢","ðŸ”µ","ðŸŸ£","âš«","âšª","ðŸŸ¤","ðŸ”º","ðŸ”»","ðŸ”¸","ðŸ”¹","ðŸ”¶","ðŸ”·","ðŸ”³","ðŸ”²","â–ªï¸","â–«ï¸","â—¾","â—½","â—¼ï¸","â—»ï¸","ðŸŸ¥","ðŸŸ§","ðŸŸ¨","ðŸŸ©","ðŸŸ¦","ðŸŸª","â¬›","â¬œ","ðŸŸ«","ðŸ”ˆ","ðŸ”‡","ðŸ”‰","ðŸ”Š","ðŸ””","ðŸ”•","ðŸ“£","ðŸ“¢","ðŸ’¬","ðŸ’­","ðŸ—¯ï¸","â™ ï¸","â™£ï¸","â™¥ï¸","â™¦ï¸","ðŸƒ","ðŸŽ´","ðŸ€„","ðŸ•","ðŸ•‘","ðŸ•’","ðŸ•“","ðŸ•”","ðŸ••","ðŸ•–","ðŸ•—","ðŸ•˜","ðŸ•™","ðŸ•š","ðŸ•›","ðŸ•œ","ðŸ•","ðŸ•ž","ðŸ•Ÿ","ðŸ• ","ðŸ•¡","ðŸ•¢","ðŸ•£","ðŸ•¤","ðŸ•¥","ðŸ•¦","ðŸ•§"]},flags:{icon:Dt,name:"Flags",emojis:["ðŸ³ï¸","ðŸ´","ðŸ´â€â˜ ï¸","ðŸ","ðŸš©","ðŸŽŒ","ðŸ³ï¸â€ðŸŒˆ","ðŸ³ï¸â€âš§ï¸","ðŸ‡ºðŸ‡³","ðŸ‡¦ðŸ‡«","ðŸ‡¦ðŸ‡±","ðŸ‡©ðŸ‡¿","ðŸ‡¦ðŸ‡¸","ðŸ‡¦ðŸ‡©","ðŸ‡¦ðŸ‡´","ðŸ‡¦ðŸ‡®","ðŸ‡¦ðŸ‡¶","ðŸ‡¦ðŸ‡¬","ðŸ‡¦ðŸ‡·","ðŸ‡¦ðŸ‡²","ðŸ‡¦ðŸ‡¼","ðŸ‡¦ðŸ‡º","ðŸ‡¦ðŸ‡¹","ðŸ‡¦ðŸ‡¿","ðŸ‡§ðŸ‡¸","ðŸ‡§ðŸ‡­","ðŸ‡§ðŸ‡©","ðŸ‡§ðŸ‡§","ðŸ‡§ðŸ‡¾","ðŸ‡§ðŸ‡ª","ðŸ‡§ðŸ‡¿","ðŸ‡§ðŸ‡¯","ðŸ‡§ðŸ‡²","ðŸ‡§ðŸ‡¹","ðŸ‡§ðŸ‡´","ðŸ‡§ðŸ‡¦","ðŸ‡§ðŸ‡¼","ðŸ‡§ðŸ‡·","ðŸ‡®ðŸ‡´","ðŸ‡»ðŸ‡¬","ðŸ‡§ðŸ‡³","ðŸ‡§ðŸ‡¬","ðŸ‡§ðŸ‡«","ðŸ‡§ðŸ‡®","ðŸ‡°ðŸ‡­","ðŸ‡¨ðŸ‡²","ðŸ‡¨ðŸ‡¦","ðŸ‡®ðŸ‡¨","ðŸ‡¨ðŸ‡»","ðŸ‡§ðŸ‡¶","ðŸ‡°ðŸ‡¾","ðŸ‡¨ðŸ‡«","ðŸ‡¹ðŸ‡©","ðŸ‡¨ðŸ‡±","ðŸ‡¨ðŸ‡³","ðŸ‡¨ðŸ‡½","ðŸ‡¨ðŸ‡¨","ðŸ‡¨ðŸ‡´","ðŸ‡°ðŸ‡²","ðŸ‡¨ðŸ‡¬","ðŸ‡¨ðŸ‡©","ðŸ‡¨ðŸ‡°","ðŸ‡¨ðŸ‡·","ðŸ‡¨ðŸ‡®","ðŸ‡­ðŸ‡·","ðŸ‡¨ðŸ‡º","ðŸ‡¨ðŸ‡¼","ðŸ‡¨ðŸ‡¾","ðŸ‡¨ðŸ‡¿","ðŸ‡©ðŸ‡°","ðŸ‡©ðŸ‡¯","ðŸ‡©ðŸ‡²","ðŸ‡©ðŸ‡´","ðŸ‡ªðŸ‡¨","ðŸ‡ªðŸ‡¬","ðŸ‡¸ðŸ‡»","ðŸ‡¬ðŸ‡¶","ðŸ‡ªðŸ‡·","ðŸ‡ªðŸ‡ª","ðŸ‡¸ðŸ‡¿","ðŸ‡ªðŸ‡¹","ðŸ‡ªðŸ‡º","ðŸ‡«ðŸ‡°","ðŸ‡«ðŸ‡´","ðŸ‡«ðŸ‡¯","ðŸ‡«ðŸ‡®","ðŸ‡«ðŸ‡·","ðŸ‡¬ðŸ‡«","ðŸ‡µðŸ‡«","ðŸ‡¹ðŸ‡«","ðŸ‡¬ðŸ‡¦","ðŸ‡¬ðŸ‡²","ðŸ‡¬ðŸ‡ª","ðŸ‡©ðŸ‡ª","ðŸ‡¬ðŸ‡­","ðŸ‡¬ðŸ‡®","ðŸ‡¬ðŸ‡·","ðŸ‡¬ðŸ‡±","ðŸ‡¬ðŸ‡©","ðŸ‡¬ðŸ‡µ","ðŸ‡¬ðŸ‡º","ðŸ‡¬ðŸ‡¹","ðŸ‡¬ðŸ‡¬","ðŸ‡¬ðŸ‡³","ðŸ‡¬ðŸ‡¼","ðŸ‡¬ðŸ‡¾","ðŸ‡­ðŸ‡¹","ðŸ‡­ðŸ‡³","ðŸ‡­ðŸ‡°","ðŸ‡­ðŸ‡º","ðŸ‡®ðŸ‡¸","ðŸ‡®ðŸ‡³","ðŸ‡®ðŸ‡©","ðŸ‡®ðŸ‡·","ðŸ‡®ðŸ‡¶","ðŸ‡®ðŸ‡ª","ðŸ‡®ðŸ‡²","ðŸ‡®ðŸ‡±","ðŸ‡®ðŸ‡¹","ðŸ‡¯ðŸ‡²","ðŸ‡¯ðŸ‡µ","ðŸŽŒ","ðŸ‡¯ðŸ‡ª","ðŸ‡¯ðŸ‡´","ðŸ‡°ðŸ‡¿","ðŸ‡°ðŸ‡ª","ðŸ‡°ðŸ‡®","ðŸ‡½ðŸ‡°","ðŸ‡°ðŸ‡¼","ðŸ‡°ðŸ‡¬","ðŸ‡±ðŸ‡¦","ðŸ‡±ðŸ‡»","ðŸ‡±ðŸ‡§","ðŸ‡±ðŸ‡¸","ðŸ‡±ðŸ‡·","ðŸ‡±ðŸ‡¾","ðŸ‡±ðŸ‡®","ðŸ‡±ðŸ‡¹","ðŸ‡±ðŸ‡º","ðŸ‡²ðŸ‡´","ðŸ‡²ðŸ‡¬","ðŸ‡²ðŸ‡¼","ðŸ‡²ðŸ‡¾","ðŸ‡²ðŸ‡»","ðŸ‡²ðŸ‡±","ðŸ‡²ðŸ‡¹","ðŸ‡²ðŸ‡­","ðŸ‡²ðŸ‡¶","ðŸ‡²ðŸ‡·","ðŸ‡²ðŸ‡º","ðŸ‡¾ðŸ‡¹","ðŸ‡²ðŸ‡½","ðŸ‡«ðŸ‡²","ðŸ‡²ðŸ‡©","ðŸ‡²ðŸ‡¨","ðŸ‡²ðŸ‡³","ðŸ‡²ðŸ‡ª","ðŸ‡²ðŸ‡¸","ðŸ‡²ðŸ‡¦","ðŸ‡²ðŸ‡¿","ðŸ‡²ðŸ‡²","ðŸ‡³ðŸ‡¦","ðŸ‡³ðŸ‡·","ðŸ‡³ðŸ‡µ","ðŸ‡³ðŸ‡±","ðŸ‡³ðŸ‡¨","ðŸ‡³ðŸ‡¿","ðŸ‡³ðŸ‡®","ðŸ‡³ðŸ‡ª","ðŸ‡³ðŸ‡¬","ðŸ‡³ðŸ‡º","ðŸ‡³ðŸ‡«","ðŸ‡°ðŸ‡µ","ðŸ‡²ðŸ‡°","ðŸ‡²ðŸ‡µ","ðŸ‡³ðŸ‡´","ðŸ‡´ðŸ‡²","ðŸ‡µðŸ‡°","ðŸ‡µðŸ‡¼","ðŸ‡µðŸ‡¸","ðŸ‡µðŸ‡¦","ðŸ‡µðŸ‡¬","ðŸ‡µðŸ‡¾","ðŸ‡µðŸ‡ª","ðŸ‡µðŸ‡­","ðŸ‡µðŸ‡³","ðŸ‡µðŸ‡±","ðŸ‡µðŸ‡¹","ðŸ‡µðŸ‡·","ðŸ‡¶ðŸ‡¦","ðŸ‡·ðŸ‡ª","ðŸ‡·ðŸ‡´","ðŸ‡·ðŸ‡º","ðŸ‡·ðŸ‡¼","ðŸ‡¼ðŸ‡¸","ðŸ‡¸ðŸ‡²","ðŸ‡¸ðŸ‡¹","ðŸ‡¸ðŸ‡¦","ðŸ‡¸ðŸ‡³","ðŸ‡·ðŸ‡¸","ðŸ‡¸ðŸ‡¨","ðŸ‡¸ðŸ‡±","ðŸ‡¸ðŸ‡¬","ðŸ‡¸ðŸ‡½","ðŸ‡¸ðŸ‡°","ðŸ‡¸ðŸ‡®","ðŸ‡¬ðŸ‡¸","ðŸ‡¸ðŸ‡§","ðŸ‡¸ðŸ‡´","ðŸ‡¿ðŸ‡¦","ðŸ‡°ðŸ‡·","ðŸ‡¸ðŸ‡¸","ðŸ‡ªðŸ‡¸","ðŸ‡±ðŸ‡°","ðŸ‡§ðŸ‡±","ðŸ‡¸ðŸ‡­","ðŸ‡°ðŸ‡³","ðŸ‡±ðŸ‡¨","ðŸ‡µðŸ‡²","ðŸ‡»ðŸ‡¨","ðŸ‡¸ðŸ‡©","ðŸ‡¸ðŸ‡·","ðŸ‡¸ðŸ‡ª","ðŸ‡¨ðŸ‡­","ðŸ‡¸ðŸ‡¾","ðŸ‡¹ðŸ‡¼","ðŸ‡¹ðŸ‡¯","ðŸ‡¹ðŸ‡¿","ðŸ‡¹ðŸ‡­","ðŸ‡¹ðŸ‡±","ðŸ‡¹ðŸ‡¬","ðŸ‡¹ðŸ‡°","ðŸ‡¹ðŸ‡´","ðŸ‡¹ðŸ‡¹","ðŸ‡¹ðŸ‡³","ðŸ‡¹ðŸ‡·","ðŸ‡¹ðŸ‡²","ðŸ‡¹ðŸ‡¨","ðŸ‡¹ðŸ‡»","ðŸ‡»ðŸ‡®","ðŸ‡ºðŸ‡¬","ðŸ‡ºðŸ‡¦","ðŸ‡¦ðŸ‡ª","ðŸ‡¬ðŸ‡§","ðŸ´ó §ó ¢ó ¥ó ®ó §ó ¿","ðŸ´ó §ó ¢ó ³ó £ó ´ó ¿","ðŸ´ó §ó ¢ó ·ó ¬ó ³ó ¿","ðŸ‡ºðŸ‡¸","ðŸ‡ºðŸ‡¾","ðŸ‡ºðŸ‡¿","ðŸ‡»ðŸ‡º","ðŸ‡»ðŸ‡¦","ðŸ‡»ðŸ‡ª","ðŸ‡»ðŸ‡³","ðŸ‡¼ðŸ‡«","ðŸ‡ªðŸ‡­","ðŸ‡¾ðŸ‡ª","ðŸ‡¿ðŸ‡²","ðŸ‡¿ðŸ‡¼"]}},Za="kira_recent_emojis";function Xe({guildId:x,onSelect:f,inputRef:a,buttonClassName:o}){var z,P;const[m,L]=u.useState(!1),[G,j]=u.useState(""),[v,M]=u.useState("smileys"),[d,t]=u.useState([]),[C,T]=u.useState([]),[A,I]=u.useState(!1),l=u.useRef(null),i=u.useRef(null);u.useEffect(()=>{try{const w=localStorage.getItem(Za);w&&T(JSON.parse(w))}catch{}},[]),u.useEffect(()=>{m&&x&&d.length===0&&(I(!0),X.getGuildEmojis(x).then(w=>{t(w.data.data||[])}).catch(()=>{}).finally(()=>I(!1)))},[m,x]),u.useEffect(()=>{const w=y=>{l.current&&!l.current.contains(y.target)&&i.current&&!i.current.contains(y.target)&&L(!1)};if(m)return document.addEventListener("mousedown",w),()=>document.removeEventListener("mousedown",w)},[m]);const U=(w,y=!1)=>{const S=[y?{...w,isCustom:!0}:{emoji:w,isCustom:!1},...C.filter(h=>y?h.id!==w.id:h.emoji!==w)].slice(0,24);T(S),localStorage.setItem(Za,JSON.stringify(S))},N=(w,y=!1)=>{if(y?(f(w.formatted,w),U(w,!0)):(f(w),U(w,!1)),a!=null&&a.current){const b=a.current,S=b.selectionStart,h=b.selectionEnd,W=b.value,q=y?w.formatted:w;b.value=W.substring(0,S)+q+W.substring(h),b.selectionStart=b.selectionEnd=S+q.length,b.focus();const K=new Event("input",{bubbles:!0});b.dispatchEvent(K)}},E=G?[...d.filter(w=>w.name.toLowerCase().includes(G.toLowerCase())),...Object.values(ha).flatMap(w=>w.emojis).filter(w=>w.includes(G))]:null,g=ha[v];return e.jsxs("div",{className:"relative inline-block",children:[e.jsx("button",{ref:i,type:"button",onClick:()=>L(!m),className:o||"p-2 text-gray-400 hover:text-yellow-500 transition-colors rounded hover:bg-gray-100 dark:hover:bg-dark-600",title:"Insert emoji",children:e.jsx(Ra,{className:"w-4 h-4"})}),m&&e.jsxs("div",{ref:l,className:"absolute z-50 bottom-full mb-2 right-0 w-80 bg-white dark:bg-dark-800 rounded-xl shadow-2xl border border-gray-200 dark:border-dark-600 overflow-hidden",children:[e.jsx("div",{className:"p-2 border-b border-gray-200 dark:border-dark-600",children:e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-3 h-3"}),e.jsx("input",{type:"text",placeholder:"Search emoji...",value:G,onChange:w=>j(w.target.value),className:"w-full pl-8 pr-8 py-2 text-sm bg-gray-100 dark:bg-dark-700 border-none rounded-lg focus:ring-2 focus:ring-blue-500 text-gray-900 dark:text-white",autoFocus:!0}),G&&e.jsx("button",{onClick:()=>j(""),className:"absolute right-2 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:e.jsx(pe,{className:"w-3 h-3"})})]})}),!G&&e.jsxs("div",{className:"flex border-b border-gray-200 dark:border-dark-600 px-1 py-1 gap-0.5 overflow-x-auto scrollbar-hide",children:[d.length>0&&e.jsx("button",{onClick:()=>M("custom"),className:`p-2 rounded-lg transition-colors flex-shrink-0 ${v==="custom"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-500 hover:bg-gray-100 dark:hover:bg-dark-700"}`,title:"Server Emojis",children:e.jsx("img",{src:(z=d[0])==null?void 0:z.url,alt:"Custom",className:"w-5 h-5 object-contain"})}),C.length>0&&e.jsx("button",{onClick:()=>M("recent"),className:`p-2 rounded-lg transition-colors flex-shrink-0 ${v==="recent"?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-500 hover:bg-gray-100 dark:hover:bg-dark-700"}`,title:"Recent",children:e.jsx(ke,{className:"w-5 h-5"})}),Object.entries(ha).filter(([w])=>w!=="recent").map(([w,y])=>e.jsx("button",{onClick:()=>M(w),className:`p-2 rounded-lg transition-colors flex-shrink-0 ${v===w?"bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400":"text-gray-500 hover:bg-gray-100 dark:hover:bg-dark-700"}`,title:y.name,children:e.jsx(y.icon,{className:"w-5 h-5"})},w))]}),e.jsx("div",{className:"h-64 overflow-y-auto p-2",children:A?e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-2 border-blue-500 border-t-transparent"})}):G?e.jsxs("div",{className:"grid grid-cols-8 gap-1",children:[E.map((w,y)=>typeof w=="object"?e.jsx("button",{onClick:()=>N(w,!0),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg transition-colors",title:`:${w.name}:`,children:e.jsx("img",{src:w.url,alt:w.name,className:"w-6 h-6 object-contain"})},w.id):e.jsx("button",{onClick:()=>N(w),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg text-xl transition-colors",children:w},`${w}-${y}`)),E.length===0&&e.jsx("div",{className:"col-span-8 text-center text-gray-500 py-8",children:"No emojis found"})]}):v==="custom"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-2 px-1",children:["Server Emojis (",d.length,")"]}),e.jsx("div",{className:"grid grid-cols-8 gap-1",children:d.map(w=>e.jsx("button",{onClick:()=>N(w,!0),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg transition-colors group relative",title:`:${w.name}:`,children:e.jsx("img",{src:w.url,alt:w.name,className:`w-6 h-6 object-contain ${w.animated?"group-hover:animate-pulse":""}`})},w.id))})]}):v==="recent"?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-2 px-1",children:"Recently Used"}),e.jsx("div",{className:"grid grid-cols-8 gap-1",children:C.map((w,y)=>w.isCustom?e.jsx("button",{onClick:()=>N(w,!0),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg transition-colors",title:`:${w.name}:`,children:e.jsx("img",{src:w.url,alt:w.name,className:"w-6 h-6 object-contain"})},`recent-${w.id}-${y}`):e.jsx("button",{onClick:()=>N(w.emoji),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg text-xl transition-colors",children:w.emoji},`recent-${w.emoji}-${y}`))})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase mb-2 px-1",children:g==null?void 0:g.name}),e.jsx("div",{className:"grid grid-cols-8 gap-1",children:g==null?void 0:g.emojis.map((w,y)=>e.jsx("button",{onClick:()=>N(w),className:"p-1.5 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg text-xl transition-colors",children:w},`${w}-${y}`))})]})}),d.length>0&&!G&&e.jsxs("div",{className:"px-3 py-2 border-t border-gray-200 dark:border-dark-600 text-xs text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[e.jsx("img",{src:(P=d[0])==null?void 0:P.url,alt:"",className:"w-4 h-4"}),e.jsxs("span",{children:[d.length," server emojis available"]})]})]})]})}const ua=[{var:"{user}",desc:"Ping uÅ¼ytkownika (@user)"},{var:"{username}",desc:"Nazwa uÅ¼ytkownika"},{var:"{displayName}",desc:"WyÅ›wietlana nazwa"},{var:"{tag}",desc:"PeÅ‚ny tag (user#0000)"},{var:"{userId}",desc:"ID uÅ¼ytkownika"},{var:"{server}",desc:"Nazwa serwera"},{var:"{memberCount}",desc:"Liczba czÅ‚onkÃ³w"},{var:"{createdAt}",desc:"Data utworzenia konta"},{var:"{accountAge}",desc:"Wiek konta w dniach"},{var:"{avatar}",desc:"URL avatara"}],Ss=[{name:"Zielony",value:"#00ff00"},{name:"Niebieski",value:"#3498db"},{name:"Fioletowy",value:"#9b59b6"},{name:"ZÅ‚oty",value:"#f1c40f"},{name:"PomaraÅ„czowy",value:"#e67e22"},{name:"Czerwony",value:"#e74c3c"},{name:"RÃ³Å¼owy",value:"#e91e63"},{name:"Turkusowy",value:"#1abc9c"},{name:"Discord",value:"#5865f2"}];function Ms({guildId:x,channels:f,roles:a,initialSettings:o,setMessage:m,onSave:L}){const{t:G}=ge(),[j,v]=u.useState(!1),[M,d]=u.useState(!1),[t,C]=u.useState("welcome"),T=u.useRef(null),A=u.useRef(null),I=u.useRef(null),[l,i]=u.useState({welcomeEnabled:!1,welcomeChannelId:"",welcomeMessage:"Witaj {user} na serwerze **{server}**! JesteÅ› {memberCount}. czÅ‚onkiem!",welcomeImage:"",welcomeTitle:"Witaj na serwerze!",welcomeColor:"#00ff00",welcomeFooter:"",welcomeThumbnail:!0,welcomePingUser:!0,welcomeDelay:0,welcomeIgnoreBots:!0,welcomeDmEnabled:!1,welcomeDmMessage:"Witaj na serwerze **{server}**! Cieszymy siÄ™, Å¼e do nas doÅ‚Ä…czyÅ‚eÅ›.",autoRoleEnabled:!1,autoRoleIds:[],autoRoleDelay:0,autoRoleIgnoreBots:!0,minAccountAge:0,minAccountAgeAction:"none",minAccountAgeNotifyChannelId:"",goodbyeEnabled:!1,goodbyeChannelId:"",goodbyeMessage:"{username} opuÅ›ciÅ‚ serwer. Å»egnaj!",goodbyeImage:"",goodbyeTitle:"Do widzenia!",goodbyeColor:"#e74c3c",goodbyeFooter:"",goodbyeThumbnail:!0,goodbyeShowRoles:!0,goodbyeShowJoinDate:!0,goodbyeIgnoreBots:!0});u.useEffect(()=>{o&&i(h=>({...h,...o,welcomeEnabled:o.welcomeEnabled||!1,goodbyeEnabled:o.goodbyeEnabled||!1,autoRoleIds:o.autoRoleIds||[]}))},[o]);const U=(h,W)=>{const q=h.target.files[0];if(q){if(q.size>2*1024*1024){m({type:"error",text:"Obraz nie moÅ¼e byÄ‡ wiÄ™kszy niÅ¼ 2MB"});return}const K=new FileReader;K.onloadend=()=>{W==="welcome"&&i({...l,welcomeImage:K.result}),W==="goodbye"&&i({...l,goodbyeImage:K.result})},K.readAsDataURL(q)}},N=async h=>{h.preventDefault(),v(!0);try{await X.updateGuildSettings(x,l),m({type:"success",text:G("dashboard.settingsSaved")}),L&&L()}catch{m({type:"error",text:G("dashboard.settingsSaveFailed")})}finally{v(!1)}},E=h=>{var W;return((W=(f||[]).find(q=>q.id===h))==null?void 0:W.name)||"unknown-channel"},g=h=>{var W;return((W=(a||[]).find(q=>q.id===h))==null?void 0:W.name)||"Unknown"},z=(a||[]).filter(h=>h.name!=="@everyone"&&!h.managed&&h.canManage),P=h=>{const W=l.autoRoleIds||[];W.includes(h)?i({...l,autoRoleIds:W.filter(q=>q!==h)}):i({...l,autoRoleIds:[...W,h]})},w=(h,W)=>{if(W!=null&&W.current){const q=W.current,K=q.selectionStart,te=q.selectionEnd,p=q.value,O=p.substring(0,K)+h+p.substring(te);W===T?i({...l,welcomeMessage:O}):W===A?i({...l,welcomeDmMessage:O}):W===I&&i({...l,goodbyeMessage:O}),setTimeout(()=>{q.selectionStart=q.selectionEnd=K+h.length,q.focus()},0)}},y=({enabled:h,onChange:W,label:q,description:K})=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700/50 rounded-lg",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white text-sm",children:q}),K&&e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:K})]}),e.jsx("button",{type:"button",onClick:W,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-dark-800 ${h?"bg-primary-500":"bg-gray-300 dark:bg-dark-600"}`,role:"switch","aria-checked":h,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-transform duration-200 ${h?"translate-x-6":"translate-x-1"}`})})]}),b=({value:h,onChange:W,label:q})=>e.jsxs("div",{children:[e.jsx("label",{className:"label",children:q}),e.jsxs("div",{className:"flex gap-2 flex-wrap",children:[Ss.map(K=>e.jsx("button",{type:"button",onClick:()=>W(K.value),className:`w-8 h-8 rounded-lg border-2 transition-all ${h===K.value?"border-gray-900 dark:border-white scale-110":"border-transparent hover:scale-105"}`,style:{backgroundColor:K.value},title:K.name},K.value)),e.jsx("input",{type:"color",value:h,onChange:K=>W(K.target.value),className:"w-8 h-8 rounded-lg cursor-pointer border-0",title:"WÅ‚asny kolor"})]})]}),S=()=>e.jsxs("div",{className:`bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-4 mb-4 ${M?"":"hidden"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h4",{className:"font-medium text-blue-900 dark:text-blue-200 flex items-center gap-2",children:[e.jsx(st,{className:"w-4 h-4"}),"DostÄ™pne zmienne"]}),e.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-blue-500 hover:text-blue-700",children:e.jsx(pe,{className:"w-4 h-4"})})]}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:ua.map(h=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("code",{className:"bg-blue-100 dark:bg-blue-800 px-2 py-0.5 rounded text-blue-800 dark:text-blue-200 font-mono text-xs",children:h.var}),e.jsx("span",{className:"text-gray-600 dark:text-gray-400 text-xs truncate",children:h.desc})]},h.var))})]});return e.jsxs("div",{className:"flex flex-col xl:flex-row gap-6",children:[e.jsx("div",{className:"flex-1 space-y-6",children:e.jsxs("form",{onSubmit:N,className:"space-y-6",children:[e.jsxs("div",{className:"flex bg-gray-100 dark:bg-dark-700 rounded-xl p-1",children:[e.jsxs("button",{type:"button",onClick:()=>C("welcome"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg font-medium transition-all ${t==="welcome"?"bg-white dark:bg-dark-800 text-green-600 dark:text-green-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(ya,{className:"w-4 h-4"}),"Welcome"]}),e.jsxs("button",{type:"button",onClick:()=>C("goodbye"),className:`flex-1 flex items-center justify-center gap-2 py-2.5 px-4 rounded-lg font-medium transition-all ${t==="goodbye"?"bg-white dark:bg-dark-800 text-red-600 dark:text-red-400 shadow-sm":"text-gray-600 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white"}`,children:[e.jsx(Ua,{className:"w-4 h-4"}),"Goodbye"]})]}),e.jsxs("button",{type:"button",onClick:()=>d(!M),className:"flex items-center gap-2 text-sm text-blue-600 dark:text-blue-400 hover:underline",children:[M?e.jsx(Gt,{className:"w-3 h-3"}):e.jsx(Ia,{className:"w-3 h-3"}),M?"Ukryj zmienne":"PokaÅ¼ dostÄ™pne zmienne"]}),e.jsx(S,{}),t==="welcome"&&e.jsxs("div",{className:"space-y-6 animate-fade-in",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-50 dark:bg-green-900/20 text-green-600 dark:text-green-400",children:e.jsx(ya,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"WiadomoÅ›Ä‡ powitalna"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"WysyÅ‚ana na kanaÅ‚ gdy ktoÅ› doÅ‚Ä…czy"})]})]}),e.jsx("button",{type:"button",onClick:()=>i({...l,welcomeEnabled:!l.welcomeEnabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l.welcomeEnabled?"bg-green-500":"bg-gray-300 dark:bg-dark-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-transform ${l.welcomeEnabled?"translate-x-6":"translate-x-1"}`})})]}),l.welcomeEnabled&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(me,{className:"inline w-3 h-3 mr-1"}),"KanaÅ‚"]}),e.jsxs("select",{value:l.welcomeChannelId,onChange:h=>i({...l,welcomeChannelId:h.target.value}),className:"select",children:[e.jsx("option",{value:"",children:"Wybierz kanaÅ‚..."}),(f||[]).filter(h=>h.type===0).map(h=>e.jsxs("option",{value:h.id,children:["#",h.name]},h.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(ke,{className:"inline w-3 h-3 mr-1"}),"OpÃ³Åºnienie (sekundy)"]}),e.jsx("input",{type:"number",min:"0",max:"300",value:l.welcomeDelay,onChange:h=>i({...l,welcomeDelay:parseInt(h.target.value)||0}),className:"input"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"TytuÅ‚ embeda"}),e.jsx("input",{type:"text",value:l.welcomeTitle,onChange:h=>i({...l,welcomeTitle:h.target.value}),className:"input",placeholder:"Witaj na serwerze!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"WiadomoÅ›Ä‡"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:T,value:l.welcomeMessage,onChange:h=>i({...l,welcomeMessage:h.target.value}),className:"input min-h-[100px] resize-y pr-10",placeholder:"Witaj {user} na serwerze {server}!"}),e.jsx("div",{className:"absolute right-2 top-2 flex gap-1",children:e.jsx(Xe,{guildId:x,onSelect:h=>i({...l,welcomeMessage:l.welcomeMessage+h}),inputRef:T})})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:ua.slice(0,5).map(h=>e.jsx("button",{type:"button",onClick:()=>w(h.var,T),className:"text-xs bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600 px-2 py-1 rounded text-gray-600 dark:text-gray-400",children:h.var},h.var))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Footer (opcjonalny)"}),e.jsx("input",{type:"text",value:l.welcomeFooter,onChange:h=>i({...l,welcomeFooter:h.target.value}),className:"input",placeholder:"np. Przeczytaj regulamin!"})]}),e.jsx(b,{value:l.welcomeColor,onChange:h=>i({...l,welcomeColor:h}),label:"Kolor embeda"}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(ta,{className:"inline w-3 h-3 mr-1"}),"TÅ‚o obrazka"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:h=>U(h,"welcome"),className:`flex-1 block text-sm text-gray-500 dark:text-gray-400\r
                            file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0\r
                            file:text-sm file:font-medium file:bg-green-50 dark:file:bg-green-900/20\r
                            file:text-green-700 dark:file:text-green-300 hover:file:bg-green-100\r
                            file:cursor-pointer file:transition-colors`}),l.welcomeImage&&e.jsx("button",{type:"button",onClick:()=>i({...l,welcomeImage:""}),className:"px-3 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:e.jsx(pe,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(y,{enabled:l.welcomePingUser,onChange:()=>i({...l,welcomePingUser:!l.welcomePingUser}),label:"Pinguj uÅ¼ytkownika",description:"WyÅ›lij ping poza embedem"}),e.jsx(y,{enabled:l.welcomeThumbnail,onChange:()=>i({...l,welcomeThumbnail:!l.welcomeThumbnail}),label:"PokaÅ¼ avatar",description:"WyÅ›wietl avatar w rogu"}),e.jsx(y,{enabled:l.welcomeIgnoreBots,onChange:()=>i({...l,welcomeIgnoreBots:!l.welcomeIgnoreBots}),label:"Ignoruj boty",description:"Nie witaj botÃ³w"})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400",children:e.jsx(ja,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"WiadomoÅ›Ä‡ prywatna (DM)"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"WysyÅ‚ana bezpoÅ›rednio do uÅ¼ytkownika"})]})]}),e.jsx("button",{type:"button",onClick:()=>i({...l,welcomeDmEnabled:!l.welcomeDmEnabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l.welcomeDmEnabled?"bg-blue-500":"bg-gray-300 dark:bg-dark-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-transform ${l.welcomeDmEnabled?"translate-x-6":"translate-x-1"}`})})]}),l.welcomeDmEnabled&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 rounded-lg border border-yellow-200 dark:border-yellow-800",children:e.jsxs("p",{className:"text-sm text-yellow-800 dark:text-yellow-200 flex items-start gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),"WiadomoÅ›Ä‡ nie zostanie wysÅ‚ana jeÅ›li uÅ¼ytkownik ma wyÅ‚Ä…czone DM od czÅ‚onkÃ³w serwera."]})}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"WiadomoÅ›Ä‡ DM"}),e.jsx("div",{className:"relative",children:e.jsx("textarea",{ref:A,value:l.welcomeDmMessage,onChange:h=>i({...l,welcomeDmMessage:h.target.value}),className:"input min-h-[100px] resize-y",placeholder:"Witaj na serwerze {server}!"})})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-50 dark:bg-purple-900/20 text-purple-600 dark:text-purple-400",children:e.jsx(sa,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Auto-role"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Automatycznie przydzielaj role nowym czÅ‚onkom"})]})]}),e.jsx("button",{type:"button",onClick:()=>i({...l,autoRoleEnabled:!l.autoRoleEnabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l.autoRoleEnabled?"bg-purple-500":"bg-gray-300 dark:bg-dark-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-transform ${l.autoRoleEnabled?"translate-x-6":"translate-x-1"}`})})]}),l.autoRoleEnabled&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Role do przydzielenia"}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 p-3 bg-gray-50 dark:bg-dark-700/50 rounded-lg border border-gray-200 dark:border-dark-600",children:z.length===0?e.jsx("p",{className:"text-sm text-gray-400",children:"Brak dostÄ™pnych rÃ³l do przydzielenia. Bot musi mieÄ‡ wyÅ¼szÄ… rolÄ™."}):z.map(h=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:(l.autoRoleIds||[]).includes(h.id),onChange:()=>P(h.id),className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500"}),e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:h.color?`#${h.color.toString(16).padStart(6,"0")}`:"#99aab5"}}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:h.name})]},h.id))}),(l.autoRoleIds||[]).length>0&&e.jsxs("p",{className:"text-xs text-gray-500 mt-2",children:["Wybrano: ",(l.autoRoleIds||[]).map(h=>g(h)).join(", ")]})]}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(ke,{className:"inline w-3 h-3 mr-1"}),"OpÃ³Åºnienie (sekundy)"]}),e.jsx("input",{type:"number",min:"0",max:"300",value:l.autoRoleDelay,onChange:h=>i({...l,autoRoleDelay:parseInt(h.target.value)||0}),className:"input"})]})}),e.jsx(y,{enabled:l.autoRoleIgnoreBots,onChange:()=>i({...l,autoRoleIgnoreBots:!l.autoRoleIgnoreBots}),label:"Ignoruj boty",description:"Nie przydzielaj rÃ³l botom"})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-50 dark:bg-orange-900/20 text-orange-600 dark:text-orange-400",children:e.jsx(Ce,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Ochrona przed nowymi kontami"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Filtruj uÅ¼ytkownikÃ³w z mÅ‚odymi kontami"})]})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Minimalny wiek konta (dni)"}),e.jsx("input",{type:"number",min:"0",max:"365",value:l.minAccountAge,onChange:h=>i({...l,minAccountAge:parseInt(h.target.value)||0}),className:"input",placeholder:"0 = wyÅ‚Ä…czone"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Akcja"}),e.jsxs("select",{value:l.minAccountAgeAction,onChange:h=>i({...l,minAccountAgeAction:h.target.value}),className:"select",children:[e.jsx("option",{value:"none",children:"Brak (tylko ostrzeÅ¼enie)"}),e.jsx("option",{value:"notify",children:"Powiadom na kanale"}),e.jsx("option",{value:"kick",children:"WyrzuÄ‡ z serwera"})]})]})]}),l.minAccountAgeAction==="notify"&&e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"KanaÅ‚ powiadomieÅ„"}),e.jsxs("select",{value:l.minAccountAgeNotifyChannelId,onChange:h=>i({...l,minAccountAgeNotifyChannelId:h.target.value}),className:"select",children:[e.jsx("option",{value:"",children:"Wybierz kanaÅ‚..."}),(f||[]).filter(h=>h.type===0).map(h=>e.jsxs("option",{value:h.id,children:["#",h.name]},h.id))]})]}),l.minAccountAge>0&&e.jsx("div",{className:"bg-orange-50 dark:bg-orange-900/20 p-3 rounded-lg border border-orange-200 dark:border-orange-800",children:e.jsxs("p",{className:"text-sm text-orange-800 dark:text-orange-200 flex items-start gap-2",children:[e.jsx(He,{className:"w-4 h-4 mt-0.5 flex-shrink-0"}),"Konta mÅ‚odsze niÅ¼ ",l.minAccountAge," dni bÄ™dÄ… ",l.minAccountAgeAction==="kick"?"automatycznie wyrzucane":l.minAccountAgeAction==="notify"?"raportowane na kanaÅ‚":"oznaczane w wiadomoÅ›ci powitalnej","."]})})]})]})]}),t==="goodbye"&&e.jsx("div",{className:"space-y-6 animate-fade-in",children:e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400",children:e.jsx(Ua,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"WiadomoÅ›Ä‡ poÅ¼egnalna"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"WysyÅ‚ana gdy ktoÅ› opuÅ›ci serwer"})]})]}),e.jsx("button",{type:"button",onClick:()=>i({...l,goodbyeEnabled:!l.goodbyeEnabled}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${l.goodbyeEnabled?"bg-red-500":"bg-gray-300 dark:bg-dark-600"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white shadow-md transition-transform ${l.goodbyeEnabled?"translate-x-6":"translate-x-1"}`})})]}),l.goodbyeEnabled&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(me,{className:"inline w-3 h-3 mr-1"}),"KanaÅ‚"]}),e.jsxs("select",{value:l.goodbyeChannelId,onChange:h=>i({...l,goodbyeChannelId:h.target.value}),className:"select",children:[e.jsx("option",{value:"",children:"Wybierz kanaÅ‚..."}),(f||[]).filter(h=>h.type===0).map(h=>e.jsxs("option",{value:h.id,children:["#",h.name]},h.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"TytuÅ‚ embeda"}),e.jsx("input",{type:"text",value:l.goodbyeTitle,onChange:h=>i({...l,goodbyeTitle:h.target.value}),className:"input",placeholder:"Do widzenia!"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"WiadomoÅ›Ä‡"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{ref:I,value:l.goodbyeMessage,onChange:h=>i({...l,goodbyeMessage:h.target.value}),className:"input min-h-[100px] resize-y pr-10",placeholder:"{username} opuÅ›ciÅ‚ serwer."}),e.jsx("div",{className:"absolute right-2 top-2",children:e.jsx(Xe,{guildId:x,onSelect:h=>i({...l,goodbyeMessage:l.goodbyeMessage+h}),inputRef:I})})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:ua.slice(0,5).map(h=>e.jsx("button",{type:"button",onClick:()=>w(h.var,I),className:"text-xs bg-gray-100 dark:bg-dark-700 hover:bg-gray-200 dark:hover:bg-dark-600 px-2 py-1 rounded text-gray-600 dark:text-gray-400",children:h.var},h.var))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Footer (opcjonalny)"}),e.jsx("input",{type:"text",value:l.goodbyeFooter,onChange:h=>i({...l,goodbyeFooter:h.target.value}),className:"input",placeholder:"np. Mamy nadziejÄ™, Å¼e wrÃ³cisz!"})]}),e.jsx(b,{value:l.goodbyeColor,onChange:h=>i({...l,goodbyeColor:h}),label:"Kolor embeda"}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(ta,{className:"inline w-3 h-3 mr-1"}),"TÅ‚o obrazka"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"file",accept:"image/*",onChange:h=>U(h,"goodbye"),className:`flex-1 block text-sm text-gray-500 dark:text-gray-400\r
                            file:mr-4 file:py-2 file:px-4 file:rounded-lg file:border-0\r
                            file:text-sm file:font-medium file:bg-red-50 dark:file:bg-red-900/20\r
                            file:text-red-700 dark:file:text-red-300 hover:file:bg-red-100\r
                            file:cursor-pointer file:transition-colors`}),l.goodbyeImage&&e.jsx("button",{type:"button",onClick:()=>i({...l,goodbyeImage:""}),className:"px-3 py-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg",children:e.jsx(pe,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:[e.jsx(y,{enabled:l.goodbyeThumbnail,onChange:()=>i({...l,goodbyeThumbnail:!l.goodbyeThumbnail}),label:"PokaÅ¼ avatar",description:"WyÅ›wietl avatar uÅ¼ytkownika"}),e.jsx(y,{enabled:l.goodbyeShowRoles,onChange:()=>i({...l,goodbyeShowRoles:!l.goodbyeShowRoles}),label:"PokaÅ¼ role",description:"WyÅ›wietl role uÅ¼ytkownika"}),e.jsx(y,{enabled:l.goodbyeShowJoinDate,onChange:()=>i({...l,goodbyeShowJoinDate:!l.goodbyeShowJoinDate}),label:"PokaÅ¼ czas na serwerze",description:"Ile czasu byÅ‚ na serwerze"}),e.jsx(y,{enabled:l.goodbyeIgnoreBots,onChange:()=>i({...l,goodbyeIgnoreBots:!l.goodbyeIgnoreBots}),label:"Ignoruj boty",description:"Nie Å¼egnaj botÃ³w"})]})]})]})}),e.jsx("button",{type:"submit",disabled:j,className:"btn-primary w-full",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Zapisywanie..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4"}),"Zapisz zmiany"]})})]})}),e.jsx("div",{className:"w-full xl:w-96 space-y-6",children:e.jsxs("div",{className:"sticky top-6 space-y-6",children:[t==="welcome"&&l.welcomeEnabled&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"PodglÄ…d wiadomoÅ›ci powitalnej"}),e.jsx(Je,{message:l.welcomeMessage,image:l.welcomeImage,titleText:l.welcomeTitle,channelName:E(l.welcomeChannelId),color:l.welcomeColor,footer:l.welcomeFooter,showThumbnail:l.welcomeThumbnail,pingUser:l.welcomePingUser})]}),t==="goodbye"&&l.goodbyeEnabled&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:"PodglÄ…d wiadomoÅ›ci poÅ¼egnalnej"}),e.jsx(Je,{message:l.goodbyeMessage,image:l.goodbyeImage,titleText:l.goodbyeTitle,channelName:E(l.goodbyeChannelId),color:l.goodbyeColor,footer:l.goodbyeFooter,showThumbnail:l.goodbyeThumbnail})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-800 rounded-xl p-4 border border-gray-200 dark:border-dark-700",children:[e.jsxs("h4",{className:"font-medium text-gray-900 dark:text-white mb-2 flex items-center gap-2",children:[e.jsx(Ve,{className:"w-4 h-4 text-blue-500"}),"WskazÃ³wki"]}),e.jsxs("ul",{className:"text-xs text-gray-600 dark:text-gray-400 space-y-1",children:[e.jsxs("li",{children:["â€¢ UÅ¼yj zmiennych jak ",e.jsx("code",{className:"bg-gray-200 dark:bg-dark-700 px-1 rounded",children:"{user}"})," aby personalizowaÄ‡ wiadomoÅ›ci"]}),e.jsx("li",{children:"â€¢ Obrazek tÅ‚a powinien mieÄ‡ proporcje ~3:1"}),e.jsx("li",{children:"â€¢ OpÃ³Åºnienie przydatne gdy bot musi poczekaÄ‡ na weryfikacjÄ™"}),e.jsx("li",{children:"â€¢ Auto-role wymaga odpowiednich uprawnieÅ„ bota"})]})]})]})})]})}function ze({enabled:x,onChange:f,label:a,description:o}){return e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:a}),o&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:o})]}),e.jsx("button",{type:"button",onClick:()=>f(!x),className:`
          relative inline-flex h-6 w-11 items-center rounded-full
          transition-colors duration-200
          focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-dark-800
          ${x?"bg-primary-500":"bg-gray-300 dark:bg-dark-600"}
        `,role:"switch","aria-checked":x,children:e.jsx("span",{className:`
            inline-block h-4 w-4 transform rounded-full bg-white shadow-md
            transition-transform duration-200
            ${x?"translate-x-6":"translate-x-1"}
          `})})]})}function Rs({guildId:x,initialSettings:f,setMessage:a,onSave:o}){const{t:m}=ge(),[L,G]=u.useState(!1),[j,v]=u.useState({enabled:!1,blockLinks:!1,blockDiscordInvites:!1,bannedWords:"",antiSpamDuplicate:!1,duplicateTimeWindow:30,duplicateMaxCount:3,antiSpamFlood:!1,floodTimeWindow:5,floodMaxMessages:5,antiCaps:!1,capsPercentage:70,capsMinLength:10,antiEmoji:!1,maxEmojis:10,antiMention:!1,maxMentions:5,blockEveryoneHere:!0,violationDecayHours:24,escalation:{enabled:!1,warn:1,mute1h:2,mute24h:3,kick:4,ban:5}});u.useEffect(()=>{var d,t,C,T,A,I;if(f&&f.automod){const l=f.automod;v({enabled:l.enabled||!1,blockLinks:l.blockLinks||!1,blockDiscordInvites:l.blockDiscordInvites||!1,bannedWords:l.bannedWords?l.bannedWords.join(", "):"",antiSpamDuplicate:l.antiSpamDuplicate||!1,duplicateTimeWindow:l.duplicateTimeWindow?l.duplicateTimeWindow/1e3:30,duplicateMaxCount:l.duplicateMaxCount||3,antiSpamFlood:l.antiSpamFlood||!1,floodTimeWindow:l.floodTimeWindow?l.floodTimeWindow/1e3:5,floodMaxMessages:l.floodMaxMessages||5,antiCaps:l.antiCaps||!1,capsPercentage:l.capsPercentage||70,capsMinLength:l.capsMinLength||10,antiEmoji:l.antiEmoji||!1,maxEmojis:l.maxEmojis||10,antiMention:l.antiMention||!1,maxMentions:l.maxMentions||5,blockEveryoneHere:l.blockEveryoneHere!==!1,violationDecayHours:l.violationDecayHours||24,escalation:{enabled:((d=l.escalation)==null?void 0:d.enabled)||!1,warn:((t=l.escalation)==null?void 0:t.warn)||1,mute1h:((C=l.escalation)==null?void 0:C.mute1h)||2,mute24h:((T=l.escalation)==null?void 0:T.mute24h)||3,kick:((A=l.escalation)==null?void 0:A.kick)||4,ban:((I=l.escalation)==null?void 0:I.ban)||5}})}},[f]);const M=async d=>{var t,C;d.preventDefault(),G(!0);try{const T={enabled:j.enabled,blockLinks:j.blockLinks,blockDiscordInvites:j.blockDiscordInvites,bannedWords:j.bannedWords.split(",").map(A=>A.trim()).filter(A=>A.length>0),antiSpamDuplicate:j.antiSpamDuplicate,duplicateTimeWindow:j.duplicateTimeWindow*1e3,duplicateMaxCount:parseInt(j.duplicateMaxCount),antiSpamFlood:j.antiSpamFlood,floodTimeWindow:j.floodTimeWindow*1e3,floodMaxMessages:parseInt(j.floodMaxMessages),antiCaps:j.antiCaps,capsPercentage:parseInt(j.capsPercentage),capsMinLength:parseInt(j.capsMinLength),antiEmoji:j.antiEmoji,maxEmojis:parseInt(j.maxEmojis),antiMention:j.antiMention,maxMentions:parseInt(j.maxMentions),blockEveryoneHere:j.blockEveryoneHere,violationDecayHours:parseInt(j.violationDecayHours),escalation:{enabled:j.escalation.enabled,warn:parseInt(j.escalation.warn),mute1h:parseInt(j.escalation.mute1h),mute24h:parseInt(j.escalation.mute24h),kick:parseInt(j.escalation.kick),ban:parseInt(j.escalation.ban)}};await X.updateGuildSettings(x,{automod:T}),a({type:"success",text:m("dashboard.settingsSaved")}),o&&o()}catch(T){a({type:"error",text:((C=(t=T.response)==null?void 0:t.data)==null?void 0:C.message)||m("dashboard.settingsSaveFailed")})}finally{G(!1)}};return e.jsx("div",{className:"max-w-4xl",children:e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-50 dark:bg-red-900/20",children:e.jsx(Ce,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:m("automod.title")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:m("automod.description")})]})]}),e.jsx("button",{type:"button",onClick:()=>v({...j,enabled:!j.enabled}),className:`
                relative inline-flex h-8 w-14 items-center rounded-full
                transition-colors duration-200
                focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-dark-800
                ${j.enabled?"bg-green-500":"bg-gray-300 dark:bg-dark-600"}
              `,role:"switch","aria-checked":j.enabled,children:e.jsx("span",{className:`
                  inline-block h-6 w-6 transform rounded-full bg-white shadow-md
                  transition-transform duration-200
                  ${j.enabled?"translate-x-7":"translate-x-1"}
                `})})]})}),j.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary-50 dark:bg-primary-900/20",children:e.jsx(Ea,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:m("automod.linkFilters")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ze,{enabled:j.blockLinks,onChange:d=>v({...j,blockLinks:d}),label:m("automod.blockLinks"),description:m("automod.blockLinksDesc")}),e.jsx(ze,{enabled:j.blockDiscordInvites,onChange:d=>v({...j,blockDiscordInvites:d}),label:m("automod.blockDiscordInvites"),description:m("automod.blockDiscordInvitesDesc")})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-orange-50 dark:bg-orange-900/20",children:e.jsx(Kt,{className:"w-5 h-5 text-orange-600 dark:text-orange-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:m("automod.spamDetection")})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(ze,{enabled:j.antiSpamDuplicate,onChange:d=>v({...j,antiSpamDuplicate:d}),label:m("automod.antiDuplicate"),description:m("automod.antiDuplicateDesc")}),j.antiSpamDuplicate&&e.jsxs("div",{className:"mt-4 ml-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:m("automod.duplicateCount")}),e.jsx("input",{type:"number",min:"2",max:"10",value:j.duplicateMaxCount,onChange:d=>v({...j,duplicateMaxCount:d.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[m("automod.timeWindow")," (s)"]}),e.jsx("input",{type:"number",min:"5",max:"120",value:j.duplicateTimeWindow,onChange:d=>v({...j,duplicateTimeWindow:d.target.value}),className:"input"})]})]})]}),e.jsxs("div",{children:[e.jsx(ze,{enabled:j.antiSpamFlood,onChange:d=>v({...j,antiSpamFlood:d}),label:m("automod.antiFlood"),description:m("automod.antiFloodDesc")}),j.antiSpamFlood&&e.jsxs("div",{className:"mt-4 ml-4 grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:m("automod.floodMessages")}),e.jsx("input",{type:"number",min:"3",max:"20",value:j.floodMaxMessages,onChange:d=>v({...j,floodMaxMessages:d.target.value}),className:"input"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[m("automod.timeWindow")," (s)"]}),e.jsx("input",{type:"number",min:"1",max:"60",value:j.floodTimeWindow,onChange:d=>v({...j,floodTimeWindow:d.target.value}),className:"input"})]})]})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-50 dark:bg-purple-900/20",children:e.jsx(_t,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:m("automod.contentFilters")})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(ze,{enabled:j.antiCaps,onChange:d=>v({...j,antiCaps:d}),label:m("automod.antiCaps"),description:m("automod.antiCapsDesc")}),j.antiCaps&&e.jsxs("div",{className:"mt-4 ml-4",children:[e.jsxs("label",{className:"label",children:[m("automod.capsPercentage"),": ",j.capsPercentage,"%"]}),e.jsx("input",{type:"range",min:"50",max:"100",value:j.capsPercentage,onChange:d=>v({...j,capsPercentage:d.target.value}),className:"w-full h-2 bg-gray-200 dark:bg-dark-600 rounded-lg appearance-none cursor-pointer"})]})]}),e.jsxs("div",{children:[e.jsx(ze,{enabled:j.antiEmoji,onChange:d=>v({...j,antiEmoji:d}),label:m("automod.antiEmoji"),description:m("automod.antiEmojiDesc")}),j.antiEmoji&&e.jsxs("div",{className:"mt-4 ml-4",children:[e.jsxs("label",{className:"label",children:[m("automod.maxEmojis"),": ",j.maxEmojis]}),e.jsx("input",{type:"range",min:"5",max:"50",value:j.maxEmojis,onChange:d=>v({...j,maxEmojis:d.target.value}),className:"w-full h-2 bg-gray-200 dark:bg-dark-600 rounded-lg appearance-none cursor-pointer"})]})]}),e.jsxs("div",{children:[e.jsx(ze,{enabled:j.antiMention,onChange:d=>v({...j,antiMention:d}),label:m("automod.antiMention"),description:m("automod.antiMentionDesc")}),j.antiMention&&e.jsxs("div",{className:"mt-4 ml-4 space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[m("automod.maxMentions"),": ",j.maxMentions]}),e.jsx("input",{type:"range",min:"3",max:"20",value:j.maxMentions,onChange:d=>v({...j,maxMentions:d.target.value}),className:"w-full h-2 bg-gray-200 dark:bg-dark-600 rounded-lg appearance-none cursor-pointer"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"checkbox",id:"blockEveryoneHere",checked:j.blockEveryoneHere,onChange:d=>v({...j,blockEveryoneHere:d.target.checked}),className:"w-4 h-4 text-primary-600 bg-gray-100 dark:bg-dark-600 border-gray-300 dark:border-dark-500 rounded focus:ring-primary-500"}),e.jsx("label",{htmlFor:"blockEveryoneHere",className:"text-sm text-gray-700 dark:text-gray-300",children:m("automod.blockEveryoneHere")})]})]})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-50 dark:bg-amber-900/20",children:e.jsx(qt,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:m("automod.bannedWords")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:m("automod.wordList")}),e.jsx("textarea",{value:j.bannedWords,onChange:d=>v({...j,bannedWords:d.target.value}),className:"input min-h-[120px] resize-y",rows:"4",placeholder:m("automod.wordPlaceholder")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:m("automod.wordsOnList",{count:j.bannedWords.split(",").filter(d=>d.trim()).length})})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-red-50 dark:bg-red-900/20",children:e.jsx(He,{className:"w-5 h-5 text-red-600 dark:text-red-400"})}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:m("automod.escalation")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ze,{enabled:j.escalation.enabled,onChange:d=>v({...j,escalation:{...j.escalation,enabled:d}}),label:m("automod.escalationEnabled"),description:m("automod.escalationDesc")}),j.escalation.enabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:m("automod.violationDecay")}),e.jsx("input",{type:"number",min:"1",max:"168",value:j.violationDecayHours,onChange:d=>v({...j,violationDecayHours:d.target.value}),className:"input"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:m("automod.violationDecayDesc")})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:m("automod.warnAt")}),e.jsx("input",{type:"number",min:"1",max:"10",value:j.escalation.warn,onChange:d=>v({...j,escalation:{...j.escalation,warn:d.target.value}}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:m("automod.mute1hAt")}),e.jsx("input",{type:"number",min:"1",max:"10",value:j.escalation.mute1h,onChange:d=>v({...j,escalation:{...j.escalation,mute1h:d.target.value}}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:m("automod.mute24hAt")}),e.jsx("input",{type:"number",min:"1",max:"10",value:j.escalation.mute24h,onChange:d=>v({...j,escalation:{...j.escalation,mute24h:d.target.value}}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:m("automod.kickAt")}),e.jsx("input",{type:"number",min:"1",max:"10",value:j.escalation.kick,onChange:d=>v({...j,escalation:{...j.escalation,kick:d.target.value}}),className:"input"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:m("automod.banAt")}),e.jsx("input",{type:"number",min:"1",max:"10",value:j.escalation.ban,onChange:d=>v({...j,escalation:{...j.escalation,ban:d.target.value}}),className:"input"})]})]}),e.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-4",children:e.jsx("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:m("automod.escalationExample")})})]})]})]})]}),e.jsx("button",{type:"submit",disabled:L,className:"btn-danger w-full",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),m("dashboard.saving")]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4"}),m("automod.saveAutomod")]})})]})})}const pa=[{value:"Primary",label:"Blue",color:"bg-blue-500"},{value:"Secondary",label:"Gray",color:"bg-gray-500"},{value:"Success",label:"Green",color:"bg-green-500"},{value:"Danger",label:"Red",color:"bg-red-500"}],Ya=[{value:"normal",label:"Normal (Toggle)",description:"Users can add/remove roles freely"},{value:"single",label:"Single Select",description:"Users can only have ONE role from this panel"},{value:"verify",label:"Verify (One-time)",description:"Users get role once, cannot remove it"},{value:"limited",label:"Limited Multi",description:"Users can have up to X roles from panel"}],Ja=[{value:"minutes",label:"Minutes",multiplier:60},{value:"hours",label:"Hours",multiplier:3600},{value:"days",label:"Days",multiplier:86400}];function Is({guildId:x,channels:f,roles:a,initialPanels:o=[],setMessage:m,onUpdate:L}){const{t:G}=ge(),[j,v]=u.useState(!1),[M,d]=u.useState([]),[t,C]=u.useState(null),[T,A]=u.useState(!1),[I,l]=u.useState({}),i=u.useRef([]),U=u.useRef(null),N=u.useRef(null),E={mode:"new",interactionType:"reaction",messageId:"",channelId:"",title:"Role Selection",description:"React to get a role!",color:"#9333ea",panelMode:"normal",maxRoles:1,requiredRoles:[],forbiddenRoles:[],minAccountAge:0,minServerTime:0,dmNotification:!1,dmMessage:"You have been given the role: {role}",logChannel:"",roles:[{emoji:"",roleId:"",buttonLabel:"",buttonStyle:"Primary",description:"",tempDuration:0,tempUnit:"hours"}]},[g,z]=u.useState(E);u.useEffect(()=>{d(o||[])},[o]);const P=r=>{var k;return((k=(f||[]).find(F=>F.id===r))==null?void 0:k.name)||"unknown-channel"},w=r=>{var k;return((k=(a||[]).find(F=>F.id===r))==null?void 0:k.name)||"Unknown Role"},y=r=>{const k=(a||[]).find(F=>F.id===r);return k!=null&&k.color?`#${k.color.toString(16).padStart(6,"0")}`:"#99aab5"},b=()=>{z(E),C(null),A(!1)},S=r=>{C(r.id),z({mode:"existing",interactionType:r.interactionType||"reaction",messageId:r.messageId,channelId:r.channelId,title:r.title||"Role Selection",description:r.description||"",color:r.color||"#9333ea",panelMode:r.panelMode||"normal",maxRoles:r.maxRoles||1,requiredRoles:r.requiredRoles||[],forbiddenRoles:r.forbiddenRoles||[],minAccountAge:r.minAccountAge||0,minServerTime:r.minServerTime||0,dmNotification:r.dmNotification||!1,dmMessage:r.dmMessage||"You have been given the role: {role}",logChannel:r.logChannel||"",roles:r.roles.map(k=>({emoji:k.originalEmoji||k.emoji||"",roleId:k.roleId,buttonLabel:k.buttonLabel||"",buttonStyle:k.buttonStyle||"Primary",description:k.description||"",tempDuration:k.tempDuration||0,tempUnit:k.tempUnit||"hours"}))}),A(!0)},h=r=>{C(null),z({mode:"new",interactionType:r.interactionType||"reaction",messageId:"",channelId:r.channelId,title:`${r.title||"Role Selection"} (Copy)`,description:r.description||"",color:r.color||"#9333ea",panelMode:r.panelMode||"normal",maxRoles:r.maxRoles||1,requiredRoles:r.requiredRoles||[],forbiddenRoles:r.forbiddenRoles||[],minAccountAge:r.minAccountAge||0,minServerTime:r.minServerTime||0,dmNotification:r.dmNotification||!1,dmMessage:r.dmMessage||"You have been given the role: {role}",logChannel:r.logChannel||"",roles:r.roles.map(k=>({emoji:k.originalEmoji||k.emoji||"",roleId:k.roleId,buttonLabel:k.buttonLabel||"",buttonStyle:k.buttonStyle||"Primary",description:k.description||"",tempDuration:k.tempDuration||0,tempUnit:k.tempUnit||"hours"}))}),A(!0),m({type:"info",text:"Panel loaded for duplication. Make changes and create."})},W=async r=>{var k,F,ee,se;r.preventDefault(),v(!0);try{const ne=g.interactionType==="button";if(!g.channelId){m({type:"error",text:"Please select a channel"}),v(!1);return}if(ne){if(g.roles.some(c=>!c.buttonLabel||!c.roleId)){m({type:"error",text:"Please fill button label and role for all entries"}),v(!1);return}}else if(g.roles.some(c=>!c.emoji||!c.roleId)){m({type:"error",text:"Please fill emoji and role for all entries"}),v(!1);return}if(g.mode==="existing"&&!g.messageId&&!t){m({type:"error",text:"Message ID is required for existing mode"}),v(!1);return}const ie={channelId:g.channelId,mode:t?"update":g.mode,interactionType:g.interactionType,messageId:t||g.mode==="existing"?g.messageId:null,panelId:t||null,embed:g.mode==="new"||t?{title:g.title,description:g.description,color:parseInt(g.color.replace("#",""),16)}:null,panelMode:g.panelMode,maxRoles:g.panelMode==="limited"?g.maxRoles:null,requiredRoles:g.requiredRoles,forbiddenRoles:g.forbiddenRoles,minAccountAge:g.minAccountAge,minServerTime:g.minServerTime,dmNotification:g.dmNotification,dmMessage:g.dmMessage,logChannel:g.logChannel,roles:g.roles.map(c=>{var D;return{...c,buttonLabel:c.buttonLabel||w(c.roleId),tempDurationSeconds:c.tempDuration>0?c.tempDuration*(((D=Ja.find($=>$.value===c.tempUnit))==null?void 0:D.multiplier)||3600):0}})},he=await X.createReactionRole(x,ie),R=((F=(k=he==null?void 0:he.data)==null?void 0:k.data)==null?void 0:F.failedEmojis)||[];R.length>0?m({type:"warning",text:`Panel ${t?"updated":"created"}, but some emojis failed: ${R.join(", ")}`}):m({type:"success",text:t?"Panel Updated!":ne?"Button Role Panel Created!":"Reaction Role Panel Created!"}),b(),L&&L()}catch(ne){const ie=((se=(ee=ne.response)==null?void 0:ee.data)==null?void 0:se.message)||"Failed to create panel";m({type:"error",text:ie})}finally{v(!1)}},q=async r=>{var k,F,ee;if(window.confirm("Delete this panel? The Discord message will also be deleted (if created by bot) or bot reactions will be removed."))try{const se=await X.deleteReactionRole(x,r),ne=((k=se==null?void 0:se.data)==null?void 0:k.message)||"Panel deleted";m({type:"success",text:ne}),L&&L()}catch(se){const ne=((ee=(F=se.response)==null?void 0:F.data)==null?void 0:ee.message)||"Failed to delete panel";m({type:"error",text:ne})}},K=async r=>{try{await X.createReactionRole(x,{mode:"toggle",panelId:r.id,enabled:!r.enabled}),m({type:"success",text:`Panel ${r.enabled?"disabled":"enabled"}`}),L&&L()}catch{m({type:"error",text:"Failed to toggle panel"})}},te=()=>{z({...g,roles:[...g.roles,{emoji:"",roleId:"",buttonLabel:"",buttonStyle:"Primary",description:"",tempDuration:0,tempUnit:"hours"}]})},p=r=>{const k=[...g.roles];k.splice(r,1),z({...g,roles:k})},O=(r,k,F)=>{const ee=[...g.roles];ee[r][k]=F,z({...g,roles:ee})},Y=r=>{const k=g.requiredRoles||[];k.includes(r)?z({...g,requiredRoles:k.filter(F=>F!==r)}):z({...g,requiredRoles:[...k,r]})},J=r=>{const k=g.forbiddenRoles||[];k.includes(r)?z({...g,forbiddenRoles:k.filter(F=>F!==r)}):z({...g,forbiddenRoles:[...k,r]})},le=r=>{l(k=>({...k,[r]:!k[r]}))},_=g.interactionType==="button";return e.jsxs("div",{className:"flex flex-col xl:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("form",{onSubmit:W,className:"card p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(we,{className:"mr-2 text-purple-500"}),t?"Edit Panel":"Create Role Panel"]}),t&&e.jsxs("button",{type:"button",onClick:b,className:"text-sm text-gray-500 hover:text-gray-700 dark:hover:text-gray-300 flex items-center gap-1",children:[e.jsx(pe,{})," Cancel Edit"]})]}),e.jsxs("div",{className:"flex gap-4 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"interactionType",checked:g.interactionType==="reaction",onChange:()=>z({...g,interactionType:"reaction"}),className:"text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900 dark:text-blue-200",children:"Reactions (Emoji)"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"interactionType",checked:g.interactionType==="button",onChange:()=>z({...g,interactionType:"button"}),className:"text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-900 dark:text-blue-200",children:"Buttons"})]})]}),e.jsxs("div",{className:"bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800 p-4",children:[e.jsx("label",{className:"block text-sm font-medium text-purple-900 dark:text-purple-200 mb-2",children:"Panel Mode"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Ya.map(r=>e.jsxs("label",{className:`flex items-start gap-2 p-3 rounded-lg cursor-pointer border transition-colors ${g.panelMode===r.value?"bg-purple-100 dark:bg-purple-800/40 border-purple-400 dark:border-purple-600":"bg-white dark:bg-dark-700 border-gray-200 dark:border-dark-600 hover:border-purple-300"}`,children:[e.jsx("input",{type:"radio",name:"panelMode",checked:g.panelMode===r.value,onChange:()=>z({...g,panelMode:r.value}),className:"text-purple-600 mt-1"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white text-sm",children:r.label}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:r.description})]})]},r.value))}),g.panelMode==="limited"&&e.jsxs("div",{className:"mt-3",children:[e.jsx("label",{className:"text-sm text-purple-800 dark:text-purple-300",children:"Max roles per user:"}),e.jsx("input",{type:"number",min:"1",max:"25",value:g.maxRoles,onChange:r=>z({...g,maxRoles:parseInt(r.target.value)||1}),className:"ml-2 w-20 border border-purple-300 dark:border-purple-600 rounded p-1 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]}),!_&&!t&&e.jsxs("div",{className:"flex gap-4 p-4 bg-gray-50 dark:bg-dark-700 rounded-lg border border-gray-200 dark:border-dark-600",children:[e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"mode",checked:g.mode==="new",onChange:()=>z({...g,mode:"new"}),className:"text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Create New Message"})]}),e.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[e.jsx("input",{type:"radio",name:"mode",checked:g.mode==="existing",onChange:()=>z({...g,mode:"existing"}),className:"text-purple-600"}),e.jsx("span",{className:"font-medium text-gray-700 dark:text-gray-300",children:"Use Existing Message"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Channel"}),e.jsxs("select",{value:g.channelId,onChange:r=>z({...g,channelId:r.target.value}),className:"w-full border border-gray-300 dark:border-dark-600 rounded-lg p-2.5 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Channel..."}),f.filter(r=>r.type===0).map(r=>e.jsxs("option",{value:r.id,children:["#",r.name]},r.id))]})]}),!_&&g.mode==="existing"&&!t&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Message ID"}),e.jsxs("div",{className:"flex items-center relative",children:[e.jsx(Ea,{className:"absolute ml-3 text-gray-400 dark:text-gray-500"}),e.jsx("input",{type:"text",value:g.messageId,onChange:r=>z({...g,messageId:r.target.value}),className:"w-full border border-gray-300 dark:border-dark-600 rounded-lg p-2.5 pl-10 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"Enter the ID of the message to react to",required:!0})]})]}),(_||g.mode==="new"||t)&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Panel Title"}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx("input",{type:"text",value:g.title,onChange:r=>z({...g,title:r.target.value}),ref:N,className:"flex-1 border border-gray-300 dark:border-dark-600 rounded-lg p-2.5 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"}),e.jsx(Xe,{guildId:x,onSelect:r=>z({...g,title:g.title+r}),inputRef:N,position:"bottom"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Color"}),e.jsx("input",{type:"color",value:g.color,onChange:r=>z({...g,color:r.target.value}),className:"w-full h-11 border border-gray-300 dark:border-dark-600 rounded-lg p-1 bg-white dark:bg-dark-700"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Description"}),e.jsxs("div",{className:"relative",children:[e.jsx("textarea",{value:g.description,onChange:r=>z({...g,description:r.target.value}),ref:U,className:"w-full border border-gray-300 dark:border-dark-600 rounded-lg p-2.5 pr-10 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",rows:"3"}),e.jsx("div",{className:"absolute right-2 top-2",children:e.jsx(Xe,{guildId:x,onSelect:r=>z({...g,description:g.description+r}),inputRef:U,position:"bottom"})})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:_?"Buttons & Roles":"Emoji & Roles"}),g.roles.map((r,k)=>e.jsxs("div",{className:"border border-gray-200 dark:border-dark-600 rounded-lg p-3 bg-gray-50 dark:bg-dark-700 space-y-2",children:[e.jsxs("div",{className:"flex gap-2 items-center flex-wrap",children:[_?e.jsxs(e.Fragment,{children:[e.jsx("input",{type:"text",placeholder:"Button label",value:r.buttonLabel,onChange:F=>O(k,"buttonLabel",F.target.value),className:"w-36 border border-gray-300 dark:border-dark-600 rounded-lg p-2 bg-white dark:bg-dark-600 text-gray-900 dark:text-white",required:!0}),e.jsx("select",{value:r.buttonStyle,onChange:F=>O(k,"buttonStyle",F.target.value),className:"w-28 border border-gray-300 dark:border-dark-600 rounded-lg p-2 bg-white dark:bg-dark-600 text-gray-900 dark:text-white",children:pa.map(F=>e.jsx("option",{value:F.value,children:F.label},F.value))})]}):e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("input",{type:"text",placeholder:"Emoji",value:r.emoji,onChange:F=>O(k,"emoji",F.target.value),ref:F=>i.current[k]=F,className:"w-20 border border-gray-300 dark:border-dark-600 rounded-lg p-2 bg-white dark:bg-dark-600 text-gray-900 dark:text-white",required:!0}),e.jsx(Xe,{guildId:x,onSelect:F=>O(k,"emoji",F),inputRef:{current:i.current[k]},position:"bottom"})]}),e.jsxs("select",{value:r.roleId,onChange:F=>O(k,"roleId",F.target.value),className:"flex-1 border border-gray-300 dark:border-dark-600 rounded-lg p-2 bg-white dark:bg-dark-600 text-gray-900 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:"Select Role"}),(a||[]).filter(F=>F.name!=="@everyone").map(F=>e.jsx("option",{value:F.id,style:{color:F.color?`#${F.color.toString(16).padStart(6,"0")}`:"inherit"},children:F.name},F.id))]}),e.jsx("button",{type:"button",onClick:()=>p(k),className:"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 p-2 rounded",disabled:g.roles.length===1,children:e.jsx(de,{})})]}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("input",{type:"text",placeholder:"Role description (optional)",value:r.description,onChange:F=>O(k,"description",F.target.value),className:"flex-1 border border-gray-300 dark:border-dark-600 rounded p-1.5 text-sm bg-white dark:bg-dark-600 text-gray-900 dark:text-white"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ke,{className:"text-gray-400 text-sm"}),e.jsx("input",{type:"number",min:"0",placeholder:"0",value:r.tempDuration||"",onChange:F=>O(k,"tempDuration",parseInt(F.target.value)||0),className:"w-16 border border-gray-300 dark:border-dark-600 rounded p-1.5 text-sm bg-white dark:bg-dark-600 text-gray-900 dark:text-white",title:"Temporary role duration (0 = permanent)"}),e.jsx("select",{value:r.tempUnit,onChange:F=>O(k,"tempUnit",F.target.value),className:"border border-gray-300 dark:border-dark-600 rounded p-1.5 text-sm bg-white dark:bg-dark-600 text-gray-900 dark:text-white",children:Ja.map(F=>e.jsx("option",{value:F.value,children:F.label},F.value))})]})]})]},k)),e.jsxs("button",{type:"button",onClick:te,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center",children:[e.jsx(oe,{className:"mr-1"})," Add Role"]})]}),e.jsxs("button",{type:"button",onClick:()=>A(!T),className:"flex items-center gap-2 text-sm font-medium text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:[e.jsx(Me,{className:`transition-transform ${T?"rotate-90":""}`}),"Advanced Settings",T?e.jsx(ka,{}):e.jsx(We,{})]}),T&&e.jsxs("div",{className:"space-y-4 border-t border-gray-200 dark:border-dark-600 pt-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[e.jsx(Te,{className:"text-green-500"})," Required Roles (user must have)"]}),e.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg border border-green-200 dark:border-green-800 max-h-32 overflow-y-auto",children:(a||[]).filter(r=>r.name!=="@everyone").map(r=>e.jsx("button",{type:"button",onClick:()=>Y(r.id),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${(g.requiredRoles||[]).includes(r.id)?"bg-green-500 text-white":"bg-white dark:bg-dark-600 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-dark-500"}`,style:(g.requiredRoles||[]).includes(r.id)?{}:{borderLeftColor:y(r.id),borderLeftWidth:"3px"},children:r.name},r.id))})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2 flex items-center gap-2",children:[e.jsx(Te,{className:"text-red-500"})," Forbidden Roles (user must NOT have)"]}),e.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-red-50 dark:bg-red-900/20 rounded-lg border border-red-200 dark:border-red-800 max-h-32 overflow-y-auto",children:(a||[]).filter(r=>r.name!=="@everyone").map(r=>e.jsx("button",{type:"button",onClick:()=>J(r.id),className:`px-2 py-1 rounded text-xs font-medium transition-colors ${(g.forbiddenRoles||[]).includes(r.id)?"bg-red-500 text-white":"bg-white dark:bg-dark-600 text-gray-700 dark:text-gray-300 border border-gray-200 dark:border-dark-500"}`,style:(g.forbiddenRoles||[]).includes(r.id)?{}:{borderLeftColor:y(r.id),borderLeftWidth:"3px"},children:r.name},r.id))})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Min Account Age (days)"}),e.jsx("input",{type:"number",min:"0",value:g.minAccountAge,onChange:r=>z({...g,minAccountAge:parseInt(r.target.value)||0}),className:"w-full border border-gray-300 dark:border-dark-600 rounded-lg p-2.5 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Min Server Time (days)"}),e.jsx("input",{type:"number",min:"0",value:g.minServerTime,onChange:r=>z({...g,minServerTime:parseInt(r.target.value)||0}),className:"w-full border border-gray-300 dark:border-dark-600 rounded-lg p-2.5 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 rounded-lg border border-blue-200 dark:border-blue-800 p-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer mb-2",children:[e.jsx("input",{type:"checkbox",checked:g.dmNotification,onChange:r=>z({...g,dmNotification:r.target.checked}),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500"}),e.jsxs("span",{className:"font-medium text-blue-900 dark:text-blue-200 flex items-center gap-1",children:[e.jsx(ja,{})," Send DM when role assigned"]})]}),g.dmNotification&&e.jsxs("div",{children:[e.jsx("input",{type:"text",value:g.dmMessage,onChange:r=>z({...g,dmMessage:r.target.value}),className:"w-full border border-blue-300 dark:border-blue-600 rounded-lg p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white text-sm",placeholder:"DM message (use {role} for role name)"}),e.jsxs("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-1",children:["Variables: ","{role}",", ","{user}",", ","{server}"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Log Channel (optional)"}),e.jsxs("select",{value:g.logChannel,onChange:r=>z({...g,logChannel:r.target.value}),className:"w-full border border-gray-300 dark:border-dark-600 rounded-lg p-2.5 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"No logging"}),f.filter(r=>r.type===0).map(r=>e.jsxs("option",{value:r.id,children:["#",r.name]},r.id))]})]})]}),_&&g.roles.some(r=>r.buttonLabel)&&e.jsxs("div",{className:"p-4 bg-gray-100 dark:bg-dark-700 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Button Preview"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:g.roles.filter(r=>r.buttonLabel).map((r,k)=>{const F=pa.find(ee=>ee.value===r.buttonStyle)||pa[0];return e.jsx("span",{className:`${F.color} text-white px-4 py-2 rounded text-sm font-medium`,children:r.buttonLabel},k)})})]}),e.jsx("button",{type:"submit",disabled:j,className:"w-full bg-purple-600 hover:bg-purple-700 disabled:bg-purple-400 text-white font-bold py-2.5 rounded-lg flex items-center justify-center gap-2",children:j?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Processing..."]}):e.jsxs(e.Fragment,{children:[t?e.jsx(rt,{}):e.jsx(oe,{}),t?"Update Panel":_?"Create Button Panel":g.mode==="new"?"Create Panel":"Add Reactions"]})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4",children:["Active Panels (",M.length,")"]}),M.length===0?e.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm",children:"No role panels created yet."}):e.jsx("div",{className:"space-y-3",children:M.map((r,k)=>{var F,ee,se,ne,ie,he,R;return e.jsxs("div",{className:`border rounded-lg overflow-hidden transition-colors ${r.enabled===!1?"border-gray-300 dark:border-dark-500 bg-gray-100 dark:bg-dark-600 opacity-60":"border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700"}`,children:[e.jsxs("div",{className:"p-4 flex justify-between items-center cursor-pointer",onClick:()=>le(r.id),children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${r.interactionType==="button"?"bg-blue-100 dark:bg-blue-900 text-blue-800 dark:text-blue-200":"bg-purple-100 dark:bg-purple-900 text-purple-800 dark:text-purple-200"}`,children:r.interactionType==="button"?"Buttons":"Reactions"}),e.jsx("span",{className:`text-xs px-2 py-0.5 rounded ${r.panelMode==="single"?"bg-orange-100 dark:bg-orange-900 text-orange-800 dark:text-orange-200":r.panelMode==="verify"?"bg-green-100 dark:bg-green-900 text-green-800 dark:text-green-200":r.panelMode==="limited"?"bg-yellow-100 dark:bg-yellow-900 text-yellow-800 dark:text-yellow-200":"bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-300"}`,children:((F=Ya.find(c=>c.value===r.panelMode))==null?void 0:F.label)||"Normal"}),r.enabled===!1&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200",children:"Disabled"})]}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["#",P(r.channelId)]})]})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-gray-500",children:[((ee=r.roles)==null?void 0:ee.length)||0," roles"]}),I[r.id]?e.jsx(ka,{className:"text-gray-400"}):e.jsx(We,{className:"text-gray-400"})]})]}),I[r.id]&&e.jsxs("div",{className:"border-t border-gray-200 dark:border-dark-600 p-4 space-y-3",children:[e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Message ID: ",e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-1 rounded",children:r.messageId})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:(se=r.roles)==null?void 0:se.map((c,D)=>e.jsxs("div",{className:"flex items-center gap-2 text-xs bg-white dark:bg-dark-600 border border-gray-200 dark:border-dark-500 px-2 py-1 rounded",style:{borderLeftColor:y(c.roleId),borderLeftWidth:"3px"},children:[e.jsx("span",{children:r.interactionType==="button"?c.buttonLabel||"Button":c.originalEmoji||c.emoji}),e.jsx("span",{className:"text-gray-500",children:"â†’"}),e.jsx("span",{className:"font-medium",children:w(c.roleId)}),c.tempDurationSeconds>0&&e.jsxs("span",{className:"text-orange-500 flex items-center gap-0.5",children:[e.jsx(ke,{className:"text-[10px]"}),c.tempDurationSeconds<3600?`${Math.round(c.tempDurationSeconds/60)}m`:c.tempDurationSeconds<86400?`${Math.round(c.tempDurationSeconds/3600)}h`:`${Math.round(c.tempDurationSeconds/86400)}d`]})]},D))}),(((ne=r.requiredRoles)==null?void 0:ne.length)>0||((ie=r.forbiddenRoles)==null?void 0:ie.length)>0||r.minAccountAge>0||r.minServerTime>0)&&e.jsxs("div",{className:"text-xs text-gray-500 dark:text-gray-400 flex flex-wrap gap-3",children:[((he=r.requiredRoles)==null?void 0:he.length)>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Te,{className:"text-green-500"}),"Required: ",r.requiredRoles.map(c=>w(c)).join(", ")]}),((R=r.forbiddenRoles)==null?void 0:R.length)>0&&e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Te,{className:"text-red-500"}),"Forbidden: ",r.forbiddenRoles.map(c=>w(c)).join(", ")]}),r.minAccountAge>0&&e.jsxs("span",{children:["Account: ",r.minAccountAge,"+ days"]}),r.minServerTime>0&&e.jsxs("span",{children:["Server: ",r.minServerTime,"+ days"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 text-xs",children:[r.dmNotification&&e.jsxs("span",{className:"flex items-center gap-1 text-blue-600 dark:text-blue-400",children:[e.jsx(ja,{})," DM enabled"]}),r.logChannel&&e.jsxs("span",{className:"text-gray-500",children:["Logs: #",P(r.logChannel)]})]}),e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-gray-200 dark:border-dark-600",children:[e.jsxs("button",{onClick:c=>{c.stopPropagation(),K(r)},className:`flex items-center gap-1 px-3 py-1.5 rounded text-sm ${r.enabled===!1?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300 hover:bg-green-200":"bg-gray-100 dark:bg-dark-600 text-gray-700 dark:text-gray-300 hover:bg-gray-200"}`,children:[r.enabled===!1?e.jsx(Xt,{}):e.jsx(Ht,{}),r.enabled===!1?"Enable":"Disable"]}),e.jsxs("button",{onClick:c=>{c.stopPropagation(),S(r)},className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 hover:bg-blue-200",children:[e.jsx(Se,{})," Edit"]}),e.jsxs("button",{onClick:c=>{c.stopPropagation(),h(r)},className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 hover:bg-purple-200",children:[e.jsx(da,{})," Duplicate"]}),e.jsxs("button",{onClick:c=>{c.stopPropagation(),q(r.id)},className:"flex items-center gap-1 px-3 py-1.5 rounded text-sm bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 hover:bg-red-200",children:[e.jsx(de,{})," Delete"]})]})]})]},k)})})]})]}),(_||g.mode==="new"||t)&&e.jsx("div",{className:"w-full xl:w-96",children:e.jsxs("div",{className:"sticky top-6",children:[e.jsx("h3",{className:"font-bold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Panel Preview"}),e.jsx(Je,{channelName:P(g.channelId),embed:{title:g.title,description:g.description+(g.roles.some(r=>r.description)?`

`+g.roles.filter(r=>r.description&&r.roleId).map(r=>`${_?r.buttonLabel:r.emoji} - ${r.description}`).join(`
`):""),color:g.color,footer:g.panelMode!=="normal"?{text:g.panelMode==="single"?"You can only select one role":g.panelMode==="verify"?"One-time selection":g.panelMode==="limited"?`Max ${g.maxRoles} roles`:""}:null},buttons:_?g.roles.filter(r=>r.buttonLabel).map(r=>({label:r.buttonLabel,style:r.buttonStyle})):[]})]})})]})}function Es({guildId:x,channels:f,setMessage:a}){const{t:o}=ge(),[m,L]=u.useState(!1),[G,j]=u.useState(!1),[v,M]=u.useState(!1),[d,t]=u.useState({channelId:"",messageId:"",color:"#3b82f6",footer:"",useEmbed:!0,baseImage:"",sections:[{titleText:"",content:""}]}),C=E=>{var g;return((g=f.find(z=>z.id===E))==null?void 0:g.name)||"unknown-channel"},T=E=>{const g=E.target.files[0];if(g){const z=new FileReader;z.onloadend=()=>{t({...d,baseImage:z.result})},z.readAsDataURL(g)}},A=()=>{t({...d,sections:[...d.sections,{titleText:"",content:""}]})},I=E=>{const g=[...d.sections];g.splice(E,1),t({...d,sections:g})},l=(E,g,z)=>{const P=[...d.sections];P[E][g]=z,t({...d,sections:P})},i=async()=>{var E,g,z,P;if(!d.channelId||!d.messageId){a({type:"error",text:o("embedCreator.selectChannelAndId")});return}j(!0);try{const w=await X.fetchMessage(x,d.channelId,d.messageId),y=w.data.data||w.data,b=y.embeds||[],S=y.attachments||[];if(b.length>0){const h=[];let W=0;for(;W<b.length;){const p=b[W],O={titleText:"",content:"",loadedImageUrl:""};p.image&&p.image.url?(O.loadedImageUrl=p.image.url,O.titleText=p.title||"",W+1<b.length&&!((E=b[W+1].image)!=null&&E.url)?(O.content=b[W+1].description||"",W+=2):(O.content=p.description||"",W++)):(O.titleText=p.title||"",O.content=p.description||"",W++),h.push(O)}const q=((g=b[0])==null?void 0:g.color)||"#3b82f6",K=b[b.length-1],te=((z=K==null?void 0:K.footer)==null?void 0:z.text)||"";t(p=>({...p,color:q,footer:te,useEmbed:!0,sections:h.length>0?h:[{titleText:"",content:""}]})),M(!0),a({type:"success",text:o("embedCreator.messageLoaded")})}else y.content?(t(h=>({...h,useEmbed:!1,sections:[{titleText:"",content:y.content}]})),M(!0),a({type:"success",text:o("embedCreator.textMessageLoaded")})):a({type:"error",text:o("embedCreator.noEditableContent")})}catch(w){const y=((P=w.response)==null?void 0:P.status)===404?o("embedCreator.messageNotFound"):o("embedCreator.loadFailed");a({type:"error",text:y})}finally{j(!1)}},U=()=>{M(!1),t({channelId:d.channelId,messageId:"",color:"#3b82f6",footer:"",useEmbed:!0,baseImage:"",sections:[{titleText:"",content:""}]}),a({type:"success",text:o("embedCreator.editCancelled")})},N=async E=>{E.preventDefault(),L(!0);try{await X.sendEmbed(x,{channelId:d.channelId,messageId:d.messageId||null,baseImage:d.baseImage,sections:d.sections,useEmbed:d.useEmbed,embed:{color:parseInt(d.color.replace("#",""),16),footer:{text:d.footer}}}),a({type:"success",text:d.messageId?o("embedCreator.messageEdited"):o("embedCreator.messageSent")}),d.messageId||t({...d,sections:[{titleText:"",content:""}]}),v&&M(!1)}catch{a({type:"error",text:o("embedCreator.processFailed")})}finally{L(!1)}};return e.jsxs("div",{className:"flex flex-col xl:flex-row gap-6",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("form",{onSubmit:N,className:"card p-6 space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center mb-4",children:v?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"mr-2 text-yellow-500"})," ",o("embedCreator.editTitle")]}):e.jsxs(e.Fragment,{children:[e.jsx(ra,{className:"mr-2 text-blue-500"})," ",o("embedCreator.title")]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("embedCreator.destinationChannel")}),e.jsxs("select",{value:d.channelId,onChange:E=>t({...d,channelId:E.target.value}),className:"w-full border border-gray-300 dark:border-dark-600 rounded-lg p-2.5 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",required:!0,children:[e.jsx("option",{value:"",children:o("embedCreator.selectChannel")}),f.map(E=>e.jsxs("option",{value:E.id,children:["#",E.name]},E.id))]})]}),e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-700 p-4 rounded-lg border border-gray-200 dark:border-dark-600",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-1 flex items-center",children:[e.jsx(Se,{className:"mr-2 text-yellow-500"})," ",o("embedCreator.editExisting")]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-3",children:o("embedCreator.editExistingDesc")}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:d.messageId,onChange:E=>t({...d,messageId:E.target.value}),className:"flex-1 border border-gray-300 dark:border-dark-600 rounded-lg p-2.5 bg-white dark:bg-dark-600 text-gray-900 dark:text-white text-sm",placeholder:o("embedCreator.messageIdPlaceholder")}),e.jsx("button",{type:"button",onClick:i,disabled:G||!d.channelId||!d.messageId,className:"px-4 py-2.5 bg-yellow-500 hover:bg-yellow-600 disabled:bg-gray-400 disabled:cursor-not-allowed text-white font-bold rounded-lg flex items-center text-sm whitespace-nowrap",children:G?o("embedCreator.loading"):e.jsxs(e.Fragment,{children:[e.jsx(lt,{className:"mr-1"})," ",o("embedCreator.load")]})}),v&&e.jsxs("button",{type:"button",onClick:U,className:"px-4 py-2.5 bg-red-500 hover:bg-red-600 text-white font-bold rounded-lg flex items-center text-sm whitespace-nowrap",children:[e.jsx(pe,{className:"mr-1"})," ",o("embedCreator.cancel")]})]}),!d.channelId&&d.messageId&&e.jsx("p",{className:"text-xs text-yellow-500 mt-2",children:o("embedCreator.selectChannelFirst")})]}),v&&e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded-lg p-3",children:e.jsxs("p",{className:"text-sm text-yellow-700 dark:text-yellow-300 font-medium",children:[o("embedCreator.editingMessage")," ",e.jsx("code",{className:"bg-yellow-100 dark:bg-yellow-900/40 px-1.5 py-0.5 rounded text-xs",children:d.messageId})," â€” ",o("embedCreator.editingDesc")]})}),e.jsxs("div",{className:"flex items-center bg-gray-50 dark:bg-dark-700 p-4 rounded-lg border border-gray-200 dark:border-dark-600 justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-700 dark:text-gray-300",children:o("embedCreator.messageStyle")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:o("embedCreator.messageStyleDesc")})]}),e.jsx("button",{type:"button",onClick:()=>t({...d,useEmbed:!d.useEmbed}),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${d.useEmbed?"bg-blue-600":"bg-gray-300 dark:bg-dark-500"}`,children:e.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.useEmbed?"translate-x-6":"translate-x-1"}`})})]}),d.useEmbed&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("embedCreator.embedColor")}),e.jsx("input",{type:"color",value:d.color,onChange:E=>t({...d,color:E.target.value}),className:"w-full h-11 border border-gray-300 dark:border-dark-600 rounded-lg p-1 bg-white dark:bg-dark-700"})]}),e.jsxs("div",{className:"border border-dashed border-gray-300 dark:border-dark-600 rounded-lg p-4 bg-gray-50 dark:bg-dark-700 text-center",children:[e.jsxs("label",{className:"cursor-pointer block",children:[e.jsxs("div",{className:"text-gray-500 dark:text-gray-400 flex flex-col items-center",children:[e.jsx(ta,{className:"text-2xl mb-2"}),e.jsx("span",{className:"text-sm font-medium",children:o(v?"embedCreator.uploadImageEdit":"embedCreator.uploadImage")}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:o("embedCreator.imageOverlay")})]}),e.jsx("input",{type:"file",accept:"image/*",className:"hidden",onChange:T})]}),d.baseImage&&e.jsx("div",{className:"mt-2 text-xs text-green-600 dark:text-green-400 font-bold",children:o("embedCreator.newImageLoaded")}),v&&!d.baseImage&&d.sections.some(E=>E.loadedImageUrl)&&e.jsx("div",{className:"mt-2 text-xs text-blue-600 dark:text-blue-400 font-bold",children:o("embedCreator.currentImageReplace")})]}),v&&d.sections.some(E=>E.loadedImageUrl)&&!d.baseImage&&e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs font-bold text-blue-700 dark:text-blue-300 mb-2",children:o("embedCreator.currentImages")}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:d.sections.filter(E=>E.loadedImageUrl).map((E,g)=>e.jsx("img",{src:E.loadedImageUrl,alt:`Section ${g+1}`,className:"h-16 rounded border border-blue-300 dark:border-blue-700"},g))}),e.jsx("p",{className:"text-xs text-blue-600 dark:text-blue-400 mt-2",children:o("embedCreator.uploadToReplace")})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:o("embedCreator.messageSections")}),e.jsxs("button",{type:"button",onClick:A,className:"text-sm text-blue-600 dark:text-blue-400 flex items-center font-bold hover:underline",children:[e.jsx(oe,{className:"mr-1"})," ",o("embedCreator.addSection")]})]}),d.sections.map((E,g)=>e.jsxs("div",{className:"border border-gray-200 dark:border-dark-600 rounded-lg p-4 bg-gray-50 dark:bg-dark-700 relative group",children:[e.jsx("button",{type:"button",onClick:()=>I(g),className:"absolute top-2 right-2 text-red-400 hover:text-red-600 dark:text-red-500 dark:hover:text-red-400",children:e.jsx(de,{})}),e.jsxs("div",{className:"grid gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:o("embedCreator.imageHeaderText")}),e.jsx("input",{type:"text",value:E.titleText,onChange:z=>l(g,"titleText",z.target.value),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 text-sm mt-1 bg-white dark:bg-dark-600 text-gray-900 dark:text-white",placeholder:o("embedCreator.headerPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase",children:o("embedCreator.bodyContent")}),e.jsx("textarea",{value:E.content,onChange:z=>l(g,"content",z.target.value),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 text-sm mt-1 bg-white dark:bg-dark-600 text-gray-900 dark:text-white",rows:"3",placeholder:o("embedCreator.bodyPlaceholder")})]})]})]},g))]}),d.useEmbed&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:o("embedCreator.footerText")}),e.jsx("input",{type:"text",value:d.footer,onChange:E=>t({...d,footer:E.target.value}),className:"w-full border border-gray-300 dark:border-dark-600 rounded-lg p-2.5 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:o("embedCreator.footerPlaceholder")})]}),e.jsx("button",{type:"submit",disabled:m,className:`w-full ${v?"bg-yellow-500 hover:bg-yellow-600":"bg-blue-600 hover:bg-blue-700"} text-white font-bold py-2.5 rounded-lg flex justify-center items-center`,children:m?o("embedCreator.processing"):v?e.jsxs(e.Fragment,{children:[e.jsx(Se,{className:"mr-2"})," ",o("embedCreator.editMessage")]}):e.jsxs(e.Fragment,{children:[e.jsx(ra,{className:"mr-2"})," ",o("embedCreator.sendMessage")]})})]})}),e.jsx("div",{className:"w-full xl:w-96",children:e.jsxs("div",{className:"sticky top-6",children:[e.jsx("h3",{className:"font-bold text-gray-500 dark:text-gray-400 uppercase mb-2",children:o("embedCreator.livePreview")}),e.jsx(Je,{channelName:C(d.channelId),embed:{color:d.color,footer:d.footer},useEmbed:d.useEmbed,embedSections:d.sections.map(E=>({...E,image:d.baseImage||E.loadedImageUrl||""}))})]})})]})}const zs=()=>{const{t:x}=ge(),f=Sa(),{guildId:a}=at(),[o,m]=u.useState(!0),[L,G]=u.useState(!1),[j,v]=u.useState([]),[M,d]=u.useState([]),[t,C]=u.useState([]),[T,A]=u.useState({enabled:!1,ticketCategoryId:"",supportRoleIds:[],channelNamePattern:"ticket-{number}",logChannelId:"",panelChannelId:"",panelTitle:"Centrum Pomocy",panelDescription:"Kliknij przycisk ponizej aby otworzyc ticket.",categories:[],useCategorySelect:!1}),[I,l]=u.useState(!1),[i,U]=u.useState("single"),[N,E]=u.useState(!1),[g,z]=u.useState(null),[P,w]=u.useState({name:"",description:"",emoji:"",color:"#5865F2",categoryId:"",supportRoleIds:[]}),[y,b]=u.useState(null),[S,h]=u.useState(!1),[W,q]=u.useState(null),[K,te]=u.useState({id:"",label:"",style:"short",required:!0,placeholder:"",minLength:"",maxLength:""});u.useEffect(()=>{(async()=>{var D;try{m(!0);const $=await je.getConfig(a),n=await je.getChannels(a),B=await je.getRoles(a),ae=Array.isArray(n.data)?n.data:n.data.data||[],be=(D=B.data)==null?void 0:D.data,Ge=Array.isArray(be)?be:(be==null?void 0:be.roles)||[],H=$.data.data||$.data||{},ce=ae.filter(Pe=>Pe.type===4);v(ce);const Q=ae.filter(Pe=>Pe.type===0);d(Q);const fe=Ge.filter(Pe=>Pe.name!=="@everyone");C(fe),A({enabled:H.enabled??!1,ticketCategoryId:H.ticketCategoryId||"",supportRoleIds:H.supportRoleIds||[],channelNamePattern:H.channelNamePattern||"ticket-{number}",logChannelId:H.logChannelId||"",panelChannelId:H.panelChannelId||"",panelTitle:H.panelTitle||"Centrum Pomocy",panelDescription:H.panelDescription||"Kliknij przycisk ponizej aby otworzyc ticket.",categories:H.categories||[],useCategorySelect:H.useCategorySelect??!1})}catch{f.error("Nie udalo sie zaladowac konfiguracji ticketow.")}finally{m(!1)}})()},[a]);const p=c=>{const{name:D,value:$,type:n,checked:B}=c.target;A(ae=>({...ae,[D]:n==="checkbox"?B:$}))},O=c=>{A(D=>{const $=D.supportRoleIds.includes(c)?D.supportRoleIds.filter(n=>n!==c):[...D.supportRoleIds,c];return{...D,supportRoleIds:$}})},Y=async()=>{var c,D;G(!0);try{await je.updateConfig(a,T),f.success("Ustawienia ticketow zapisane!")}catch($){f.error(((D=(c=$.response)==null?void 0:c.data)==null?void 0:D.message)||"Nie udalo sie zapisac ustawien.")}finally{G(!1)}},J=async()=>{var c,D;if(!T.panelChannelId){f.error("Najpierw wybierz kanal dla panelu!");return}l(!0);try{await je.sendPanel(a,T.panelChannelId,i),f.success("Panel ticketow zostal wyslany!")}catch($){f.error(((D=(c=$.response)==null?void 0:c.data)==null?void 0:D.message)||"Nie udalo sie wyslac panelu.")}finally{l(!1)}},le=()=>{z(null),w({name:"",description:"",emoji:"",color:"#5865F2",categoryId:"",supportRoleIds:[]}),E(!0)},_=c=>{z(c),w({name:c.name||"",description:c.description||"",emoji:c.emoji||"",color:c.color||"#5865F2",categoryId:c.categoryId||"",supportRoleIds:c.supportRoleIds||[]}),E(!0)},r=c=>{const{name:D,value:$}=c.target;w(n=>({...n,[D]:$}))},k=c=>{w(D=>{const $=D.supportRoleIds.includes(c)?D.supportRoleIds.filter(n=>n!==c):[...D.supportRoleIds,c];return{...D,supportRoleIds:$}})},F=async()=>{var c,D;if(!P.name.trim()){f.error("Nazwa kategorii jest wymagana!");return}try{if(g)await je.updateCategory(a,g.id,P),A($=>({...$,categories:$.categories.map(n=>n.id===g.id?{...n,...P}:n)})),f.success("Kategoria zaktualizowana!");else{const $=await je.addCategory(a,P),n=$.data.data||$.data;A(B=>({...B,categories:[...B.categories,n]})),f.success("Kategoria dodana!")}E(!1)}catch($){f.error(((D=(c=$.response)==null?void 0:c.data)==null?void 0:D.message)||"Nie udalo sie zapisac kategorii.")}},ee=async c=>{var D,$;if(confirm("Czy na pewno chcesz usunac te kategorie?"))try{await je.deleteCategory(a,c),A(n=>({...n,categories:n.categories.filter(B=>B.id!==c)})),f.success("Kategoria usunieta!")}catch(n){f.error((($=(D=n.response)==null?void 0:D.data)==null?void 0:$.message)||"Nie udalo sie usunac kategorii.")}},se=async c=>{var D;try{const $=!((D=c.form)!=null&&D.enabled);await je.updateCategoryForm(a,c.id,{enabled:$}),A(n=>({...n,categories:n.categories.map(B=>B.id===c.id?{...B,form:{...B.form,enabled:$}}:B)})),f.success($?"Formularz wlaczony!":"Formularz wylaczony!")}catch{f.error("Nie udalo sie zaktualizowac formularza.")}},ne=c=>{q(c),te({id:"",label:"",style:"short",required:!0,placeholder:"",minLength:"",maxLength:""}),h(!0)},ie=c=>{const{name:D,value:$,type:n,checked:B}=c.target;te(ae=>({...ae,[D]:n==="checkbox"?B:$}))},he=async()=>{var c,D;if(!K.id.trim()||!K.label.trim()){f.error("ID i etykieta pola sa wymagane!");return}try{const $={id:K.id.toLowerCase().replace(/[^a-z0-9_]/g,"_"),label:K.label,style:K.style,required:K.required,placeholder:K.placeholder||null,minLength:K.minLength?parseInt(K.minLength):null,maxLength:K.maxLength?parseInt(K.maxLength):null};await je.addFormField(a,W.id,$),A(n=>({...n,categories:n.categories.map(B=>{var ae;return B.id===W.id?{...B,form:{...B.form,fields:[...((ae=B.form)==null?void 0:ae.fields)||[],$]}}:B})})),f.success("Pole dodane!"),h(!1)}catch($){f.error(((D=(c=$.response)==null?void 0:c.data)==null?void 0:D.message)||"Nie udalo sie dodac pola.")}},R=async(c,D)=>{try{await je.deleteFormField(a,c.id,D),A($=>({...$,categories:$.categories.map(n=>n.id===c.id?{...n,form:{...n.form,fields:n.form.fields.filter(B=>B.id!==D)}}:n)})),f.success("Pole usuniete!")}catch{f.error("Nie udalo sie usunac pola.")}};return o?e.jsx("div",{className:"flex items-center justify-center min-h-[300px]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-10 h-10 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Ladowanie modulu ticketow..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-primary-50 dark:bg-primary-900/20",children:e.jsx(nt,{className:"w-5 h-5 text-primary-600 dark:text-primary-400"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"System Ticketow"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Skonfiguruj automatyczny system wsparcia"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`text-sm font-semibold ${T.enabled?"text-green-600 dark:text-green-400":"text-gray-500 dark:text-gray-400"}`,children:T.enabled?"WLACZONY":"WYLACZONY"}),e.jsx("button",{type:"button",onClick:()=>A({...T,enabled:!T.enabled}),className:`
                relative inline-flex h-6 w-11 items-center rounded-full
                transition-colors duration-200
                focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-dark-800
                ${T.enabled?"bg-green-500":"bg-gray-300 dark:bg-dark-600"}
              `,role:"switch","aria-checked":T.enabled,children:e.jsx("span",{className:`
                  inline-block h-4 w-4 transform rounded-full bg-white shadow-md
                  transition-transform duration-200
                  ${T.enabled?"translate-x-6":"translate-x-1"}
                `})})]})]})}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(fa,{className:"w-4 h-4 text-purple-500"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Kategorie Ticketow"})]}),e.jsxs("button",{onClick:le,className:"btn-primary text-sm py-1.5 px-3",children:[e.jsx(oe,{className:"w-3 h-3"}),"Dodaj Kategorie"]})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-4",children:"Kategorie pozwalaja uzytkownikam wybrac typ zgloszenia. Kazda kategoria moze miec wlasny formularz."}),T.categories.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-400 dark:text-gray-500",children:[e.jsx(fa,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"Brak kategorii. Dodaj pierwsza kategorie aby wlaczyc wybor typu zgloszenia."})]}):e.jsx("div",{className:"space-y-3",children:T.categories.map(c=>{var D,$,n,B,ae,be,Ge,H,ce,Q;return e.jsxs("div",{className:"border border-gray-200 dark:border-dark-600 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-700/50",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl",children:c.emoji||"ðŸ“¨"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-gray-900 dark:text-white",children:c.name}),c.description&&e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:c.description})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>b(y===c.id?null:c.id),className:"p-2 text-gray-400 hover:text-primary-500 transition-colors",title:"Pokaz formularz",children:e.jsx(Zt,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>_(c),className:"p-2 text-gray-400 hover:text-blue-500 transition-colors",title:"Edytuj",children:e.jsx(Se,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>ee(c.id),className:"p-2 text-gray-400 hover:text-red-500 transition-colors",title:"Usun",children:e.jsx(de,{className:"w-4 h-4"})})]})]}),y===c.id&&e.jsxs("div",{className:"p-4 border-t border-gray-200 dark:border-dark-600",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Formularz:"}),e.jsx("button",{onClick:()=>se(c),className:`
                            relative inline-flex h-5 w-9 items-center rounded-full
                            transition-colors duration-200
                            ${(D=c.form)!=null&&D.enabled?"bg-green-500":"bg-gray-300 dark:bg-dark-600"}
                          `,children:e.jsx("span",{className:`
                              inline-block h-3 w-3 transform rounded-full bg-white shadow
                              transition-transform duration-200
                              ${($=c.form)!=null&&$.enabled?"translate-x-5":"translate-x-1"}
                            `})}),e.jsx("span",{className:"text-xs text-gray-500",children:(n=c.form)!=null&&n.enabled?"Wlaczony":"Wylaczony"})]}),((B=c.form)==null?void 0:B.enabled)&&(((be=(ae=c.form)==null?void 0:ae.fields)==null?void 0:be.length)||0)<5&&e.jsxs("button",{onClick:()=>ne(c),className:"text-sm text-primary-600 hover:text-primary-700 flex items-center gap-1",children:[e.jsx(oe,{className:"w-3 h-3"}),"Dodaj pole"]})]}),((Ge=c.form)==null?void 0:Ge.enabled)&&e.jsxs("div",{className:"space-y-2",children:[!((H=c.form)!=null&&H.fields)||c.form.fields.length===0?e.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"Brak pol formularza. Dodaj pola aby zbierac informacje od uzytkownikow."}):c.form.fields.map(fe=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-100 dark:bg-dark-600 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Yt,{className:"w-3 h-3 text-gray-400"}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:fe.label}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-gray-500",children:[e.jsx("span",{className:"px-1.5 py-0.5 bg-gray-200 dark:bg-dark-500 rounded",children:fe.style==="short"?"Krotki tekst":"Paragraf"}),fe.required&&e.jsx("span",{className:"text-red-500",children:"Wymagane"})]})]})]}),e.jsx("button",{onClick:()=>R(c,fe.id),className:"p-1.5 text-gray-400 hover:text-red-500 transition-colors",children:e.jsx(de,{className:"w-3 h-3"})})]},fe.id)),((Q=(ce=c.form)==null?void 0:ce.fields)==null?void 0:Q.length)>=5&&e.jsx("p",{className:"text-xs text-amber-600 text-center",children:"Osiagnieto limit 5 pol (maksimum Discord)"})]})]})]},c.id)})})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Me,{className:"w-4 h-4 text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Ustawienia Ogolne"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Kategoria Ticketow (Discord)"}),e.jsxs("select",{name:"ticketCategoryId",value:T.ticketCategoryId,onChange:p,className:"select",children:[e.jsx("option",{value:"",children:"Wybierz kategorie..."}),j.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Nowe kanaly ticketow beda tworzone tutaj"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Wzor Nazwy Kanalu"}),e.jsx("input",{type:"text",name:"channelNamePattern",value:T.channelNamePattern,onChange:p,className:"input font-mono",placeholder:"ticket-{number}"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Uzyj ","{number}",", ","{username}"," lub ","{category}"," jako zmiennych"]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(me,{className:"inline w-3 h-3 mr-1"}),"Kanal Logow"]}),e.jsxs("select",{name:"logChannelId",value:T.logChannelId,onChange:p,className:"select",children:[e.jsx("option",{value:"",children:"Wybierz kanal..."}),M.map(c=>e.jsxs("option",{value:c.id,children:["#",c.name]},c.id))]})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(la,{className:"w-4 h-4 text-gray-400"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Role Wsparcia (Domyslne)"})]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-3",children:"Te role beda mialy dostep do wszystkich ticketow (mozna nadpisac per kategoria)"}),e.jsx("div",{className:"max-h-48 overflow-y-auto space-y-2 p-3 bg-gray-50 dark:bg-dark-700/50 rounded-lg border border-gray-200 dark:border-dark-600",children:t.length===0?e.jsx("p",{className:"text-sm text-gray-400",children:"Brak dostepnych rol"}):t.map(c=>e.jsxs("label",{className:"flex items-center gap-3 p-2 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:T.supportRoleIds.includes(c.id),onChange:()=>O(c.id),className:"w-4 h-4 rounded text-primary-600 focus:ring-primary-500 border-gray-300 dark:border-dark-500"}),e.jsx("span",{className:"text-sm font-medium",style:{color:c.color?`#${c.color.toString(16).padStart(6,"0")}`:void 0},children:c.name})]},c.id))})]})]}),e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Jt,{className:"w-4 h-4 text-purple-500"}),e.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white",children:"Wyglad Panelu"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Tytul Panelu"}),e.jsx("input",{type:"text",name:"panelTitle",value:T.panelTitle,onChange:p,className:"input",placeholder:"Centrum Pomocy"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Opis Panelu"}),e.jsx("textarea",{name:"panelDescription",value:T.panelDescription,onChange:p,rows:"4",className:"input resize-y min-h-[100px]",placeholder:"Kliknij przycisk ponizej aby otworzyc ticket..."})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-dark-700",children:[e.jsx("label",{className:"label",children:"Tryb Panelu"}),e.jsxs("select",{value:i,onChange:c=>U(c.target.value),className:"select",children:[e.jsx("option",{value:"single",children:"Jeden przycisk (wybor kategorii po kliknieciu)"}),e.jsx("option",{value:"buttons",children:"Osobny przycisk dla kazdej kategorii"}),e.jsx("option",{value:"select",children:"Lista rozwijana (select menu)"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:T.categories.length===0?"Dodaj kategorie aby wlaczyc tryby z wieloma opcjami":`${T.categories.length} kategorii dostepnych`})]}),e.jsxs("div",{className:"pt-4 border-t border-gray-200 dark:border-dark-700",children:[e.jsxs("label",{className:"label",children:[e.jsx(me,{className:"inline w-3 h-3 mr-1"}),"Kanal Panelu"]}),e.jsxs("select",{name:"panelChannelId",value:T.panelChannelId,onChange:p,className:"select",children:[e.jsx("option",{value:"",children:"Wybierz kanal..."}),M.map(c=>e.jsxs("option",{value:c.id,children:["#",c.name]},c.id))]})]})]})]})})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-end gap-3",children:[e.jsx("button",{onClick:J,disabled:I||!T.panelChannelId,className:`btn-secondary ${(!T.panelChannelId||I)&&"opacity-50 cursor-not-allowed"}`,children:I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin"}),"Wysylanie..."]}):e.jsxs(e.Fragment,{children:[e.jsx(ra,{className:"w-4 h-4"}),"Wyslij Panel"]})}),e.jsx("button",{onClick:Y,disabled:L,className:"btn-primary",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Zapisywanie..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4"}),"Zapisz Konfiguracje"]})})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-dark-700",children:e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:g?"Edytuj Kategorie":"Dodaj Kategorie"})}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Nazwa *"}),e.jsx("input",{type:"text",name:"name",value:P.name,onChange:r,className:"input",placeholder:"np. Support, Report, Aplikacja"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Opis"}),e.jsx("input",{type:"text",name:"description",value:P.description,onChange:r,className:"input",placeholder:"Krotki opis kategorii"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Emoji"}),e.jsx("input",{type:"text",name:"emoji",value:P.emoji,onChange:r,className:"input",placeholder:"np. lub :custom:"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Kolor"}),e.jsx("input",{type:"color",name:"color",value:P.color,onChange:r,className:"input h-10 p-1"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Kategoria Discord (opcjonalnie)"}),e.jsxs("select",{name:"categoryId",value:P.categoryId,onChange:r,className:"select",children:[e.jsx("option",{value:"",children:"Uzyj domyslnej"}),j.map(c=>e.jsx("option",{value:c.id,children:c.name},c.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Role wsparcia (opcjonalnie)"}),e.jsx("div",{className:"max-h-32 overflow-y-auto space-y-1 p-2 bg-gray-50 dark:bg-dark-700/50 rounded-lg border border-gray-200 dark:border-dark-600",children:t.slice(0,10).map(c=>e.jsxs("label",{className:"flex items-center gap-2 p-1.5 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-dark-600",children:[e.jsx("input",{type:"checkbox",checked:P.supportRoleIds.includes(c.id),onChange:()=>k(c.id),className:"w-3.5 h-3.5 rounded text-primary-600"}),e.jsx("span",{className:"text-sm",style:{color:c.color?`#${c.color.toString(16).padStart(6,"0")}`:void 0},children:c.name})]},c.id))}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Pozostaw puste aby uzyc domyslnych"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-dark-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>E(!1),className:"btn-secondary",children:"Anuluj"}),e.jsx("button",{onClick:F,className:"btn-primary",children:g?"Zapisz":"Dodaj"})]})]})}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-xl shadow-xl max-w-md w-full",children:[e.jsxs("div",{className:"p-6 border-b border-gray-200 dark:border-dark-700",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Dodaj Pole Formularza"}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Kategoria: ",W==null?void 0:W.name]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"ID Pola *"}),e.jsx("input",{type:"text",name:"id",value:K.id,onChange:ie,className:"input font-mono",placeholder:"np. temat, opis, nick"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Unikalne ID (male litery, bez spacji)"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Etykieta *"}),e.jsx("input",{type:"text",name:"label",value:K.label,onChange:ie,className:"input",placeholder:"np. Temat zgloszenia"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Typ pola"}),e.jsxs("select",{name:"style",value:K.style,onChange:ie,className:"select",children:[e.jsx("option",{value:"short",children:"Krotki tekst (1 linia)"}),e.jsx("option",{value:"paragraph",children:"Paragraf (wiele linii)"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Placeholder"}),e.jsx("input",{type:"text",name:"placeholder",value:K.placeholder,onChange:ie,className:"input",placeholder:"Tekst podpowiedzi..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Min. dlugosc"}),e.jsx("input",{type:"number",name:"minLength",value:K.minLength,onChange:ie,className:"input",min:"0",max:"4000"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:"Max. dlugosc"}),e.jsx("input",{type:"number",name:"maxLength",value:K.maxLength,onChange:ie,className:"input",min:"1",max:"4000"})]})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",name:"required",checked:K.required,onChange:ie,className:"w-4 h-4 rounded text-primary-600"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Pole wymagane"})]})]}),e.jsxs("div",{className:"p-6 border-t border-gray-200 dark:border-dark-700 flex justify-end gap-3",children:[e.jsx("button",{onClick:()=>h(!1),className:"btn-secondary",children:"Anuluj"}),e.jsx("button",{onClick:he,className:"btn-primary",children:"Dodaj Pole"})]})]})})]})};function Ts({guildId:x,setMessage:f}){const{t:a}=ge(),[o,m]=u.useState([]),[L,G]=u.useState([]),[j,v]=u.useState(!0),[M,d]=u.useState(!1),[t,C]=u.useState(null),[T,A]=u.useState(!1),[I,l]=u.useState({commandName:"",response:"",embedEnabled:!1,embedTitle:"",embedColor:"#5865F2",embedImage:"",aliases:"",allowedRoles:[],isAutoResponse:!1});u.useEffect(()=>{i(),U()},[x]);const i=async()=>{try{v(!0);const b=await aa.getCommands(x),S=Array.isArray(b.data)?b.data:b.data.data||[];m(S)}catch{f({type:"error",text:a("customCommands.fetchError")||"Failed to load commands"})}finally{v(!1)}},U=async()=>{var b;try{const S=await X.getGuildRoles(x),W=(((b=S.data)==null?void 0:b.data)||S.data||[]).filter(q=>q.name!=="@everyone"&&!q.managed);G(W)}catch{}},N=async b=>{var S,h;b.preventDefault(),d(!0);try{if(!I.commandName||!I.response){f({type:"error",text:a("customCommands.requiredFields")||"Command name and response are required"}),d(!1);return}const W=I.aliases?I.aliases.split(",").map(K=>K.trim()).filter(K=>K):[],q={...I,aliases:W};t?(await aa.updateCommand(x,t,q),f({type:"success",text:a("customCommands.updated")||"Command updated!"})):(await aa.createCommand(x,q),f({type:"success",text:a("customCommands.created")||"Command created!"})),z(),i()}catch(W){f({type:"error",text:((h=(S=W.response)==null?void 0:S.data)==null?void 0:h.message)||"Failed to save command"})}finally{d(!1)}},E=b=>{C(b.id),l({commandName:b.commandName,response:b.response,embedEnabled:b.embedEnabled||!1,embedTitle:b.embedTitle||"",embedColor:b.embedColor||"#5865F2",embedImage:b.embedImage||"",aliases:(b.aliases||[]).join(", "),allowedRoles:b.allowedRoles||[],isAutoResponse:b.isAutoResponse||!1})},g=async b=>{if(window.confirm(a("customCommands.deleteConfirm")||"Delete this command?"))try{await aa.deleteCommand(x,b),f({type:"success",text:a("customCommands.deleted")||"Command deleted!"}),i()}catch{f({type:"error",text:"Failed to delete command"})}},z=()=>{C(null),l({commandName:"",response:"",embedEnabled:!1,embedTitle:"",embedColor:"#5865F2",embedImage:"",aliases:"",allowedRoles:[],isAutoResponse:!1})},P=b=>{l(S=>({...S,allowedRoles:S.allowedRoles.includes(b)?S.allowedRoles.filter(h=>h!==b):[...S.allowedRoles,b]}))},w=b=>{l(S=>({...S,response:S.response+b}))},y=b=>b.replace(/{user}/g,"@ExampleUser").replace(/{username}/g,"ExampleUser").replace(/{displayName}/g,"Example User").replace(/{server}/g,"My Server").replace(/{channel}/g,"#general").replace(/{channelName}/g,"general").replace(/{memberCount}/g,"1234").replace(/{args}/g,"example arguments").replace(/{date}/g,new Date().toLocaleDateString()).replace(/{time}/g,new Date().toLocaleTimeString());return j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:a("common.loading")})]})}):e.jsxs("div",{className:"flex flex-col xl:flex-row gap-6",children:[e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsxs("form",{onSubmit:N,className:"card p-6 space-y-4",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx(dt,{className:"mr-2 text-blue-500"}),t?a("customCommands.editCommand")||"Edit Command":a("customCommands.createCommand")||"Create Command"]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:a("customCommands.name")||"Command Name"}),e.jsx("input",{type:"text",value:I.commandName,onChange:b=>l({...I,commandName:b.target.value.toLowerCase().replace(/\s/g,"")}),className:"input",placeholder:"e.g. welcome, rules, info",disabled:t!==null,maxLength:50,required:!0})]}),e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[e.jsx("input",{type:"checkbox",id:"isAutoResponse",checked:I.isAutoResponse,onChange:b=>l({...I,isAutoResponse:b.target.checked}),className:"w-4 h-4 rounded text-amber-600 focus:ring-amber-500"}),e.jsxs("label",{htmlFor:"isAutoResponse",className:"flex-1 cursor-pointer",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(we,{className:"text-amber-600 dark:text-amber-400"}),e.jsx("span",{className:"font-medium text-gray-900 dark:text-white",children:a("customCommands.autoResponse")||"Auto-Response"})]}),e.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-400 mt-1",children:a("customCommands.autoResponseDesc")||"Trigger when keyword appears anywhere in message (not just with prefix)"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label flex items-center gap-2",children:[e.jsx(fa,{className:"text-gray-400"}),a("customCommands.aliases")||"Aliases"," ",e.jsx("span",{className:"text-xs text-gray-400",children:"(optional)"})]}),e.jsx("input",{type:"text",value:I.aliases,onChange:b=>l({...I,aliases:b.target.value}),className:"input",placeholder:"alias1, alias2, alias3"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:a("customCommands.aliasesDesc")||"Comma-separated alternative triggers (max 10)"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"label mb-0",children:a("customCommands.response")||"Response"}),e.jsxs("button",{type:"button",onClick:()=>A(!T),className:"text-xs text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[e.jsx(Ve,{}),a("customCommands.variables")||"Variables"]})]}),T&&e.jsxs("div",{className:"mb-2 p-3 bg-gray-50 dark:bg-dark-700 rounded-lg text-xs",children:[e.jsx("p",{className:"font-medium mb-2 text-gray-700 dark:text-gray-300",children:a("customCommands.availableVariables")||"Click to insert:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:["{user}","{username}","{displayName}","{server}","{channel}","{channelName}","{memberCount}","{args}","{date}","{time}"].map(b=>e.jsx("button",{type:"button",onClick:()=>w(b),className:"px-2 py-1 bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 rounded hover:bg-blue-200 dark:hover:bg-blue-800/50",children:b},b))})]}),e.jsx("textarea",{value:I.response,onChange:b=>l({...I,response:b.target.value}),className:"input resize-none",rows:"4",placeholder:a("customCommands.responsePlaceholder")||"What the bot should respond with...",required:!0})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label flex items-center gap-2",children:[e.jsx(la,{className:"text-gray-400"}),a("customCommands.allowedRoles")||"Allowed Roles"," ",e.jsx("span",{className:"text-xs text-gray-400",children:"(empty = everyone)"})]}),e.jsx("div",{className:"flex flex-wrap gap-2 p-3 bg-gray-50 dark:bg-dark-700 rounded-lg max-h-32 overflow-y-auto",children:L.length===0?e.jsx("span",{className:"text-xs text-gray-400",children:a("common.loading")}):L.slice(0,20).map(b=>e.jsx("button",{type:"button",onClick:()=>P(b.id),className:`px-2 py-1 text-xs rounded-full transition-all ${I.allowedRoles.includes(b.id)?"ring-2 ring-blue-500 bg-blue-100 dark:bg-blue-900/50 text-blue-800 dark:text-blue-200":"bg-gray-200 dark:bg-dark-600 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-dark-500"}`,style:I.allowedRoles.includes(b.id)&&b.color?{backgroundColor:`${b.color}30`,borderColor:b.color}:{},children:b.name},b.id))})]}),e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[e.jsx("input",{type:"checkbox",id:"embedEnabled",checked:I.embedEnabled,onChange:b=>l({...I,embedEnabled:b.target.checked}),className:"w-4 h-4 rounded text-purple-600 focus:ring-purple-500"}),e.jsx("label",{htmlFor:"embedEnabled",className:"text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer",children:a("customCommands.sendAsEmbed")||"Send as Embed (Rich Message)"})]}),I.embedEnabled&&e.jsxs("div",{className:"space-y-3 pl-4 border-l-4 border-purple-300 dark:border-purple-700",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"label",children:a("customCommands.embedTitle")||"Embed Title"}),e.jsx("input",{type:"text",value:I.embedTitle,onChange:b=>l({...I,embedTitle:b.target.value}),className:"input",placeholder:"Optional title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"label",children:a("customCommands.embedColor")||"Color"}),e.jsx("input",{type:"color",value:I.embedColor,onChange:b=>l({...I,embedColor:b.target.value}),className:"w-full h-10 rounded-lg cursor-pointer border border-gray-300 dark:border-dark-600"})]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label flex items-center gap-2",children:[e.jsx(ta,{className:"text-gray-400"}),a("customCommands.embedImage")||"Image URL"]}),e.jsx("input",{type:"url",value:I.embedImage,onChange:b=>l({...I,embedImage:b.target.value}),className:"input",placeholder:"https://example.com/image.png"})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{type:"submit",disabled:M,className:`flex-1 font-bold py-2.5 rounded-lg text-white transition-all ${M?"bg-gray-400 cursor-not-allowed":"bg-blue-600 hover:bg-blue-700"}`,children:M?a("common.saving")||"Saving...":t?a("customCommands.update")||"Update":a("customCommands.create")||"Create"}),t&&e.jsx("button",{type:"button",onClick:z,className:"px-6 py-2.5 rounded-lg font-bold text-gray-700 dark:text-gray-300 bg-gray-200 dark:bg-dark-600 hover:bg-gray-300 dark:hover:bg-dark-500",children:a("common.cancel")||"Cancel"})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-4",children:[a("customCommands.activeCommands")||"Active Commands"," (",o.length,")"]}),o.length===0?e.jsx("p",{className:"text-gray-400 dark:text-gray-500 text-sm",children:a("customCommands.noCommands")||"No commands yet."}):e.jsx("div",{className:"space-y-3",children:o.map(b=>e.jsx("div",{className:"border border-gray-200 dark:border-dark-600 rounded-lg p-4 bg-gray-50 dark:bg-dark-700 hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center flex-wrap gap-2 mb-2",children:[e.jsx("span",{className:"font-mono text-sm font-bold text-blue-600 dark:text-blue-400 bg-blue-100 dark:bg-blue-900/30 px-2 py-1 rounded",children:b.isAutoResponse?`"${b.commandName}"`:`!${b.commandName}`}),b.isAutoResponse&&e.jsx("span",{className:"text-xs bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400 px-2 py-0.5 rounded",children:"Auto"}),b.embedEnabled&&e.jsx("span",{className:"text-xs bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 px-2 py-0.5 rounded",children:"Embed"}),b.aliases&&b.aliases.length>0&&e.jsxs("span",{className:"text-xs bg-gray-200 dark:bg-dark-500 text-gray-600 dark:text-gray-400 px-2 py-0.5 rounded",children:["+",b.aliases.length," aliases"]}),b.allowedRoles&&b.allowedRoles.length>0&&e.jsxs("span",{className:"text-xs bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 px-2 py-0.5 rounded",children:[b.allowedRoles.length," roles"]}),e.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:[b.usageCount,"x"]})]}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 line-clamp-2",children:b.response})]}),e.jsxs("div",{className:"flex gap-1 ml-4",children:[e.jsx("button",{onClick:()=>E(b),className:"text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 p-2 rounded",title:"Edit",children:e.jsx(Se,{})}),e.jsx("button",{onClick:()=>g(b.id),className:"text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 p-2 rounded",title:"Delete",children:e.jsx(de,{})})]})]})},b.id))})]})]}),I.response&&e.jsx("div",{className:"w-full xl:w-96",children:e.jsxs("div",{className:"sticky top-6",children:[e.jsx("h3",{className:"font-bold text-gray-500 dark:text-gray-400 uppercase mb-2 text-sm",children:a("dashboard.preview")||"Preview"}),e.jsx("div",{className:"bg-[#313338] rounded-lg p-4 text-white font-['Whitney']",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-blue-500 flex items-center justify-center font-bold flex-shrink-0",children:"K"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-sm",children:"KiraEvo Bot"}),e.jsx("span",{className:"bg-blue-500 text-xs px-1.5 py-0.5 rounded text-white font-semibold",children:"BOT"})]}),I.embedEnabled?e.jsxs("div",{className:"border-l-4 rounded p-3 mt-1",style:{borderColor:I.embedColor,backgroundColor:"#2b2d31"},children:[I.embedTitle&&e.jsx("div",{className:"font-semibold mb-2",children:y(I.embedTitle)}),e.jsx("div",{className:"text-sm whitespace-pre-wrap break-words",children:y(I.response)}),I.embedImage&&e.jsx("img",{src:I.embedImage,alt:"Embed",className:"mt-2 max-w-full rounded",onError:b=>b.target.style.display="none"})]}):e.jsx("div",{className:"text-sm whitespace-pre-wrap break-words",children:y(I.response)})]})]})}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 dark:bg-dark-800 rounded-lg text-xs",children:[e.jsx("p",{className:"font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("customCommands.variablesRef")||"Variables Reference:"}),e.jsxs("div",{className:"space-y-1 text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:[e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-1 rounded",children:"{user}"})," - @mention"]}),e.jsxs("p",{children:[e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-1 rounded",children:"{username}"})," - username"]}),e.jsxs("p",{children:[e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-1 rounded",children:"{server}"})," - server name"]}),e.jsxs("p",{children:[e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-1 rounded",children:"{memberCount}"})," - member count"]}),e.jsxs("p",{children:[e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-1 rounded",children:"{args}"})," - text after command"]})]})]})]})})]})}function As({guildId:x,channels:f,roles:a}){const{t:o}=ge(),m=Sa(),[L,G]=u.useState([]),[j,v]=u.useState(!0),[M,d]=u.useState("active"),[t,C]=u.useState(!1),[T,A]=u.useState(!1),[I,l]=u.useState(!1),[i,U]=u.useState(null),[N,E]=u.useState({prize:"",description:"",duration:"",winners:1,channelId:"",requiredRoles:[],requiredRolesType:"any",blacklistedRoles:[],minAccountAge:"",minServerTime:"",minLevel:"",minMessages:"",bonusEntries:[],embedColor:"#9333ea",embedImage:"",embedThumbnail:"",dmWinners:!0,winnerMessage:"",isDropGiveaway:!1});u.useEffect(()=>{g()},[x,M]);const g=async()=>{try{v(!0);const p=await Fe.getGiveaways(x,{status:M==="all"?void 0:M}),O=Array.isArray(p.data)?p.data:p.data.data||[];G(O)}catch{m.error("Failed to load giveaways")}finally{v(!1)}},z=async p=>{if(window.confirm("Are you sure you want to cancel this giveaway?"))try{U(p),await Fe.deleteGiveaway(x,p),m.success("Giveaway cancelled successfully!"),g()}catch{m.error("Failed to cancel giveaway")}finally{U(null)}},P=async p=>{if(window.confirm("Are you sure you want to end this giveaway now?"))try{U(p),await Fe.endGiveaway(x,p),m.success("Giveaway ended successfully!"),g()}catch{m.error("Failed to end giveaway")}finally{U(null)}},w=async p=>{var Y,J;const O=window.prompt("How many new winners to pick?","1");if(O)try{U(p),await Fe.rerollGiveaway(x,p,parseInt(O)),m.success("Giveaway rerolled successfully!"),g()}catch(le){m.error(((J=(Y=le.response)==null?void 0:Y.data)==null?void 0:J.message)||"Failed to reroll giveaway")}finally{U(null)}},y=async p=>{try{U(p),await Fe.pauseGiveaway(x,p),m.success("Giveaway paused!"),g()}catch{m.error("Failed to pause giveaway")}finally{U(null)}},b=async p=>{try{U(p),await Fe.resumeGiveaway(x,p),m.success("Giveaway resumed!"),g()}catch{m.error("Failed to resume giveaway")}finally{U(null)}},S=async()=>{var p,O;try{if(!N.prize||!N.duration||!N.winners||!N.channelId){m.error("Please fill in all required fields");return}if(!/^(\d+)([smhd])$/.test(N.duration)){m.error("Invalid duration format! Use: 30s, 5m, 2h, or 1d");return}l(!0);const J={prize:N.prize,description:N.description||null,duration:N.duration,winners:parseInt(N.winners),channelId:N.channelId,requiredRoles:N.requiredRoles.length>0?N.requiredRoles:null,requiredRolesType:N.requiredRolesType,blacklistedRoles:N.blacklistedRoles.length>0?N.blacklistedRoles:null,minAccountAge:N.minAccountAge?parseInt(N.minAccountAge):null,minServerTime:N.minServerTime?parseInt(N.minServerTime):null,minLevel:N.minLevel?parseInt(N.minLevel):null,minMessages:N.minMessages?parseInt(N.minMessages):null,bonusEntries:N.bonusEntries.length>0?N.bonusEntries:null,embedColor:N.embedColor,embedImage:N.embedImage||null,embedThumbnail:N.embedThumbnail||null,dmWinners:N.dmWinners,winnerMessage:N.winnerMessage||null,isDropGiveaway:N.isDropGiveaway};await Fe.createGiveaway(x,J),m.success("Giveaway created successfully!"),E({prize:"",description:"",duration:"",winners:1,channelId:"",requiredRoles:[],requiredRolesType:"any",blacklistedRoles:[],minAccountAge:"",minServerTime:"",minLevel:"",minMessages:"",bonusEntries:[],embedColor:"#9333ea",embedImage:"",embedThumbnail:"",dmWinners:!0,winnerMessage:"",isDropGiveaway:!1}),C(!1),A(!1),d("active"),g()}catch(Y){const J=((O=(p=Y.response)==null?void 0:p.data)==null?void 0:O.message)||"Failed to create giveaway";m.error(J)}finally{l(!1)}},h=(p,O)=>{E(Y=>({...Y,[p]:Y[p].includes(O)?Y[p].filter(J=>J!==O):[...Y[p],O]}))},W=()=>{E(p=>({...p,bonusEntries:[...p.bonusEntries,{roleId:"",entries:1}]}))},q=(p,O,Y)=>{E(J=>({...J,bonusEntries:J.bonusEntries.map((le,_)=>_===p?{...le,[O]:Y}:le)}))},K=p=>{E(O=>({...O,bonusEntries:O.bonusEntries.filter((Y,J)=>J!==p)}))},te=p=>{const O=new Date,J=new Date(p)-O;if(J<=0)return"Ended";const le=Math.floor(J/(1e3*60*60*24)),_=Math.floor(J%(1e3*60*60*24)/(1e3*60*60)),r=Math.floor(J%(1e3*60*60)/(1e3*60));return le>0?`${le}d ${_}h`:_>0?`${_}h ${r}m`:`${r}m`};return j?e.jsx("div",{className:"flex items-center justify-center h-64",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"w-8 h-8 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Loading giveaways..."})]})}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[e.jsx(Oe,{className:"text-purple-500"}),"Giveaways"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 text-sm mt-1",children:["Create and manage giveaways from the dashboard or use ",e.jsx("span",{className:"font-mono bg-gray-100 dark:bg-dark-700 px-2 py-1 rounded",children:"/giveaway"})," in Discord"]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs("button",{onClick:()=>C(!t),className:"px-4 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-all flex items-center gap-2",children:[t?e.jsx(pe,{}):e.jsx(oe,{}),t?"Cancel":"Create Giveaway"]}),["active","paused","ended","all"].map(p=>e.jsx("button",{onClick:()=>d(p),className:`px-4 py-2 rounded-lg font-medium transition-all capitalize ${M===p?"bg-blue-600 text-white":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-600"}`,children:p},p))]})]})}),t&&e.jsxs("div",{className:"card p-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(Oe,{className:"text-purple-500"}),"Create New Giveaway"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Prize ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:N.prize,onChange:p=>E({...N,prize:p.target.value}),placeholder:"e.g., Discord Nitro",className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white",maxLength:255})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Channel ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsxs("select",{value:N.channelId,onChange:p=>E({...N,channelId:p.target.value}),className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select a channel"}),f==null?void 0:f.filter(p=>p.type===0).map(p=>e.jsxs("option",{value:p.id,children:["#",p.name]},p.id))]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Duration ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",value:N.duration,onChange:p=>E({...N,duration:p.target.value}),placeholder:"e.g., 1h, 2d, 30m",className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Format: number + unit (s=seconds, m=minutes, h=hours, d=days)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:["Number of Winners ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"number",value:N.winners,onChange:p=>E({...N,winners:p.target.value}),min:"1",max:"20",className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Description (Optional)"}),e.jsx("textarea",{value:N.description,onChange:p=>E({...N,description:p.target.value}),placeholder:"Enter a description for the giveaway...",rows:2,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white",maxLength:500})]}),e.jsx("div",{className:"md:col-span-2",children:e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N.isDropGiveaway,onChange:p=>E({...N,isDropGiveaway:p.target.checked}),className:"w-5 h-5 rounded border-gray-300 dark:border-dark-600 text-purple-600 focus:ring-purple-500"}),e.jsxs("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:["Drop Giveaway - First ",N.winners||1," to click win immediately"]})]})})]}),e.jsxs("button",{onClick:()=>A(!T),className:"mt-4 flex items-center gap-2 text-purple-600 dark:text-purple-400 font-medium hover:underline",children:[e.jsx(Me,{}),"Advanced Options",T?e.jsx(ka,{}):e.jsx(We,{})]}),T&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200 dark:border-dark-600 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-3",children:"Entry Requirements"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Required Roles"}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto p-2 border border-gray-200 dark:border-dark-600 rounded-lg",children:a==null?void 0:a.map(p=>e.jsx("button",{type:"button",onClick:()=>h("requiredRoles",p.id),className:`px-2 py-1 text-xs rounded transition-all ${N.requiredRoles.includes(p.id)?"bg-green-500 text-white":"bg-gray-100 dark:bg-dark-600 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-500"}`,children:p.name},p.id))}),N.requiredRoles.length>0&&e.jsx("div",{className:"mt-2",children:e.jsxs("select",{value:N.requiredRolesType,onChange:p=>E({...N,requiredRolesType:p.target.value}),className:"px-3 py-1 text-sm border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"any",children:"Any of these roles"}),e.jsx("option",{value:"all",children:"All of these roles"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Blacklisted Roles"}),e.jsx("div",{className:"flex flex-wrap gap-2 max-h-32 overflow-y-auto p-2 border border-gray-200 dark:border-dark-600 rounded-lg",children:a==null?void 0:a.map(p=>e.jsx("button",{type:"button",onClick:()=>h("blacklistedRoles",p.id),className:`px-2 py-1 text-xs rounded transition-all ${N.blacklistedRoles.includes(p.id)?"bg-red-500 text-white":"bg-gray-100 dark:bg-dark-600 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-500"}`,children:p.name},p.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Min Account Age (days)"}),e.jsx("input",{type:"number",value:N.minAccountAge,onChange:p=>E({...N,minAccountAge:p.target.value}),placeholder:"e.g., 30",min:"1",className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Min Time on Server (days)"}),e.jsx("input",{type:"number",value:N.minServerTime,onChange:p=>E({...N,minServerTime:p.target.value}),placeholder:"e.g., 7",min:"1",className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Min Level"}),e.jsx("input",{type:"number",value:N.minLevel,onChange:p=>E({...N,minLevel:p.target.value}),placeholder:"e.g., 5",min:"1",className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Min Messages"}),e.jsx("input",{type:"number",value:N.minMessages,onChange:p=>E({...N,minMessages:p.target.value}),placeholder:"e.g., 100",min:"1",className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white",children:"Bonus Entries"}),e.jsxs("button",{type:"button",onClick:W,className:"px-3 py-1 text-sm bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-all flex items-center gap-1",children:[e.jsx(oe,{className:"text-xs"})," Add"]})]}),N.bonusEntries.length===0?e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"No bonus entries configured"}):e.jsx("div",{className:"space-y-2",children:N.bonusEntries.map((p,O)=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:p.roleId,onChange:Y=>q(O,"roleId",Y.target.value),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Select role"}),a==null?void 0:a.map(Y=>e.jsx("option",{value:Y.id,children:Y.name},Y.id))]}),e.jsx("input",{type:"number",value:p.entries,onChange:Y=>q(O,"entries",parseInt(Y.target.value)||1),min:"1",max:"10",className:"w-20 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"Entries"}),e.jsx("button",{type:"button",onClick:()=>K(O),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",children:e.jsx(pe,{})})]},O))})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-3",children:"Embed Customization"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Embed Color"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:N.embedColor,onChange:p=>E({...N,embedColor:p.target.value}),className:"w-10 h-10 rounded cursor-pointer"}),e.jsx("input",{type:"text",value:N.embedColor,onChange:p=>E({...N,embedColor:p.target.value}),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"#9333ea"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Image URL"}),e.jsx("input",{type:"url",value:N.embedImage,onChange:p=>E({...N,embedImage:p.target.value}),placeholder:"https://...",className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Thumbnail URL"}),e.jsx("input",{type:"url",value:N.embedThumbnail,onChange:p=>E({...N,embedThumbnail:p.target.value}),placeholder:"https://...",className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-lg font-semibold text-gray-800 dark:text-white mb-3",children:"Winner Settings"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("label",{className:"flex items-center gap-3 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:N.dmWinners,onChange:p=>E({...N,dmWinners:p.target.checked}),className:"w-5 h-5 rounded border-gray-300 dark:border-dark-600 text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Send DM to winners"})]}),N.dmWinners&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Custom Winner Message (Optional)"}),e.jsx("textarea",{value:N.winnerMessage,onChange:p=>E({...N,winnerMessage:p.target.value}),placeholder:"Congratulations! You won {prize} in the giveaway on {server}!",rows:2,className:"w-full px-4 py-2 border border-gray-300 dark:border-dark-600 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white dark:bg-dark-700 text-gray-900 dark:text-white"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Placeholders: ","{prize}",", ","{server}",", ","{user}"]})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 mt-6",children:[e.jsx("button",{onClick:()=>{C(!1),A(!1)},className:"px-6 py-2 border border-gray-300 dark:border-dark-600 text-gray-700 dark:text-gray-300 rounded-lg font-medium hover:bg-gray-50 dark:hover:bg-dark-700 transition-all",disabled:I,children:"Cancel"}),e.jsx("button",{onClick:S,disabled:I,className:"px-6 py-2 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-all disabled:bg-purple-300 disabled:cursor-not-allowed flex items-center gap-2",children:I?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Creating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Oe,{}),"Create Giveaway"]})})]})]}),e.jsx("div",{className:"card p-6",children:L.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Oe,{className:"text-6xl text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsxs("h3",{className:"text-xl font-bold text-gray-700 dark:text-gray-300 mb-2",children:["No ",M==="all"?"":M," giveaways"]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:M==="active"?"Start a giveaway using /giveaway command in your Discord server":M==="paused"?"No paused giveaways":"No ended giveaways yet"})]}):e.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:L.map(p=>{var O;return e.jsxs("div",{className:"border border-gray-200 dark:border-dark-600 rounded-lg p-5 bg-gradient-to-br from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 hover:shadow-md transition-shadow",children:[e.jsx("div",{className:"flex justify-between items-start mb-3",children:e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Oe,{className:"text-purple-500"}),e.jsx("h3",{className:"font-bold text-gray-800 dark:text-white text-lg",children:p.prize}),p.isDropGiveaway&&e.jsx("span",{className:"px-2 py-0.5 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 text-xs rounded font-medium",children:"DROP"})]}),p.description&&e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-2 line-clamp-2",children:p.description})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Ze,{className:"text-yellow-500"}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:[p.winners," ",p.winners===1?"Winner":"Winners"]})]}),p.status==="active"?e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ke,{className:"text-blue-500"}),e.jsxs("span",{className:"text-gray-700 dark:text-gray-300",children:["Ends in: ",e.jsx("span",{className:"font-semibold",children:te(p.endsAt)})]})]}):p.status==="paused"?e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(va,{className:"text-yellow-500"}),e.jsx("span",{className:"text-yellow-600 dark:text-yellow-400 font-medium",children:"Paused"})]}):e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(ke,{className:"text-gray-400 dark:text-gray-500"}),e.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Ended on ",new Date(p.endsAt).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Participants:"}),e.jsx("span",{className:"font-semibold text-gray-700 dark:text-gray-300",children:((O=p.participants)==null?void 0:O.length)||0})]}),p.winnersList&&p.winnersList.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-dark-600",children:[e.jsx("p",{className:"text-xs font-semibold text-gray-600 dark:text-gray-400 mb-1",children:"Winners:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:p.winnersList.map((Y,J)=>e.jsx("span",{className:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-800 dark:text-yellow-300 text-xs px-2 py-1 rounded font-medium",children:Y},J))})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200 dark:border-dark-600 flex items-center justify-between",children:[e.jsx("span",{className:`inline-block px-3 py-1 rounded-full text-xs font-semibold ${p.status==="active"?"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300":p.status==="paused"?"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300":p.status==="ended"?"bg-gray-100 dark:bg-dark-600 text-gray-700 dark:text-gray-300":"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300"}`,children:p.status.toUpperCase()}),e.jsxs("div",{className:"flex items-center gap-1",children:[p.status==="active"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>y(p.id),disabled:i===p.id,className:"p-2 text-yellow-600 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 rounded transition-colors disabled:opacity-50",title:"Pause",children:e.jsx(va,{className:"text-sm"})}),e.jsx("button",{onClick:()=>P(p.id),disabled:i===p.id,className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors disabled:opacity-50",title:"End Now",children:e.jsx(Ba,{className:"text-sm"})}),e.jsx("button",{onClick:()=>z(p.id),disabled:i===p.id,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors disabled:opacity-50",title:"Cancel",children:e.jsx(de,{className:"text-sm"})})]}),p.status==="paused"&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>b(p.id),disabled:i===p.id,className:"p-2 text-green-600 hover:bg-green-50 dark:hover:bg-green-900/20 rounded transition-colors disabled:opacity-50",title:"Resume",children:e.jsx(Na,{className:"text-sm"})}),e.jsx("button",{onClick:()=>P(p.id),disabled:i===p.id,className:"p-2 text-blue-600 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded transition-colors disabled:opacity-50",title:"End Now",children:e.jsx(Ba,{className:"text-sm"})}),e.jsx("button",{onClick:()=>z(p.id),disabled:i===p.id,className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors disabled:opacity-50",title:"Cancel",children:e.jsx(de,{className:"text-sm"})})]}),p.status==="ended"&&e.jsx("button",{onClick:()=>w(p.id),disabled:i===p.id,className:"p-2 text-purple-600 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded transition-colors disabled:opacity-50",title:"Reroll",children:e.jsx(Qt,{className:"text-sm"})}),i===p.id&&e.jsx("div",{className:"w-4 h-4 border-2 border-gray-400 border-t-transparent rounded-full animate-spin ml-1"})]})]})]})]},p.id)})})})]})}function Ps({guildId:x,channels:f,roles:a,initialSettings:o,setMessage:m,onSave:L}){var he,R,c,D,$;const{t:G}=ge(),[j,v]=u.useState(!1),[M,d]=u.useState("general"),[t,C]=u.useState({levelingEnabled:!1,levelingChannelId:"",levelingMessage:"{user} osiagnol poziom {level}!",levelingImage:"",xpPerMessage:15,xpPerMessageMin:10,xpPerMessageMax:25,xpRandomEnabled:!1,levelingCooldown:60,voiceXpEnabled:!1,voiceXpPerMinute:5,voiceXpRequireUnmuted:!0,voiceXpRequireVideo:!1,voiceXpIgnoreAfk:!0,xpMultiplierEnabled:!1,channelMultipliers:[],roleMultipliers:[],weekendMultiplier:1,levelingIgnoredChannels:[],levelingNoXpRoles:[],levelRoles:[],levelRolesStack:!0,levelRolesRemoveLower:!1,levelingAnnounceDm:!1,levelingMilestones:[],levelingMilestoneMessage:""}),[T,A]=u.useState(""),[I,l]=u.useState(""),[i,U]=u.useState(""),[N,E]=u.useState(""),[g,z]=u.useState({channelId:"",multiplier:1.5}),[P,w]=u.useState({roleId:"",multiplier:1.5}),[y,b]=u.useState("");u.useEffect(()=>{o&&C(n=>({...n,levelingEnabled:o.levelingEnabled||!1,levelingChannelId:o.levelingChannelId||"",levelingMessage:o.levelingMessage||"{user} osiagnol poziom {level}!",levelingImage:o.levelingImage||"",xpPerMessage:o.xpPerMessage||15,xpPerMessageMin:o.xpPerMessageMin||10,xpPerMessageMax:o.xpPerMessageMax||25,xpRandomEnabled:o.xpRandomEnabled||!1,levelingCooldown:o.levelingCooldown||60,voiceXpEnabled:o.voiceXpEnabled||!1,voiceXpPerMinute:o.voiceXpPerMinute||5,voiceXpRequireUnmuted:o.voiceXpRequireUnmuted!==!1,voiceXpRequireVideo:o.voiceXpRequireVideo||!1,voiceXpIgnoreAfk:o.voiceXpIgnoreAfk!==!1,xpMultiplierEnabled:o.xpMultiplierEnabled||!1,channelMultipliers:o.channelMultipliers||[],roleMultipliers:o.roleMultipliers||[],weekendMultiplier:o.weekendMultiplier||1,levelingIgnoredChannels:o.levelingIgnoredChannels||[],levelingNoXpRoles:o.levelingNoXpRoles||[],levelRoles:o.levelRoles||[],levelRolesStack:o.levelRolesStack!==!1,levelRolesRemoveLower:o.levelRolesRemoveLower||!1,levelingAnnounceDm:o.levelingAnnounceDm||!1,levelingMilestones:o.levelingMilestones||[],levelingMilestoneMessage:o.levelingMilestoneMessage||""}))},[o]);const S=n=>{const B=n.target.files[0];if(B){const ae=new FileReader;ae.onloadend=()=>{C({...t,levelingImage:ae.result})},ae.readAsDataURL(B)}},h=()=>{const n=parseInt(T);if(!n||n<1||!I){m({type:"error",text:"Wybierz poprawny poziom i role"});return}if(t.levelRoles.some(ae=>ae.level===n)){m({type:"error",text:"Rola dla tego poziomu juz istnieje"});return}const B=[...t.levelRoles,{level:n,roleId:I}];B.sort((ae,be)=>ae.level-be.level),C({...t,levelRoles:B}),A(""),l("")},W=n=>{C({...t,levelRoles:t.levelRoles.filter(B=>B.level!==n)})},q=()=>{!i||t.levelingIgnoredChannels.includes(i)||(C({...t,levelingIgnoredChannels:[...t.levelingIgnoredChannels,i]}),U(""))},K=n=>{C({...t,levelingIgnoredChannels:t.levelingIgnoredChannels.filter(B=>B!==n)})},te=()=>{!N||t.levelingNoXpRoles.includes(N)||(C({...t,levelingNoXpRoles:[...t.levelingNoXpRoles,N]}),E(""))},p=n=>{C({...t,levelingNoXpRoles:t.levelingNoXpRoles.filter(B=>B!==n)})},O=()=>{!g.channelId||t.channelMultipliers.some(n=>n.channelId===g.channelId)||(C({...t,channelMultipliers:[...t.channelMultipliers,{...g}]}),z({channelId:"",multiplier:1.5}))},Y=n=>{C({...t,channelMultipliers:t.channelMultipliers.filter(B=>B.channelId!==n)})},J=()=>{!P.roleId||t.roleMultipliers.some(n=>n.roleId===P.roleId)||(C({...t,roleMultipliers:[...t.roleMultipliers,{...P}]}),w({roleId:"",multiplier:1.5}))},le=n=>{C({...t,roleMultipliers:t.roleMultipliers.filter(B=>B.roleId!==n)})},_=()=>{const n=parseInt(y);if(!n||n<1||t.levelingMilestones.includes(n))return;const B=[...t.levelingMilestones,n].sort((ae,be)=>ae-be);C({...t,levelingMilestones:B}),b("")},r=n=>{C({...t,levelingMilestones:t.levelingMilestones.filter(B=>B!==n)})},k=async n=>{n.preventDefault(),v(!0);try{await X.updateGuildSettings(x,t),m({type:"success",text:G("dashboard.settingsSaved")}),L&&L()}catch{m({type:"error",text:G("dashboard.settingsSaveFailed")})}finally{v(!1)}},F=n=>{var B;return((B=(f||[]).find(ae=>ae.id===n))==null?void 0:B.name)||"unknown-channel"},ee=n=>{var B;return((B=(a||[]).find(ae=>ae.id===n))==null?void 0:B.name)||"Unknown Role"},se=(a||[]).filter(n=>n.name!=="@everyone"&&!n.managed),ne=(f||[]).filter(n=>n.type===0);(f||[]).filter(n=>n.type===2);const ie=[{id:"general",label:"Ogolne",icon:Ze},{id:"xp",label:"XP",icon:Va},{id:"voice",label:"Voice XP",icon:Ye},{id:"multipliers",label:"Mnozniki",icon:Va},{id:"ignored",label:"Ignorowane",icon:pe},{id:"roles",label:"Role za poziomy",icon:la}];return e.jsxs("div",{className:"flex flex-col xl:flex-row gap-6",children:[e.jsx("div",{className:"flex-1 space-y-6",children:e.jsxs("form",{onSubmit:k,className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx("span",{className:"p-2 bg-yellow-100 dark:bg-yellow-900/30 text-yellow-600 dark:text-yellow-400 rounded-lg mr-3",children:e.jsx(Ze,{})}),"System Poziomow"]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.levelingEnabled,onChange:n=>C({...t,levelingEnabled:n.target.checked}),className:"w-5 h-5 text-yellow-600 rounded"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Wlacz system poziomow"})]})]}),t.levelingEnabled&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex flex-wrap gap-2 card p-2",children:ie.map(n=>e.jsxs("button",{type:"button",onClick:()=>d(n.id),className:`flex items-center px-4 py-2 rounded-lg transition-all ${M===n.id?"bg-yellow-600 text-white":"bg-gray-100 dark:bg-dark-700 text-gray-700 dark:text-gray-300 hover:bg-gray-200 dark:hover:bg-dark-600"}`,children:[e.jsx(n.icon,{className:"mr-2"}),n.label]},n.id))}),M==="general"&&e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Ustawienia ogolne"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Kanal na powiadomienia o awansie"}),e.jsxs("select",{value:t.levelingChannelId,onChange:n=>C({...t,levelingChannelId:n.target.value}),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Ten sam kanal (gdzie wyslano wiadomosc)"}),ne.map(n=>e.jsxs("option",{value:n.id,children:["#",n.name]},n.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Wiadomosc o awansie"}),e.jsx("textarea",{value:t.levelingMessage,onChange:n=>C({...t,levelingMessage:n.target.value}),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",rows:"2"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["Zmienne: ","{user}"," - wzmianka, ","{username}"," - nazwa, ","{level}"," - poziom, ","{server}"," - serwer, ","{totalXp}"," - calkowite XP"]})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.levelingAnnounceDm,onChange:n=>C({...t,levelingAnnounceDm:n.target.checked}),className:"w-5 h-5 text-yellow-600 rounded"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Wyslij tez powiadomienie o awansie na DM"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Obrazek tla powiadomienia"}),e.jsx("input",{type:"file",accept:"image/*",onChange:S,className:"text-sm text-gray-700 dark:text-gray-300"}),t.levelingImage&&e.jsx("button",{type:"button",onClick:()=>C({...t,levelingImage:""}),className:"text-red-500 dark:text-red-400 text-sm mt-1 hover:underline",children:"Usun obrazek"})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-dark-600 pt-4 mt-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-2",children:"Poziomy specjalne (milestone)"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Poziomy, ktore otrzymaja specjalna wiadomosc"}),t.levelingMilestones.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:t.levelingMilestones.map(n=>e.jsxs("span",{className:"inline-flex items-center bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300 px-2 py-1 rounded",children:["Poziom ",n,e.jsx("button",{type:"button",onClick:()=>r(n),className:"ml-1 text-yellow-600 hover:text-yellow-800",children:e.jsx(pe,{size:12})})]},n))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"number",min:"1",value:y,onChange:n=>b(n.target.value),placeholder:"np. 10, 25, 50",className:"flex-1 border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"}),e.jsx("button",{type:"button",onClick:_,className:"bg-yellow-600 text-white px-4 py-2 rounded hover:bg-yellow-700",children:e.jsx(oe,{})})]}),t.levelingMilestones.length>0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Specjalna wiadomosc milestone"}),e.jsx("textarea",{value:t.levelingMilestoneMessage,onChange:n=>C({...t,levelingMilestoneMessage:n.target.value}),placeholder:"Gratulacje {user}! Osiagnales wielki kamien milowy - poziom {level}!",className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",rows:"2"})]})]})]}),M==="xp"&&e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Ustawienia XP"}),e.jsxs("label",{className:"flex items-center space-x-2 mb-4",children:[e.jsx("input",{type:"checkbox",checked:t.xpRandomEnabled,onChange:n=>C({...t,xpRandomEnabled:n.target.checked}),className:"w-5 h-5 text-yellow-600 rounded"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Losowa ilosc XP (zakres min-max)"})]}),t.xpRandomEnabled?e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Minimalne XP za wiadomosc"}),e.jsx("input",{type:"number",min:"1",max:"1000",value:t.xpPerMessageMin,onChange:n=>C({...t,xpPerMessageMin:parseInt(n.target.value)||10}),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Maksymalne XP za wiadomosc"}),e.jsx("input",{type:"number",min:"1",max:"1000",value:t.xpPerMessageMax,onChange:n=>C({...t,xpPerMessageMax:parseInt(n.target.value)||25}),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]}):e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"XP za wiadomosc"}),e.jsx("input",{type:"number",min:"1",max:"1000",value:t.xpPerMessage,onChange:n=>C({...t,xpPerMessage:parseInt(n.target.value)||15}),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Cooldown (sekundy)"}),e.jsx("input",{type:"number",min:"0",max:"3600",value:t.levelingCooldown,onChange:n=>C({...t,levelingCooldown:parseInt(n.target.value)||60}),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Czas miedzy wiadomosciami, za ktore mozna zdobyc XP"})]})]}),M==="voice"&&e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx(Ye,{className:"mr-2 text-green-500"}),"XP za kanaly glosowe"]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.voiceXpEnabled,onChange:n=>C({...t,voiceXpEnabled:n.target.checked}),className:"w-5 h-5 text-green-600 rounded"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Wlacz XP za przebywanie na kanalach glosowych"})]}),t.voiceXpEnabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"XP za minute na kanale glosowym"}),e.jsx("input",{type:"number",min:"1",max:"100",value:t.voiceXpPerMinute,onChange:n=>C({...t,voiceXpPerMinute:parseInt(n.target.value)||5}),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.voiceXpRequireUnmuted,onChange:n=>C({...t,voiceXpRequireUnmuted:n.target.checked}),className:"w-5 h-5 text-green-600 rounded"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Wymagaj wlaczonego mikrofonu (nie zmutowany)"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.voiceXpRequireVideo,onChange:n=>C({...t,voiceXpRequireVideo:n.target.checked}),className:"w-5 h-5 text-green-600 rounded"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Wymagaj wlaczonej kamery"})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.voiceXpIgnoreAfk,onChange:n=>C({...t,voiceXpIgnoreAfk:n.target.checked}),className:"w-5 h-5 text-green-600 rounded"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Ignoruj kanal AFK"})]})]}),e.jsx("div",{className:"bg-gray-50 dark:bg-dark-700 p-3 rounded-lg",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"XP jest przyznawane co minute przebywania na kanale glosowym. Uzytkownicy sami na kanale (bez innych osob) nie otrzymuja XP."})})]})]}),M==="multipliers"&&e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Mnozniki XP"}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.xpMultiplierEnabled,onChange:n=>C({...t,xpMultiplierEnabled:n.target.checked}),className:"w-5 h-5 text-purple-600 rounded"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Wlacz mnozniki XP"})]}),t.xpMultiplierEnabled&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Mnoznik weekendowy (sobota-niedziela)"}),e.jsx("input",{type:"number",min:"1",max:"5",step:"0.1",value:t.weekendMultiplier,onChange:n=>C({...t,weekendMultiplier:parseFloat(n.target.value)||1}),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"1.0 = normalny, 2.0 = podwojny XP"})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-dark-600 pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-2",children:"Mnozniki kanalow"}),t.channelMultipliers.length>0&&e.jsx("div",{className:"mb-3 space-y-2",children:t.channelMultipliers.map(n=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-dark-700 p-2 rounded",children:[e.jsxs("span",{children:["#",F(n.channelId)," - ",e.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:[n.multiplier,"x"]})]}),e.jsx("button",{type:"button",onClick:()=>Y(n.channelId),className:"text-red-500 hover:text-red-700",children:e.jsx(de,{})})]},n.channelId))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:g.channelId,onChange:n=>z({...g,channelId:n.target.value}),className:"flex-1 border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Wybierz kanal..."}),ne.filter(n=>!t.channelMultipliers.some(B=>B.channelId===n.id)).map(n=>e.jsxs("option",{value:n.id,children:["#",n.name]},n.id))]}),e.jsx("input",{type:"number",min:"0.1",max:"5",step:"0.1",value:g.multiplier,onChange:n=>z({...g,multiplier:parseFloat(n.target.value)||1.5}),className:"w-20 border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"}),e.jsx("button",{type:"button",onClick:O,className:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700",children:e.jsx(oe,{})})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-dark-600 pt-4",children:[e.jsx("h4",{className:"font-medium text-gray-800 dark:text-white mb-2",children:"Mnozniki rol"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Uzytkownicy z tymi rolami otrzymuja bonus XP. Uzywany jest najwyzszy mnoznik."}),t.roleMultipliers.length>0&&e.jsx("div",{className:"mb-3 space-y-2",children:t.roleMultipliers.map(n=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-dark-700 p-2 rounded",children:[e.jsxs("span",{children:["@",ee(n.roleId)," - ",e.jsxs("span",{className:"text-purple-600 dark:text-purple-400",children:[n.multiplier,"x"]})]}),e.jsx("button",{type:"button",onClick:()=>le(n.roleId),className:"text-red-500 hover:text-red-700",children:e.jsx(de,{})})]},n.roleId))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:P.roleId,onChange:n=>w({...P,roleId:n.target.value}),className:"flex-1 border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Wybierz role..."}),se.filter(n=>!t.roleMultipliers.some(B=>B.roleId===n.id)).map(n=>e.jsxs("option",{value:n.id,children:["@",n.name]},n.id))]}),e.jsx("input",{type:"number",min:"0.1",max:"5",step:"0.1",value:P.multiplier,onChange:n=>w({...P,multiplier:parseFloat(n.target.value)||1.5}),className:"w-20 border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"}),e.jsx("button",{type:"button",onClick:J,className:"bg-purple-600 text-white px-4 py-2 rounded hover:bg-purple-700",children:e.jsx(oe,{})})]})]})]})]}),M==="ignored"&&e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Ignorowane kanaly i role"}),e.jsxs("div",{children:[e.jsxs("h4",{className:"font-medium text-gray-800 dark:text-white mb-2 flex items-center",children:[e.jsx(me,{className:"mr-2 text-gray-500"}),"Ignorowane kanaly (bez XP)"]}),t.levelingIgnoredChannels.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:t.levelingIgnoredChannels.map(n=>e.jsxs("span",{className:"inline-flex items-center bg-gray-100 dark:bg-dark-700 text-gray-700 dark:text-gray-300 px-2 py-1 rounded",children:["#",F(n),e.jsx("button",{type:"button",onClick:()=>K(n),className:"ml-1 text-red-500 hover:text-red-700",children:e.jsx(pe,{size:12})})]},n))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:i,onChange:n=>U(n.target.value),className:"flex-1 border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Wybierz kanal..."}),ne.filter(n=>!t.levelingIgnoredChannels.includes(n.id)).map(n=>e.jsxs("option",{value:n.id,children:["#",n.name]},n.id))]}),e.jsx("button",{type:"button",onClick:q,className:"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700",children:e.jsx(oe,{})})]})]}),e.jsxs("div",{className:"border-t border-gray-200 dark:border-dark-600 pt-4",children:[e.jsxs("h4",{className:"font-medium text-gray-800 dark:text-white mb-2 flex items-center",children:[e.jsx(la,{className:"mr-2 text-gray-500"}),"Ignorowane role (nie zdobywaja XP)"]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mb-2",children:"Uzytkownicy z tymi rolami nie moga zdobywac XP (np. zmutowani, boty)"}),t.levelingNoXpRoles.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mb-2",children:t.levelingNoXpRoles.map(n=>e.jsxs("span",{className:"inline-flex items-center bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300 px-2 py-1 rounded",children:["@",ee(n),e.jsx("button",{type:"button",onClick:()=>p(n),className:"ml-1 text-red-600 hover:text-red-800",children:e.jsx(pe,{size:12})})]},n))}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:N,onChange:n=>E(n.target.value),className:"flex-1 border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Wybierz role..."}),se.filter(n=>!t.levelingNoXpRoles.includes(n.id)).map(n=>e.jsxs("option",{value:n.id,children:["@",n.name]},n.id))]}),e.jsx("button",{type:"button",onClick:te,className:"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700",children:e.jsx(oe,{})})]})]})]}),M==="roles"&&e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"Role za poziomy"}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:t.levelRolesStack,onChange:n=>C({...t,levelRolesStack:n.target.checked}),className:"w-5 h-5 text-purple-600 rounded"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Kumuluj role (zachowaj wszystkie role z nizszych poziomow)"})]}),!t.levelRolesStack&&e.jsxs("label",{className:"flex items-center space-x-2 ml-6",children:[e.jsx("input",{type:"checkbox",checked:t.levelRolesRemoveLower,onChange:n=>C({...t,levelRolesRemoveLower:n.target.checked}),className:"w-5 h-5 text-purple-600 rounded"}),e.jsx("span",{className:"text-gray-700 dark:text-gray-300",children:"Usuwaj role z nizszych poziomow przy awansie"})]})]}),t.levelRoles.length>0&&e.jsx("div",{className:"mb-4 space-y-2",children:t.levelRoles.map(n=>e.jsxs("div",{className:"flex items-center justify-between bg-gray-50 dark:bg-dark-700 p-3 rounded-lg",children:[e.jsxs("div",{children:[e.jsxs("span",{className:"font-bold text-yellow-600 dark:text-yellow-400",children:["Poziom ",n.level]}),e.jsx("span",{className:"mx-2 text-gray-400 dark:text-gray-500",children:"->"}),e.jsxs("span",{className:"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 px-2 py-1 rounded text-sm",children:["@",ee(n.roleId)]})]}),e.jsx("button",{type:"button",onClick:()=>W(n.level),className:"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-300 p-2",children:e.jsx(de,{})})]},n.level))}),e.jsxs("div",{className:"flex gap-2 items-end",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Poziom"}),e.jsx("input",{type:"number",min:"1",value:T,onChange:n=>A(n.target.value),placeholder:"np. 5",className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"Rola"}),e.jsxs("select",{value:I,onChange:n=>l(n.target.value),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"Wybierz role..."}),se.map(n=>e.jsxs("option",{value:n.id,children:["@",n.name]},n.id))]})]}),e.jsxs("button",{type:"button",onClick:h,className:"bg-purple-600 text-white px-4 py-2 rounded-lg hover:bg-purple-700 flex items-center",children:[e.jsx(oe,{className:"mr-1"})," Dodaj"]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-3",children:"Role sa przyznawane automatycznie po osiagnieciu danego poziomu."})]})]}),e.jsx("button",{type:"submit",disabled:j,className:"w-full bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700",children:G(j?"dashboard.saving":"common.saveChanges")})]})}),t.levelingEnabled&&e.jsxs("div",{className:"w-full xl:w-96 space-y-4",children:[e.jsx("h3",{className:"font-bold text-gray-500 dark:text-gray-400 uppercase",children:"Podglad powiadomienia o awansie"}),e.jsx(Je,{message:($=(D=(c=(R=(he=t.levelingMessage)==null?void 0:he.replace(/{user}/g,"@User"))==null?void 0:R.replace(/{username}/g,"User"))==null?void 0:c.replace(/{level}/g,"5"))==null?void 0:D.replace(/{server}/g,"Server Name"))==null?void 0:$.replace(/{totalXp}/g,"3,600"),image:t.levelingImage,titleText:"LEVEL UP!",channelName:F(t.levelingChannelId)||"general"}),e.jsxs("div",{className:"bg-gray-800 dark:bg-dark-700 text-white p-4 rounded-lg border border-gray-700 dark:border-dark-600",children:[e.jsx("h4",{className:"font-bold mb-2",children:"Kalkulator poziomow"}),e.jsxs("div",{className:"text-sm space-y-1 text-gray-300 dark:text-gray-400",children:[e.jsx("p",{children:"XP na poziom = 100 * (poziom+1)^2"}),e.jsxs("p",{children:["Poziom 1: ",e.jsx("span",{className:"text-yellow-400",children:"100 XP"})]}),e.jsxs("p",{children:["Poziom 5: ",e.jsx("span",{className:"text-yellow-400",children:"3,600 XP"})]}),e.jsxs("p",{children:["Poziom 10: ",e.jsx("span",{className:"text-yellow-400",children:"12,100 XP"})]}),e.jsxs("p",{children:["Poziom 20: ",e.jsx("span",{className:"text-yellow-400",children:"44,100 XP"})]})]}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-500 mt-2",children:["Przy ",t.xpRandomEnabled?`${t.xpPerMessageMin}-${t.xpPerMessageMax}`:t.xpPerMessage," XP/wiadomosc i ",t.levelingCooldown,"s cooldown, poziom 10 wymaga ok. ",Math.ceil(12100/(t.xpRandomEnabled?(t.xpPerMessageMin+t.xpPerMessageMax)/2:t.xpPerMessage))," wiadomosci."]})]}),t.xpMultiplierEnabled&&e.jsxs("div",{className:"bg-purple-900/30 text-white p-4 rounded-lg border border-purple-700",children:[e.jsx("h4",{className:"font-bold mb-2 text-purple-300",children:"Aktywne mnozniki"}),e.jsxs("div",{className:"text-sm space-y-1",children:[t.weekendMultiplier>1&&e.jsxs("p",{children:["Weekend: ",e.jsxs("span",{className:"text-purple-400",children:[t.weekendMultiplier,"x"]})]}),t.channelMultipliers.length>0&&e.jsxs("p",{children:["Kanaly: ",e.jsxs("span",{className:"text-purple-400",children:[t.channelMultipliers.length," skonfigurowanych"]})]}),t.roleMultipliers.length>0&&e.jsxs("p",{children:["Role: ",e.jsxs("span",{className:"text-purple-400",children:[t.roleMultipliers.length," skonfigurowanych"]})]})]})]})]})]})}function Fs({guildId:x,channels:f,initialSettings:a,setMessage:o,onSave:m}){var he;const{t:L}=ge(),[G,j]=u.useState(!1),[v,M]=u.useState(!1),[d,t]=u.useState(!1),[C,T]=u.useState(!1),[A,I]=u.useState({statsChannels:{enabled:!1,categoryId:"",categoryName:"ðŸ“Š Statystyki",refreshInterval:10,memberGoal:1e3,channelNames:{members:"CzÅ‚onkowie: {count}",humans:"Ludzie: {count}",boosts:"Boosty: {count}",boostLevel:"Boost: {level}",online:"Online: {count}",bots:"Boty: {count}",roles:"Role: {count}",channels:"KanaÅ‚y: {count}",textChannels:"Tekstowe: {count}",voiceChannels:"GÅ‚osowe: {count}",categories:"Kategorie: {count}",voiceActive:"Na voice: {count}",emojis:"Emoji: {count}",stickers:"Naklejki: {count}",goal:"{count}/{goal} czÅ‚onkÃ³w",date:"ðŸ“… {date}",time:"ðŸ• {time}"},membersChannelId:"",humansChannelId:"",boostsChannelId:"",boostLevelChannelId:"",rolesChannelId:"",channelsChannelId:"",textChannelsChannelId:"",voiceChannelsChannelId:"",categoriesChannelId:"",onlineChannelId:"",voiceActiveChannelId:"",botsChannelId:"",emojisChannelId:"",stickersChannelId:"",goalChannelId:"",dateChannelId:"",timeChannelId:""}}),[l,i]=u.useState({members:!0,humans:!1,boosts:!0,boostLevel:!1,online:!0,bots:!0,roles:!0,channels:!0,textChannels:!1,voiceChannels:!1,categories:!1,voiceActive:!1,emojis:!1,stickers:!1,goal:!1,date:!1,time:!1}),[U,N]=u.useState([]),[E,g]=u.useState({"{members}":"Wszyscy czÅ‚onkowie serwera","{humans}":"Ludzie (bez botÃ³w)","{bots}":"Boty","{online}":"UÅ¼ytkownicy online","{offline}":"UÅ¼ytkownicy offline","{voice}":"UÅ¼ytkownicy na kanaÅ‚ach gÅ‚osowych","{roles}":"Liczba rÃ³l","{channels}":"Wszystkie kanaÅ‚y","{boosts}":"Liczba boostÃ³w","{boostTier}":"Nazwa poziomu boost","{emojis}":"Liczba emoji","{date}":"Aktualna data","{time}":"Aktualny czas"}),[z,P]=u.useState(""),[w,y]=u.useState(!1),[b,S]=u.useState(null),[h,W]=u.useState(""),[q,K]=u.useState(!1);u.useEffect(()=>{if(a!=null&&a.statsChannels){I(c=>({...c,statsChannels:{...c.statsChannels,...a.statsChannels,channelNames:{...c.statsChannels.channelNames,...a.statsChannels.channelNames||{}}}}));const R=a.statsChannels;i({members:!!R.membersChannelId,humans:!!R.humansChannelId,boosts:!!R.boostsChannelId,boostLevel:!!R.boostLevelChannelId,online:!!R.onlineChannelId,bots:!!R.botsChannelId,roles:!!R.rolesChannelId,channels:!!R.channelsChannelId,textChannels:!!R.textChannelsChannelId,voiceChannels:!!R.voiceChannelsChannelId,categories:!!R.categoriesChannelId,voiceActive:!!R.voiceActiveChannelId,emojis:!!R.emojisChannelId,stickers:!!R.stickersChannelId,goal:!!R.goalChannelId,date:!!R.dateChannelId,time:!!R.timeChannelId})}a!=null&&a.customStatsChannels&&N(a.customStatsChannels)},[a]);const te=async()=>{var R;try{const c=await X.getCustomStatsChannels(x);(R=c.data)!=null&&R.data&&(N(c.data.data.channels||[]),c.data.data.availableVariables&&g(c.data.data.availableVariables))}catch{}};u.useEffect(()=>{te()},[x,a]);const p=(R,c)=>{I(D=>({...D,statsChannels:{...D.statsChannels,[R]:c}}))},O=(R,c)=>{I(D=>({...D,statsChannels:{...D.statsChannels,channelNames:{...D.statsChannels.channelNames,[R]:c}}}))},Y=(R,c)=>{i(D=>({...D,[R]:c}))},J=async()=>{var R,c;M(!0);try{const D=Object.entries(l).filter(([$,n])=>n).map(([$,n])=>$);await X.createStatsChannels(x,{categoryName:A.statsChannels.categoryName,channelNames:A.statsChannels.channelNames,enabledChannels:D,refreshInterval:A.statsChannels.refreshInterval}),o({type:"success",text:"KanaÅ‚y statystyk zostaÅ‚y utworzone!"}),m&&m()}catch(D){o({type:"error",text:((c=(R=D.response)==null?void 0:R.data)==null?void 0:c.message)||"Nie udaÅ‚o siÄ™ utworzyÄ‡ kanaÅ‚Ã³w"})}finally{M(!1)}},le=async()=>{if(confirm("Czy na pewno chcesz usunÄ…Ä‡ wszystkie kanaÅ‚y statystyk?")){t(!0);try{await X.deleteStatsChannels(x),o({type:"success",text:"KanaÅ‚y statystyk zostaÅ‚y usuniÄ™te!"}),m&&m()}catch{o({type:"error",text:"Nie udaÅ‚o siÄ™ usunÄ…Ä‡ kanaÅ‚Ã³w"})}finally{t(!1)}}},_=async R=>{R.preventDefault(),j(!0);try{await X.updateGuildSettings(x,A),o({type:"success",text:"Ustawienia zapisane pomyÅ›lnie!"}),m&&m()}catch{o({type:"error",text:"Nie udaÅ‚o siÄ™ zapisaÄ‡ ustawieÅ„"})}finally{j(!1)}},r=async()=>{var c,D,$,n;if(!z.trim()){o({type:"error",text:"WprowadÅº szablon nazwy kanaÅ‚u"});return}if(!Object.keys(E).some(B=>z.includes(B))){o({type:"error",text:"Szablon musi zawieraÄ‡ przynajmniej jednÄ… zmiennÄ…, np. {members}, {online}"});return}y(!0);try{const B=await X.createCustomStatsChannel(x,{nameTemplate:z});(D=(c=B.data)==null?void 0:c.data)!=null&&D.channel&&N(ae=>[...ae,B.data.data.channel]),P(""),o({type:"success",text:"KanaÅ‚ statystyk utworzony!"}),m&&m(),await te()}catch(B){o({type:"error",text:((n=($=B.response)==null?void 0:$.data)==null?void 0:n.message)||"Nie udaÅ‚o siÄ™ utworzyÄ‡ kanaÅ‚u"})}finally{y(!1)}},k=async R=>{var D,$;if(!h.trim()){o({type:"error",text:"WprowadÅº szablon nazwy kanaÅ‚u"});return}if(!Object.keys(E).some(n=>h.includes(n))){o({type:"error",text:"Szablon musi zawieraÄ‡ przynajmniej jednÄ… zmiennÄ…"});return}try{await X.updateCustomStatsChannel(x,R,{nameTemplate:h}),N(n=>n.map(B=>B.id===R?{...B,nameTemplate:h}:B)),S(null),W(""),o({type:"success",text:"KanaÅ‚ zaktualizowany!"})}catch(n){o({type:"error",text:(($=(D=n.response)==null?void 0:D.data)==null?void 0:$.message)||"Nie udaÅ‚o siÄ™ zaktualizowaÄ‡ kanaÅ‚u"})}},F=async R=>{if(confirm("Czy na pewno chcesz usunÄ…Ä‡ ten kanaÅ‚ statystyk?"))try{await X.deleteCustomStatsChannel(x,R),N(c=>c.filter(D=>D.id!==R)),o({type:"success",text:"KanaÅ‚ usuniÄ™ty!"}),m&&m()}catch{o({type:"error",text:"Nie udaÅ‚o siÄ™ usunÄ…Ä‡ kanaÅ‚u"})}},ee=f.filter(R=>R.type===2),se=[{id:"membersChannelId",key:"members",label:"Wszyscy czÅ‚onkowie",icon:na,placeholder:"{count}",category:"members"},{id:"humansChannelId",key:"humans",label:"Ludzie (bez botÃ³w)",icon:es,placeholder:"{count}",category:"members"},{id:"botsChannelId",key:"bots",label:"Boty",icon:we,placeholder:"{count}",category:"members"},{id:"onlineChannelId",key:"online",label:"Online",icon:as,placeholder:"{count}",category:"members"},{id:"voiceActiveChannelId",key:"voiceActive",label:"Na kanaÅ‚ach gÅ‚osowych",icon:Ye,placeholder:"{count}",category:"members"},{id:"goalChannelId",key:"goal",label:"Cel czÅ‚onkÃ³w",icon:ts,placeholder:"{count}/{goal}",category:"members"},{id:"boostsChannelId",key:"boosts",label:"Liczba boostÃ³w",icon:ss,placeholder:"{count}",category:"server"},{id:"boostLevelChannelId",key:"boostLevel",label:"Poziom boost",icon:rs,placeholder:"{level}",category:"server"},{id:"rolesChannelId",key:"roles",label:"Role",icon:me,placeholder:"{count}",category:"server"},{id:"emojisChannelId",key:"emojis",label:"Emoji",icon:Ra,placeholder:"{count}",category:"server"},{id:"stickersChannelId",key:"stickers",label:"Naklejki",icon:ls,placeholder:"{count}",category:"server"},{id:"channelsChannelId",key:"channels",label:"Wszystkie kanaÅ‚y",icon:Ga,placeholder:"{count}",category:"channels"},{id:"textChannelsChannelId",key:"textChannels",label:"KanaÅ‚y tekstowe",icon:ot,placeholder:"{count}",category:"channels"},{id:"voiceChannelsChannelId",key:"voiceChannels",label:"KanaÅ‚y gÅ‚osowe",icon:Ae,placeholder:"{count}",category:"channels"},{id:"categoriesChannelId",key:"categories",label:"Kategorie",icon:Ga,placeholder:"{count}",category:"channels"},{id:"dateChannelId",key:"date",label:"Aktualna data",icon:ns,placeholder:"{date}",category:"time"},{id:"timeChannelId",key:"time",label:"Aktualna godzina",icon:ke,placeholder:"{time}",category:"time"}],ne={members:"CzÅ‚onkowie",server:"Serwer",channels:"KanaÅ‚y",time:"Data i czas"},ie=A.statsChannels.categoryId;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx("span",{className:"p-2 bg-indigo-100 dark:bg-indigo-900/30 text-indigo-600 dark:text-indigo-400 rounded-lg mr-3",children:e.jsx(it,{})}),"KanaÅ‚y Statystyk"]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:"System automatycznie tworzy kategoriÄ™ z kanaÅ‚ami gÅ‚osowymi, ktÃ³re wyÅ›wietlajÄ… statystyki serwera. Nazwy kanaÅ‚Ã³w sÄ… aktualizowane w ustawionym interwale czasowym."}),ie?e.jsxs("form",{onSubmit:_,className:"space-y-6",children:[e.jsxs("div",{className:"bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-green-800 dark:text-green-300 font-medium",children:"KanaÅ‚y statystyk sÄ… aktywne"}),e.jsxs("p",{className:"text-green-600 dark:text-green-400 text-sm",children:["OdÅ›wieÅ¼anie co ",A.statsChannels.refreshInterval||10," minut"]})]}),e.jsxs("label",{className:"flex items-center space-x-2",children:[e.jsx("input",{type:"checkbox",checked:A.statsChannels.enabled,onChange:R=>p("enabled",R.target.checked),className:"w-5 h-5 text-green-600 rounded"}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:"WÅ‚Ä…czone"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"InterwaÅ‚ odÅ›wieÅ¼ania (minuty)"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"range",min:"5",max:"60",value:A.statsChannels.refreshInterval||10,onChange:R=>p("refreshInterval",parseInt(R.target.value)),className:"flex-1"}),e.jsxs("span",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400 w-16 text-center",children:[A.statsChannels.refreshInterval||10," min"]})]})]}),A.statsChannels.goalChannelId&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cel liczby czÅ‚onkÃ³w"}),e.jsx("input",{type:"number",min:"1",value:A.statsChannels.memberGoal||1e3,onChange:R=>p("memberGoal",parseInt(R.target.value)||1e3),className:"w-full max-w-xs border border-gray-300 dark:border-dark-600 rounded-lg p-3 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"np. 1000"})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"text-sm font-medium text-gray-700 dark:text-gray-300 mb-3 flex items-center",children:[e.jsx(Se,{className:"mr-2"})," Edytuj nazwy kanaÅ‚Ã³w"]}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:se.map(R=>{var D;return A.statsChannels[R.id]?e.jsxs("div",{className:"border border-gray-200 dark:border-dark-600 rounded-lg p-4 bg-white dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(R.icon,{className:"text-indigo-500 dark:text-indigo-400 mr-2"}),e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:R.label})]}),e.jsx("input",{type:"text",value:((D=A.statsChannels.channelNames)==null?void 0:D[R.key])||"",onChange:$=>O(R.key,$.target.value),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 text-sm mb-2 bg-white dark:bg-dark-600 text-gray-900 dark:text-white",placeholder:"Format nazwy kanaÅ‚u"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["UÅ¼yj ",e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-1 rounded text-gray-800 dark:text-gray-200",children:R.placeholder})," jako placeholder"]})]},R.id):null})})]}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>T(!C),className:"flex items-center text-sm text-gray-600 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300",children:[e.jsx(Me,{className:"mr-2"}),C?"Ukryj":"PokaÅ¼"," rÄ™czne przypisanie kanaÅ‚Ã³w"]}),C&&e.jsx("div",{className:"mt-4 grid md:grid-cols-2 gap-4",children:se.map(R=>e.jsxs("div",{className:"border border-gray-200 dark:border-dark-600 rounded-lg p-3 bg-white dark:bg-dark-700",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsx(R.icon,{className:"text-indigo-500 dark:text-indigo-400 mr-2"}),e.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-white",children:R.label})]}),e.jsxs("select",{value:A.statsChannels[R.id]||"",onChange:c=>p(R.id,c.target.value),className:"w-full border border-gray-300 dark:border-dark-600 rounded p-2 text-sm bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"",children:"-- WyÅ‚Ä…czony --"}),ee.map(c=>e.jsxs("option",{value:c.id,children:["ðŸ”Š ",c.name]},c.id))]})]},R.id))})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{type:"submit",disabled:G,className:"flex-1 bg-blue-600 text-white py-2 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 dark:disabled:bg-dark-600",children:G?"Zapisywanie...":"Zapisz zmiany"}),e.jsxs("button",{type:"button",onClick:le,disabled:d,className:"px-6 bg-red-600 text-white py-2 rounded-lg hover:bg-red-700 disabled:bg-gray-400 dark:disabled:bg-dark-600 flex items-center space-x-2",children:[e.jsx(de,{}),e.jsx("span",{children:d?"Usuwanie...":"UsuÅ„ kanaÅ‚y"})]})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Nazwa kategorii"}),e.jsx("input",{type:"text",value:A.statsChannels.categoryName,onChange:R=>p("categoryName",R.target.value),className:"w-full border border-gray-300 dark:border-dark-600 rounded-lg p-3 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"ðŸ“Š Statystyki"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"InterwaÅ‚ odÅ›wieÅ¼ania (minuty)"}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"range",min:"5",max:"60",value:A.statsChannels.refreshInterval,onChange:R=>p("refreshInterval",parseInt(R.target.value)),className:"flex-1"}),e.jsxs("span",{className:"text-lg font-bold text-indigo-600 dark:text-indigo-400 w-16 text-center",children:[A.statsChannels.refreshInterval," min"]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Minimalnie 5 minut (limit Discord API)"})]}),l.goal&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Cel liczby czÅ‚onkÃ³w"}),e.jsx("input",{type:"number",min:"1",value:A.statsChannels.memberGoal||1e3,onChange:R=>p("memberGoal",parseInt(R.target.value)||1e3),className:"w-full max-w-xs border border-gray-300 dark:border-dark-600 rounded-lg p-3 bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:"np. 1000"}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:["WyÅ›wietli siÄ™ jako: ",(he=A.statsChannels.channelNames.goal)==null?void 0:he.replace("{count}","150").replace("{goal}",A.statsChannels.memberGoal||1e3)]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-3",children:"Wybierz kanaÅ‚y do utworzenia"}),Object.entries(ne).map(([R,c])=>e.jsxs("div",{className:"mb-4",children:[e.jsxs("h4",{className:"text-sm font-semibold text-gray-600 dark:text-gray-400 mb-2 flex items-center",children:[e.jsx("span",{className:"w-2 h-2 rounded-full bg-indigo-500 mr-2"}),c]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-2",children:se.filter(D=>D.category===R).map(D=>e.jsxs("label",{className:`flex items-center p-3 border rounded-lg cursor-pointer transition-all ${l[D.key]?"border-indigo-500 bg-indigo-50 dark:bg-indigo-900/20 dark:border-indigo-600":"border-gray-200 dark:border-dark-600 hover:border-gray-300 dark:hover:border-dark-500"}`,children:[e.jsx("input",{type:"checkbox",checked:l[D.key],onChange:$=>Y(D.key,$.target.checked),className:"w-4 h-4 text-indigo-600 rounded mr-3"}),e.jsx(D.icon,{className:`mr-2 flex-shrink-0 ${l[D.key]?"text-indigo-500 dark:text-indigo-400":"text-gray-400 dark:text-gray-500"}`}),e.jsx("span",{className:`text-sm ${l[D.key]?"text-gray-800 dark:text-white":"text-gray-500 dark:text-gray-400"}`,children:D.label})]},D.key))})]},R))]}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>T(!C),className:"flex items-center text-sm text-indigo-600 dark:text-indigo-400 hover:text-indigo-700 dark:hover:text-indigo-300",children:[e.jsx(Me,{className:"mr-2"}),C?"Ukryj":"PokaÅ¼"," zaawansowane ustawienia nazw"]}),C&&e.jsxs("div",{className:"mt-4 space-y-3 p-4 bg-gray-50 dark:bg-dark-700 rounded-lg border border-gray-200 dark:border-dark-600",children:[e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:"Dostosuj format nazw kanaÅ‚Ã³w. DostÄ™pne placeholdery:"}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-3",children:[e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-2 py-1 rounded text-xs text-gray-800 dark:text-gray-200",children:"{count}"}),e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-2 py-1 rounded text-xs text-gray-800 dark:text-gray-200",children:"{level}"}),e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-2 py-1 rounded text-xs text-gray-800 dark:text-gray-200",children:"{goal}"}),e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-2 py-1 rounded text-xs text-gray-800 dark:text-gray-200",children:"{date}"}),e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-2 py-1 rounded text-xs text-gray-800 dark:text-gray-200",children:"{time}"})]}),se.filter(R=>l[R.key]).map(R=>e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(R.icon,{className:"text-indigo-500 dark:text-indigo-400 w-5 flex-shrink-0"}),e.jsx("input",{type:"text",value:A.statsChannels.channelNames[R.key],onChange:c=>O(R.key,c.target.value),className:"flex-1 border border-gray-300 dark:border-dark-600 rounded p-2 text-sm bg-white dark:bg-dark-600 text-gray-900 dark:text-white",placeholder:`np. ${R.label}: ${R.placeholder}`})]},R.key))]})]}),e.jsxs("button",{type:"button",onClick:J,disabled:v||Object.values(l).every(R=>!R),className:"w-full bg-green-600 text-white py-3 rounded-lg hover:bg-green-700 disabled:bg-gray-400 dark:disabled:bg-dark-600 flex items-center justify-center space-x-2",children:[e.jsx(oe,{}),e.jsx("span",{children:v?"Tworzenie...":"UtwÃ³rz kanaÅ‚y statystyk"})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white mb-4 flex items-center",children:[e.jsx("span",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-lg mr-3",children:e.jsx(wa,{})}),"WÅ‚asne KanaÅ‚y Statystyk"]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-400 mb-4",children:["TwÃ³rz wÅ‚asne kanaÅ‚y statystyk z dowolnymi kombinacjami zmiennych. Np. ",e.jsxs("code",{className:"bg-gray-200 dark:bg-dark-600 px-2 py-1 rounded text-sm",children:["ðŸ‘¥ Online: ","{online}","/","{members}"]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("button",{type:"button",onClick:()=>K(!q),className:"flex items-center text-sm text-purple-600 dark:text-purple-400 hover:text-purple-700 dark:hover:text-purple-300 mb-2",children:[e.jsx(st,{className:"mr-2"}),q?"Ukryj":"PokaÅ¼"," dostÄ™pne zmienne (",Object.keys(E).length,")"]}),q&&e.jsx("div",{className:"bg-gray-50 dark:bg-dark-700 rounded-lg p-4 border border-gray-200 dark:border-dark-600",children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:Object.entries(E).map(([R,c])=>e.jsxs("div",{className:"group relative",children:[e.jsx("button",{type:"button",onClick:()=>{b?W(D=>D+R):P(D=>D+R)},className:"w-full text-left bg-white dark:bg-dark-600 border border-gray-200 dark:border-dark-500 rounded px-2 py-1.5 text-xs font-mono hover:border-purple-400 dark:hover:border-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 transition-colors",children:R}),e.jsx("div",{className:"absolute bottom-full left-0 mb-1 hidden group-hover:block z-10",children:e.jsx("div",{className:"bg-gray-900 text-white text-xs rounded px-2 py-1 whitespace-nowrap",children:c})})]},R))})})]}),e.jsxs("div",{className:"mb-6 p-4 bg-purple-50 dark:bg-purple-900/20 rounded-lg border border-purple-200 dark:border-purple-800",children:[e.jsxs("h4",{className:"font-medium text-purple-800 dark:text-purple-300 mb-3 flex items-center",children:[e.jsx(oe,{className:"mr-2"})," UtwÃ³rz nowy kanaÅ‚"]}),e.jsxs("div",{className:"flex flex-col md:flex-row gap-3",children:[e.jsx("input",{type:"text",value:z,onChange:R=>P(R.target.value),placeholder:"np. ðŸ‘¥ Online: {online}/{members}",className:"flex-1 border border-purple-300 dark:border-purple-700 rounded-lg p-3 bg-white dark:bg-dark-700 text-gray-900 dark:text-white placeholder-gray-400"}),e.jsxs("button",{type:"button",onClick:r,disabled:w||!z.trim(),className:"px-6 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:bg-gray-400 dark:disabled:bg-dark-600 flex items-center justify-center space-x-2 whitespace-nowrap",children:[e.jsx(oe,{}),e.jsx("span",{children:w?"Tworzenie...":"UtwÃ³rz"})]})]}),e.jsx("p",{className:"text-xs text-purple-600 dark:text-purple-400 mt-2",children:"Kliknij zmiennÄ… powyÅ¼ej, aby jÄ… wstawiÄ‡ do pola"})]}),U.length>0?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-medium text-gray-700 dark:text-gray-300 flex items-center",children:[e.jsx(Ae,{className:"mr-2 text-purple-500"}),"Twoje kanaÅ‚y (",U.length,")"]}),U.map(R=>e.jsx("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-700 rounded-lg border border-gray-200 dark:border-dark-600",children:b===R.id?e.jsxs("div",{className:"flex-1 flex items-center space-x-3",children:[e.jsx("input",{type:"text",value:h,onChange:c=>W(c.target.value),className:"flex-1 border border-gray-300 dark:border-dark-500 rounded p-2 bg-white dark:bg-dark-600 text-gray-900 dark:text-white"}),e.jsx("button",{type:"button",onClick:()=>k(R.id),className:"p-2 text-green-600 hover:bg-green-100 dark:hover:bg-green-900/30 rounded",title:"Zapisz",children:e.jsx(Re,{})}),e.jsx("button",{type:"button",onClick:()=>{S(null),W("")},className:"p-2 text-gray-600 hover:bg-gray-200 dark:hover:bg-dark-600 rounded",title:"Anuluj",children:e.jsx(pe,{})})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(Ae,{className:"text-purple-500"}),e.jsx("code",{className:"bg-gray-200 dark:bg-dark-600 px-3 py-1 rounded text-sm text-gray-800 dark:text-gray-200",children:R.nameTemplate})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("button",{type:"button",onClick:()=>{S(R.id),W(R.nameTemplate)},className:"p-2 text-blue-600 hover:bg-blue-100 dark:hover:bg-blue-900/30 rounded",title:"Edytuj",children:e.jsx(Se,{})}),e.jsx("button",{type:"button",onClick:()=>F(R.id),className:"p-2 text-red-600 hover:bg-red-100 dark:hover:bg-red-900/30 rounded",title:"UsuÅ„",children:e.jsx(de,{})})]})]})},R.id))]}):e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(wa,{className:"mx-auto text-4xl mb-3 opacity-30"}),e.jsx("p",{children:"Nie masz jeszcze Å¼adnych wÅ‚asnych kanaÅ‚Ã³w statystyk."}),e.jsx("p",{className:"text-sm",children:"UÅ¼yj formularza powyÅ¼ej, aby utworzyÄ‡ pierwszy kanaÅ‚."})]})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-dark-700 rounded-xl p-6 border border-blue-200 dark:border-dark-600",children:[e.jsxs("h3",{className:"font-bold mb-3 text-blue-900 dark:text-white flex items-center",children:[e.jsx(Ve,{className:"mr-2"})," Informacje"]}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-blue-800 dark:text-gray-400 text-sm",children:[e.jsx("li",{children:"KanaÅ‚y statystyk to kanaÅ‚y gÅ‚osowe, do ktÃ³rych uÅ¼ytkownicy nie mogÄ… doÅ‚Ä…czyÄ‡"}),e.jsx("li",{children:"Nazwy kanaÅ‚Ã³w sÄ… aktualizowane automatycznie w ustawionym interwale"}),e.jsx("li",{children:"Discord limituje zmiany nazw kanaÅ‚Ã³w - minimalny interwaÅ‚ to 5 minut"}),e.jsx("li",{children:"Dla kanaÅ‚Ã³w daty i godziny uÅ¼ywana jest strefa czasowa Europe/Warsaw"}),e.jsx("li",{children:'Bot musi mieÄ‡ uprawnienie "ZarzÄ…dzaj kanaÅ‚ami" na serwerze'}),e.jsxs("li",{children:[e.jsx("strong",{children:"WÅ‚asne kanaÅ‚y"})," pozwalajÄ… Å‚Ä…czyÄ‡ wiele zmiennych w jednej nazwie"]})]})]})]})}function Ds({guildId:x,channels:f,initialSettings:a,setMessage:o,onSave:m}){var w,y,b;const{t:L}=ge(),[G,j]=u.useState(!1),[v,M]=u.useState(!0),[d,t]=u.useState({inviteLoggingEnabled:!1,inviteLogChannelId:""}),[C,T]=u.useState(null),[A,I]=u.useState([]),[l,i]=u.useState(1),[U,N]=u.useState(1);u.useEffect(()=>{a&&t(S=>({...S,inviteLoggingEnabled:a.inviteLoggingEnabled||!1,inviteLogChannelId:a.inviteLogChannelId||""}))},[a]),u.useEffect(()=>{E()},[x,l]);const E=async()=>{var S,h,W,q,K;M(!0);try{const[te,p]=await Promise.allSettled([Ka.getInviteStats(x),Ka.getInviteLogs(x,{page:l,limit:10})]);te.status==="fulfilled"&&((h=(S=te.value)==null?void 0:S.data)!=null&&h.data)?T(te.value.data.data):T({totalJoins:0,recentJoins:0,joinTypes:{},topInviters:[]}),p.status==="fulfilled"&&Array.isArray((q=(W=p.value)==null?void 0:W.data)==null?void 0:q.data)?(I(p.value.data.data),N(((K=p.value.data.pagination)==null?void 0:K.totalPages)||1)):(I([]),N(1))}catch{T({totalJoins:0,recentJoins:0,joinTypes:{},topInviters:[]}),I([])}finally{M(!1)}},g=async S=>{S.preventDefault(),j(!0);try{await X.updateGuildSettings(x,d),o({type:"success",text:L("dashboard.settingsSaved")}),m&&m()}catch{o({type:"error",text:L("dashboard.settingsSaveFailed")})}finally{j(!1)}},z=S=>S?new Date(S).toLocaleString("pl-PL",{day:"2-digit",month:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",P=S=>{switch(S){case"INVITE":return e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",children:"Zaproszenie"});case"VANITY":return e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300",children:"Vanity URL"});default:return e.jsx("span",{className:"px-2 py-0.5 text-xs rounded bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300",children:"Nieznane"})}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400",children:e.jsx(sa,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Invite Logger"})]}),e.jsx("button",{type:"button",onClick:()=>t({...d,inviteLoggingEnabled:!d.inviteLoggingEnabled}),className:`
              relative inline-flex h-6 w-11 items-center rounded-full
              transition-colors duration-200
              focus:outline-none focus:ring-2 focus:ring-primary-500 focus:ring-offset-2 dark:focus:ring-offset-dark-800
              ${d.inviteLoggingEnabled?"bg-primary-500":"bg-gray-300 dark:bg-dark-600"}
            `,role:"switch","aria-checked":d.inviteLoggingEnabled,children:e.jsx("span",{className:`
                inline-block h-4 w-4 transform rounded-full bg-white shadow-md
                transition-transform duration-200
                ${d.inviteLoggingEnabled?"translate-x-6":"translate-x-1"}
              `})})]}),d.inviteLoggingEnabled&&e.jsxs("form",{onSubmit:g,className:"space-y-4 animate-fade-in",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(me,{className:"inline w-3 h-3 mr-1"}),"Kanal Logow"]}),e.jsxs("select",{value:d.inviteLogChannelId,onChange:S=>t({...d,inviteLogChannelId:S.target.value}),className:"select",children:[e.jsx("option",{value:"",children:"Wybierz kanal..."}),Array.isArray(f)&&f.filter(S=>S.type===0).map(S=>e.jsxs("option",{value:S.id,children:["#",S.name]},S.id))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Logi dolaczen beda wysylane na ten kanal"})]}),e.jsx("button",{type:"submit",disabled:G,className:"btn-primary w-full",children:G?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Zapisywanie..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4"}),"Zapisz Ustawienia"]})})]}),!d.inviteLoggingEnabled&&e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"Wlacz invite logger aby sledzic kto zaprasza uzytkownikow na serwer."})]}),C&&e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-50 dark:bg-green-900/20",children:e.jsx(na,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C.totalJoins}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Lacznie dolaczen"})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-blue-50 dark:bg-blue-900/20",children:e.jsx(ke,{className:"w-5 h-5 text-blue-600 dark:text-blue-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:C.recentJoins}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Ostatnie 7 dni"})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-purple-50 dark:bg-purple-900/20",children:e.jsx(Ea,{className:"w-5 h-5 text-purple-600 dark:text-purple-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((w=C.joinTypes)==null?void 0:w.INVITE)||0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Przez zaproszenie"})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-50 dark:bg-amber-900/20",children:e.jsx(ds,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:((y=C.joinTypes)==null?void 0:y.UNKNOWN)||0}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:"Nieznane"})]})]})})]}),((b=C==null?void 0:C.topInviters)==null?void 0:b.length)>0&&e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("div",{className:"p-2 rounded-lg bg-amber-50 dark:bg-amber-900/20",children:e.jsx(Ze,{className:"w-5 h-5 text-amber-600 dark:text-amber-400"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Top Zapraszajacy"})]}),e.jsx("div",{className:"space-y-2",children:C.topInviters.map((S,h)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`w-6 h-6 flex items-center justify-center rounded-full text-sm font-bold ${h===0?"bg-amber-500 text-white":h===1?"bg-gray-400 text-white":h===2?"bg-amber-700 text-white":"bg-gray-200 dark:bg-dark-600 text-gray-600 dark:text-gray-400"}`,children:h+1}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:S.inviterTag||"Nieznany"})]}),e.jsxs("span",{className:"text-primary-600 dark:text-primary-400 font-bold",children:[S.inviteCount," zaproszen"]})]},S.inviterId))})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-green-50 dark:bg-green-900/20",children:e.jsx(sa,{className:"w-5 h-5 text-green-600 dark:text-green-400"})}),e.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"Ostatnie Dolaczenia"})]}),e.jsx("button",{onClick:E,className:"text-sm text-primary-600 dark:text-primary-400 hover:underline",children:"Odswiez"})]}),v?e.jsx("div",{className:"flex items-center justify-center py-8",children:e.jsx("div",{className:"w-8 h-8 border-4 border-primary-500 border-t-transparent rounded-full animate-spin"})}):A.length===0?e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:"Brak zapisanych dolaczen"}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"text-left text-xs text-gray-500 dark:text-gray-400 uppercase border-b border-gray-200 dark:border-dark-600",children:[e.jsx("th",{className:"pb-3 font-medium",children:"Uzytkownik"}),e.jsx("th",{className:"pb-3 font-medium",children:"Zaproszony przez"}),e.jsx("th",{className:"pb-3 font-medium",children:"Typ"}),e.jsx("th",{className:"pb-3 font-medium",children:"Data"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-dark-700",children:A.map(S=>e.jsxs("tr",{className:"text-sm",children:[e.jsx("td",{className:"py-3",children:e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S.memberTag}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:S.memberId})]})}),e.jsx("td",{className:"py-3",children:S.inviterTag?e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:S.inviterTag}),S.inviteCode&&e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["Kod: ",S.inviteCode]})]}):e.jsx("span",{className:"text-gray-400 dark:text-gray-500",children:"-"})}),e.jsx("td",{className:"py-3",children:P(S.joinType)}),e.jsx("td",{className:"py-3 text-gray-600 dark:text-gray-300",children:z(S.joined_at)})]},S.id))})]})}),U>1&&e.jsxs("div",{className:"flex justify-center gap-2 mt-4",children:[e.jsx("button",{onClick:()=>i(S=>Math.max(1,S-1)),disabled:l===1,className:"px-3 py-1 text-sm rounded bg-gray-100 dark:bg-dark-700 disabled:opacity-50",children:"Poprzednia"}),e.jsxs("span",{className:"px-3 py-1 text-sm text-gray-600 dark:text-gray-400",children:[l," / ",U]}),e.jsx("button",{onClick:()=>i(S=>Math.min(U,S+1)),disabled:l===U,className:"px-3 py-1 text-sm rounded bg-gray-100 dark:bg-dark-700 disabled:opacity-50",children:"Nastepna"})]})]})]})]})}const Ls=[{code:"pl",name:"Polski",flag:"ðŸ‡µðŸ‡±"},{code:"en",name:"English",flag:"ðŸ‡¬ðŸ‡§"},{code:"ru",name:"Ð ÑƒÑÑÐºÐ¸Ð¹",flag:"ðŸ‡·ðŸ‡º"}];function Ws({guildId:x,initialSettings:f,setMessage:a,onSave:o}){const{t:m}=ge(),[L,G]=u.useState(!1),[j,v]=u.useState({botNickname:"",language:"pl"});u.useEffect(()=>{f&&v(d=>({...d,botNickname:f.botNickname||"",language:f.language||"pl"}))},[f]);const M=async d=>{d.preventDefault(),G(!0);try{await X.updateGuildSettings(x,{botNickname:j.botNickname,language:j.language}),a({type:"success",text:m("dashboard.settingsSaved")}),o&&o()}catch{a({type:"error",text:m("dashboard.settingsSaveFailed")})}finally{G(!1)}};return e.jsxs("div",{className:"flex flex-col xl:flex-row gap-6",children:[e.jsx("div",{className:"flex-1 space-y-6",children:e.jsxs("form",{onSubmit:M,className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[e.jsx("div",{className:"p-2 rounded-lg bg-indigo-50 dark:bg-indigo-900/20 text-indigo-600 dark:text-indigo-400",children:e.jsx(we,{className:"w-5 h-5"})}),e.jsx("h2",{className:"text-lg font-bold text-gray-900 dark:text-white",children:m("botCustomization.title")})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(is,{className:"inline w-3 h-3 mr-1"}),m("common.language")]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:Ls.map(d=>e.jsxs("button",{type:"button",onClick:()=>v({...j,language:d.code}),className:`
                        flex items-center justify-center gap-2 p-3 rounded-xl border-2 transition-all
                        ${j.language===d.code?"border-primary-500 bg-primary-50 dark:bg-primary-900/20 text-primary-700 dark:text-primary-300":"border-gray-200 dark:border-dark-600 hover:border-gray-300 dark:hover:border-dark-500 text-gray-700 dark:text-gray-300"}
                      `,children:[e.jsx("span",{className:"text-xl",children:d.flag}),e.jsx("span",{className:"font-medium text-sm",children:d.name})]},d.code))}),e.jsxs("p",{className:"mt-2 text-xs text-gray-500 dark:text-gray-400",children:[m("common.language")," - Bot responses on this server will be in selected language."]})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"label",children:[e.jsx(os,{className:"inline w-3 h-3 mr-1"}),m("botCustomization.nickname")]}),e.jsx("input",{type:"text",value:j.botNickname,onChange:d=>v({...j,botNickname:d.target.value}),placeholder:m("botCustomization.nicknamePlaceholder"),maxLength:32,className:"input"}),e.jsx("p",{className:"mt-1 text-xs text-gray-500 dark:text-gray-400",children:m("botCustomization.nicknameHint")})]})]})]}),e.jsx("button",{type:"submit",disabled:L,className:"btn-primary w-full",children:L?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),m("common.loading")]}):e.jsxs(e.Fragment,{children:[e.jsx(Re,{className:"w-4 h-4"}),m("common.saveChanges")]})})]})}),e.jsx("div",{className:"w-full xl:w-80 space-y-6",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-bold text-gray-500 dark:text-gray-400 uppercase tracking-wider mb-3",children:m("dashboard.preview")}),e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center border-4 border-white dark:border-dark-700 shadow-lg",children:e.jsx(we,{className:"w-10 h-10 text-white"})}),e.jsx("div",{className:"absolute bottom-1 right-1 w-6 h-6 bg-green-500 rounded-full border-4 border-white dark:border-dark-700"})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"text-lg font-bold text-gray-900 dark:text-white",children:j.botNickname||"KiraEvo"}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:"Bot"})]}),e.jsxs("div",{className:"mt-6 w-full bg-gray-100 dark:bg-dark-700 rounded-lg p-4 text-left",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"relative flex-shrink-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-indigo-500 to-purple-600 flex items-center justify-center",children:e.jsx(we,{className:"w-5 h-5 text-white"})}),e.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-3.5 h-3.5 bg-green-500 rounded-full border-2 border-gray-100 dark:border-dark-700"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"font-semibold text-gray-900 dark:text-white truncate",children:j.botNickname||"KiraEvo"}),e.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-[10px] font-medium bg-indigo-500 text-white",children:"BOT"})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:"Dzisiaj o 12:00"})]})]}),e.jsx("div",{className:"mt-3 pl-[52px]",children:e.jsx("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Witaj! Jestem gotowy do pomocy."})})]})]})})]})})]})}const $s=({guildId:x,setMessage:f})=>{const{t:a}=ge(),[o,m]=u.useState([]),[L,G]=u.useState([]),[j,v]=u.useState(!0),[M,d]=u.useState(!1),[t,C]=u.useState(null),[T,A]=u.useState(null),[I,l]=u.useState("general"),[i,U]=u.useState([]),[N,E]=u.useState(null),[g,z]=u.useState(!1),[P,w]=u.useState(!1),[y,b]=u.useState([]),[S,h]=u.useState(""),[W,q]=u.useState(!1),[K,te]=u.useState([]),[p,O]=u.useState(!1),[Y,J]=u.useState(""),le=u.useRef(null),[_,r]=u.useState(!1),[k,F]=u.useState([]),[ee,se]=u.useState(!1),[ne,ie]=u.useState(""),[he,R]=u.useState(null),[c,D]=u.useState(""),[$,n]=u.useState("all"),[B,ae]=u.useState({}),[be,Ge]=u.useState("tree"),[H,ce]=u.useState({name:"",type:0,parentId:"",topic:"",nsfw:!1,rateLimitPerUser:0,userLimit:0,bitrate:64e3,position:0,permissionOverwrites:[]}),Q=(s,V="")=>{const Z=a(s);return typeof Z=="string"?Z:V||s},fe=[{label:Q("channelManagement.permNames.VIEW_CHANNEL"),value:1024n},{label:Q("channelManagement.permNames.SEND_MESSAGES"),value:2048n},{label:Q("channelManagement.permNames.SEND_TTS_MESSAGES"),value:4096n},{label:Q("channelManagement.permNames.MANAGE_MESSAGES"),value:8192n},{label:Q("channelManagement.permNames.EMBED_LINKS"),value:16384n},{label:Q("channelManagement.permNames.ATTACH_FILES"),value:32768n},{label:Q("channelManagement.permNames.READ_MESSAGE_HISTORY"),value:65536n},{label:Q("channelManagement.permNames.MENTION_EVERYONE"),value:131072n},{label:Q("channelManagement.permNames.USE_EXTERNAL_EMOJIS"),value:262144n},{label:Q("channelManagement.permNames.ADD_REACTIONS"),value:64n},{label:Q("channelManagement.permNames.USE_EXTERNAL_STICKERS"),value:137438953472n},{label:Q("channelManagement.permNames.USE_SLASH_COMMANDS"),value:2147483648n},{label:Q("channelManagement.permNames.CREATE_PUBLIC_THREADS"),value:34359738368n},{label:Q("channelManagement.permNames.CREATE_PRIVATE_THREADS"),value:68719476736n},{label:Q("channelManagement.permNames.SEND_MESSAGES_IN_THREADS"),value:274877906944n}],Pe=[{label:Q("channelManagement.permNames.VIEW_CHANNEL"),value:1024n},{label:Q("channelManagement.permNames.CONNECT"),value:1048576n},{label:Q("channelManagement.permNames.SPEAK"),value:2097152n},{label:Q("channelManagement.permNames.STREAM"),value:512n},{label:Q("channelManagement.permNames.MUTE_MEMBERS"),value:4194304n},{label:Q("channelManagement.permNames.DEAFEN_MEMBERS"),value:8388608n},{label:Q("channelManagement.permNames.MOVE_MEMBERS"),value:16777216n},{label:Q("channelManagement.permNames.USE_VAD"),value:33554432n},{label:Q("channelManagement.permNames.PRIORITY_SPEAKER"),value:256n},{label:Q("channelManagement.permNames.USE_SOUNDBOARD"),value:4398046511104n},{label:Q("channelManagement.permNames.USE_EXTERNAL_SOUNDS"),value:35184372088832n}],ia=[{label:Q("channelManagement.permNames.MANAGE_CHANNELS"),value:16n},{label:Q("channelManagement.permNames.MANAGE_PERMISSIONS"),value:268435456n},{label:Q("channelManagement.permNames.MANAGE_WEBHOOKS"),value:536870912n},{label:Q("channelManagement.permNames.CREATE_INSTANT_INVITE"),value:1n}],ut=s=>s===2||s===13?[...ia,...Pe]:s===4?ia:[...ia,...fe],Ie=async()=>{try{const[s,V]=await Promise.all([X.getGuildChannels(x),X.getGuildRoles(x)]);m(s.data.data);const Z=V.data.data;G(Array.isArray(Z)?Z:(Z==null?void 0:Z.roles)||[])}catch{f({type:"error",text:a("dashboard.loadFailed")})}finally{v(!1)}};u.useEffect(()=>{Ie()},[x]),u.useEffect(()=>{const s=V=>{le.current&&!le.current.contains(V.target)&&O(!1)};return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]);const Ta=()=>{ce({name:"",type:0,parentId:"",topic:"",nsfw:!1,rateLimitPerUser:0,userLimit:0,bitrate:64e3,position:0,permissionOverwrites:[]}),l("general")},oa=(s="")=>{C(null),Ta(),ce(V=>({...V,parentId:s})),d(!0)},ca=s=>{C(s),ce({name:s.name,type:s.type,parentId:s.parentId||"",topic:s.topic||"",nsfw:s.nsfw||!1,rateLimitPerUser:s.rateLimitPerUser||0,userLimit:s.userLimit||0,bitrate:s.bitrate||64e3,position:s.position,permissionOverwrites:s.permissionOverwrites||[]}),l("general"),d(!0)},pt=async s=>{try{await X.deleteChannel(x,s),f({type:"success",text:a("channelManagement.deleteSuccess")}),A(null),Ie()}catch{f({type:"error",text:a("channelManagement.deleteError")})}},bt=async()=>{if(confirm(a("channelManagement.confirmBulkDelete")))try{await X.bulkDeleteChannels(x,i),f({type:"success",text:a("channelManagement.deleteSuccess")}),U([]),Ie()}catch{f({type:"error",text:a("channelManagement.deleteError")})}},yt=async s=>{s.preventDefault();try{const V={...H,parentId:H.parentId===""?null:H.parentId};t?(await X.updateChannel(x,t.id,V),f({type:"success",text:a("channelManagement.updateSuccess")})):(await X.createChannel(x,V),f({type:"success",text:a("channelManagement.createSuccess")})),d(!1),Ie()}catch{f({type:"error",text:a("channelManagement.error")})}},Qe=(s,V,Z,re=!1)=>{const xe=[...H.permissionOverwrites];let ye=xe.findIndex(Ne=>Ne.id===s);if(ye===-1&&(Z!=="inherit"||re)&&(xe.push({id:s,type:0,allow:"0",deny:"0"}),ye=xe.length-1),ye!==-1){const Ne={...xe[ye]};let _e=BigInt(Ne.allow),qe=BigInt(Ne.deny);const $e=BigInt(V);re||(Z==="allow"?(_e|=$e,qe&=~$e):Z==="deny"?(qe|=$e,_e&=~$e):(_e&=~$e,qe&=~$e),Ne.allow=_e.toString(),Ne.deny=qe.toString(),_e===0n&&qe===0n?xe.splice(ye,1):xe[ye]=Ne),ce({...H,permissionOverwrites:xe})}},jt=(s,V)=>{const Z=H.permissionOverwrites.find(Ne=>Ne.id===s);if(!Z)return"inherit";const re=BigInt(Z.allow),xe=BigInt(Z.deny),ye=BigInt(V);return(re&ye)===ye?"allow":(xe&ye)===ye?"deny":"inherit"},Aa=async s=>{try{await X.cloneChannel(x,s.id),f({type:"success",text:a("channelManagement.cloneSuccess")}),Ie()}catch{f({type:"error",text:a("channelManagement.error")})}},Pa=async s=>{try{await X.syncChannelPermissions(x,s.id),f({type:"success",text:a("channelManagement.syncSuccess")}),Ie()}catch{f({type:"error",text:a("channelManagement.error")})}},Fa=async s=>{try{await X.archiveChannel(x,s.id),f({type:"success",text:a("channelManagement.archiveSuccess")}),Ie()}catch{f({type:"error",text:a("channelManagement.error")})}},kt=async()=>{r(!0),se(!0);try{const s=await X.listBackups(x);F(s.data.data||[])}catch{f({type:"error",text:a("channelManagement.error")})}finally{se(!1)}},ft=async()=>{try{const s=ne||`Backup ${new Date().toLocaleString()}`;await X.createBackup(x,s),f({type:"success",text:a("channelManagement.backupCreated")||"Backup created!"}),ie("");const V=await X.listBackups(x);F(V.data.data||[])}catch{f({type:"error",text:a("channelManagement.error")})}},vt=async s=>{if(confirm(a("channelManagement.confirmDeleteBackup")||"Delete this backup?"))try{await X.deleteBackup(x,s),F(k.filter(V=>V.id!==s)),f({type:"success",text:a("channelManagement.backupDeleted")||"Backup deleted"})}catch{f({type:"error",text:a("channelManagement.error")})}},Nt=async s=>{if(confirm(a("channelManagement.confirmRestore")||"Restore this backup? This will create new channels and roles.")){R(s);try{await X.restoreBackup(x,s),f({type:"success",text:a("channelManagement.restoreSuccess")}),r(!1),Ie()}catch{f({type:"error",text:a("channelManagement.error")})}finally{R(null)}}},wt=()=>{const s=o.map(V=>V.id);i.length===s.length?U([]):U(s)},Da=async s=>{C(s);try{const V=await X.getChannelWebhooks(x,s.id);b(V.data),w(!0)}catch{f({type:"error",text:a("channelManagement.error")})}},Ct=async()=>{if(S)try{await X.createWebhook(x,t.id,S);const s=await X.getChannelWebhooks(x,t.id);b(s.data),h("")}catch{f({type:"error",text:a("channelManagement.error")})}},St=async s=>{try{await X.deleteWebhook(x,t.id,s),b(y.filter(V=>V.id!==s))}catch{f({type:"error",text:a("channelManagement.error")})}},La=async s=>{C(s);try{const V=await X.getPinnedMessages(x,s.id);te(V.data),q(!0)}catch{f({type:"error",text:a("channelManagement.error")})}},Mt=async s=>{try{await X.unpinMessage(x,t.id,s),te(K.filter(V=>V.id!==s))}catch{f({type:"error",text:a("channelManagement.error")})}},ma=s=>{const V=o.find(re=>re.id===s);if(V&&V.type===4){const re=o.filter(xe=>xe.parentId===s).map(xe=>xe.id);if(i.includes(s))U(i.filter(xe=>xe!==s&&!re.includes(xe)));else{const xe=[...i,s,...re.filter(ye=>!i.includes(ye))];U(xe)}}else i.includes(s)?U(i.filter(re=>re!==s)):U([...i,s])},ue=Array.isArray(o)?o:[],Wa=ue.filter(s=>s&&s.type===4).sort((s,V)=>(s.position||0)-(V.position||0)),Rt=ue.filter(s=>s&&!s.parentId&&s.type!==4).sort((s,V)=>(s.position||0)-(V.position||0)),ve="w-full px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:placeholder-gray-400 dark:text-white dark:focus:ring-primary-500 dark:focus:border-primary-500 transition-colors",ea={total:ue.length,categories:ue.filter(s=>s&&s.type===4).length,text:ue.filter(s=>s&&s.type===0).length,voice:ue.filter(s=>s&&s.type===2).length,announcement:ue.filter(s=>s&&s.type===5).length,forum:ue.filter(s=>s&&s.type===15).length,stage:ue.filter(s=>s&&s.type===13).length},It=s=>{ae(V=>({...V,[s]:!V[s]}))},$a=s=>!(!s||!s.name||c&&!s.name.toLowerCase().includes(c.toLowerCase())||$!=="all"&&($==="text"&&s.type!==0||$==="voice"&&s.type!==2||$==="announcement"&&s.type!==5||$==="forum"&&s.type!==15||$==="stage"&&s.type!==13||$==="category"&&s.type!==4)),Ke=Rt.filter($a),xa=$==="all"||$==="category"?Wa.filter(s=>s&&s.name&&(c?s.name.toLowerCase().includes(c.toLowerCase()):!0)):[],Oa=s=>ue.filter(V=>V&&V.parentId===s).filter($a).sort((V,Z)=>(V.position||0)-(Z.position||0)),Et=[{key:"all",icon:_a,color:"gray"},{key:"text",icon:me,color:"blue"},{key:"voice",icon:Ae,color:"green"},{key:"announcement",icon:ct,color:"yellow"},{key:"forum",icon:mt,color:"purple"},{key:"stage",icon:xt,color:"pink"},{key:"category",icon:ga,color:"orange"}];return j?e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):Array.isArray(o)?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-blue-600 via-indigo-600 to-purple-700 rounded-2xl shadow-xl",children:[e.jsx("div",{className:"absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxnIGZpbGw9IiNmZmYiIGZpbGwtb3BhY2l0eT0iMC4xIj48Y2lyY2xlIGN4PSIzMCIgY3k9IjMwIiByPSIyIi8+PC9nPjwvZz48L3N2Zz4=')] opacity-30"}),e.jsx("div",{className:"relative p-6 md:p-8",children:e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-6",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-4 bg-white/10 backdrop-blur-sm rounded-xl border border-white/20",children:e.jsx(me,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-white",children:a("channelManagement.title")}),e.jsx("p",{className:"text-blue-100 mt-1 text-sm md:text-base",children:a("channelManagement.subtitle")})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-3",children:[e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl px-4 py-3 border border-white/20 min-w-[100px]",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:ea.total}),e.jsx("div",{className:"text-xs text-blue-100 uppercase tracking-wide",children:a("channelManagement.stats.total")||"Total"})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl px-4 py-3 border border-white/20 min-w-[100px]",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:ea.text}),e.jsxs("div",{className:"text-xs text-blue-100 uppercase tracking-wide flex items-center gap-1",children:[e.jsx(me,{className:"w-3 h-3"})," ",a("channelManagement.stats.text")||"Text"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl px-4 py-3 border border-white/20 min-w-[100px]",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:ea.voice}),e.jsxs("div",{className:"text-xs text-blue-100 uppercase tracking-wide flex items-center gap-1",children:[e.jsx(Ae,{className:"w-3 h-3"})," ",a("channelManagement.stats.voice")||"Voice"]})]}),e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-xl px-4 py-3 border border-white/20 min-w-[100px]",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:ea.categories}),e.jsxs("div",{className:"text-xs text-blue-100 uppercase tracking-wide flex items-center gap-1",children:[e.jsx(ga,{className:"w-3 h-3"})," ",a("channelManagement.stats.categories")||"Categories"]})]})]})]})})]}),e.jsxs("div",{className:"card p-4",children:[e.jsxs("div",{className:"flex flex-col lg:flex-row gap-4",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Be,{className:"absolute left-4 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:c,onChange:s=>D(s.target.value),placeholder:a("channelManagement.searchChannels")||"Search channels...",className:"w-full pl-11 pr-4 py-3 text-sm bg-gray-50 border border-gray-200 rounded-xl text-gray-900 focus:ring-2 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-all"})]}),e.jsx("div",{className:"flex items-center gap-1 bg-gray-100 dark:bg-dark-900 p-1 rounded-xl overflow-x-auto",children:Et.map(s=>{const V=s.icon,Z=$===s.key,re={gray:Z?"bg-gray-600 text-white":"text-gray-500 hover:text-gray-700",blue:Z?"bg-blue-500 text-white":"text-blue-500 hover:text-blue-600",green:Z?"bg-green-500 text-white":"text-green-500 hover:text-green-600",yellow:Z?"bg-yellow-500 text-white":"text-yellow-500 hover:text-yellow-600",purple:Z?"bg-purple-500 text-white":"text-purple-500 hover:text-purple-600",pink:Z?"bg-pink-500 text-white":"text-pink-500 hover:text-pink-600",orange:Z?"bg-orange-500 text-white":"text-orange-500 hover:text-orange-600"};return e.jsxs("button",{onClick:()=>n(s.key),className:`flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-all whitespace-nowrap ${re[s.color]} ${Z?"shadow-sm":"hover:bg-gray-200 dark:hover:bg-dark-700"}`,title:a(`channelManagement.filter.${s.key}`)||s.key,children:[e.jsx(V,{className:"w-3.5 h-3.5"}),e.jsx("span",{className:"hidden sm:inline capitalize",children:a(`channelManagement.filter.${s.key}`)||s.key})]},s.key)})})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4 pt-4 border-t border-gray-100 dark:border-dark-700",children:[e.jsxs("button",{onClick:wt,className:"btn-secondary flex items-center gap-2 text-sm",title:a("channelManagement.selectAll")||"Select All",children:[e.jsx(gt,{className:"w-4 h-4"}),e.jsx("span",{children:i.length===ue.length?a("channelManagement.deselectAll")||"Deselect All":a("channelManagement.selectAll")||"Select All"})]}),i.length>0&&e.jsxs("button",{onClick:bt,className:"btn-danger flex items-center gap-2 text-sm",children:[e.jsx(de,{className:"w-3 h-3"})," ",a("channelManagement.bulkDelete")," (",i.length,")"]}),e.jsx("div",{className:"flex-1"}),e.jsxs("button",{onClick:kt,className:"btn-secondary flex items-center gap-2 text-sm",children:[e.jsx(qa,{className:"w-4 h-4"})," ",e.jsx("span",{className:"hidden sm:inline",children:a("channelManagement.backups.title")||"Backups"})]}),e.jsxs("button",{onClick:()=>{C(null),Ta(),ce(s=>({...s,type:4})),d(!0)},className:"btn-secondary flex items-center gap-2 text-sm",children:[e.jsx(Os,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:a("channelManagement.createCategory")})]}),e.jsxs("button",{onClick:()=>oa(),className:"btn-primary flex items-center gap-2 text-sm shadow-lg shadow-primary-500/20",children:[e.jsx(oe,{className:"w-3 h-3"}),a("channelManagement.createChannel")]})]})]}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-dark-900/50 border-b border-gray-100 dark:border-dark-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(_a,{className:"w-4 h-4"}),e.jsx("span",{children:c||$!=="all"?`${Ke.length+xa.reduce((s,V)=>s+Oa(V.id).length,0)} ${a("channelManagement.resultsFound")||"results found"}`:`${ue.length} ${a("channelManagement.channels")||"channels"}`})]}),(c||$!=="all")&&e.jsx("button",{onClick:()=>{D(""),n("all")},className:"text-xs text-primary-500 hover:text-primary-600 font-medium",children:a("channelManagement.clearFilters")||"Clear filters"})]}),e.jsxs("div",{className:"p-4 space-y-2 min-h-[400px]",children:[Ke.length>0&&e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs font-semibold text-gray-400 dark:text-gray-500 uppercase tracking-wider mb-3 px-2",children:[e.jsx(me,{className:"w-3 h-3"}),a("channelManagement.uncategorized")||"Uncategorized",e.jsx("span",{className:"ml-auto bg-gray-200 dark:bg-dark-700 px-2 py-0.5 rounded-full text-[10px]",children:Ke.length})]}),e.jsx("div",{className:"space-y-1",children:Ke.map(s=>e.jsx(Qa,{channel:s,onEdit:ca,onDelete:A,onClone:Aa,onSync:Pa,onArchive:Fa,onWebhooks:Da,onPins:La,selected:i.includes(s.id),toggleSelection:ma,t:a},s.id))})]}),xa.map(s=>{const V=Oa(s.id),Z=B[s.id];return e.jsxs("div",{className:"mb-4",children:[e.jsx(Us,{category:s,onEdit:ca,onDelete:A,onCreateChannel:()=>oa(s.id),channelCount:ue.filter(re=>re&&re.parentId===s.id).length,isCollapsed:Z,onToggleCollapse:()=>It(s.id),selected:i.includes(s.id),toggleSelection:ma,t:a}),!Z&&e.jsxs("div",{className:"mt-1 space-y-1 relative ml-4 pl-4 border-l-2 border-gray-200 dark:border-dark-700",children:[V.map(re=>e.jsx(Qa,{channel:re,onEdit:ca,onDelete:A,onClone:Aa,onSync:Pa,onArchive:Fa,onWebhooks:Da,onPins:La,selected:i.includes(re.id),toggleSelection:ma,isNested:!0,t:a},re.id)),V.length===0&&!c&&$==="all"&&e.jsx("div",{className:"py-3 px-4 text-xs text-gray-400 dark:text-gray-600 italic bg-gray-50 dark:bg-dark-900/30 rounded-lg",children:a("channelManagement.emptyCategory")})]})]},s.id)}),ue.length===0&&e.jsxs("div",{className:"text-center py-20",children:[e.jsx("div",{className:"bg-gradient-to-br from-gray-100 to-gray-50 dark:from-dark-700 dark:to-dark-800 w-24 h-24 rounded-2xl flex items-center justify-center mx-auto mb-6 shadow-inner",children:e.jsx(me,{className:"text-gray-300 dark:text-gray-600 text-4xl"})}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:a("channelManagement.noChannels")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 max-w-md mx-auto",children:a("channelManagement.noChannelsDesc")}),e.jsxs("button",{onClick:()=>oa(),className:"btn-primary mt-6 inline-flex items-center gap-2",children:[e.jsx(oe,{className:"w-3 h-3"}),a("channelManagement.createFirstChannel")||"Create your first channel"]})]}),ue.length>0&&Ke.length===0&&xa.length===0&&e.jsxs("div",{className:"text-center py-16",children:[e.jsx("div",{className:"bg-gray-100 dark:bg-dark-700 w-16 h-16 rounded-xl flex items-center justify-center mx-auto mb-4",children:e.jsx(Be,{className:"text-gray-400 dark:text-gray-500 text-xl"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-white mb-1",children:a("channelManagement.noResults")||"No channels found"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:a("channelManagement.noResultsDesc")||"Try adjusting your search or filters"})]})]})]}),e.jsxs(Le,{isOpen:M,onClose:()=>d(!1),title:a(t?"channelManagement.editChannel":"channelManagement.createChannel"),maxWidth:"max-w-3xl",children:[e.jsxs("div",{className:"flex gap-1 mb-4 sm:mb-6 bg-gray-100 dark:bg-dark-900/50 p-1 rounded-lg",children:[e.jsxs("button",{className:`flex-1 px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${I==="general"?"bg-white dark:bg-dark-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,onClick:()=>l("general"),children:[e.jsx(cs,{className:"inline-block mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:a("channelManagement.tabs.general")}),e.jsx("span",{className:"xs:hidden",children:"General"})]}),e.jsxs("button",{className:`flex-1 px-2 sm:px-4 py-2 text-xs sm:text-sm font-medium rounded-md transition-all duration-200 ${I==="permissions"?"bg-white dark:bg-dark-700 text-primary-600 dark:text-primary-400 shadow-sm":"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-gray-300"}`,onClick:()=>l("permissions"),children:[e.jsx(Ce,{className:"inline-block mr-1 sm:mr-2"}),e.jsx("span",{className:"hidden xs:inline",children:a("channelManagement.tabs.permissions")}),e.jsx("span",{className:"xs:hidden",children:"Perms"})]})]}),e.jsxs("form",{onSubmit:yt,className:"space-y-5",children:[I==="general"&&e.jsxs("div",{className:"space-y-5 animate-fade-in",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(De,{label:a("channelManagement.channelName"),children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",value:H.name,onChange:s=>ce({...H,name:s.target.value}),className:`${ve} pl-10`,placeholder:a("channelManagement.placeholders.name"),required:!0,maxLength:100}),e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 dark:text-gray-500",children:H.type===4?e.jsx(ga,{}):H.type===2?e.jsx(Ae,{}):e.jsx(me,{})})]})}),e.jsx(De,{label:a("channelManagement.channelType"),children:e.jsxs("select",{value:H.type,onChange:s=>ce({...H,type:parseInt(s.target.value)}),className:ve,disabled:!!t,children:[e.jsx("option",{value:0,children:a("channelManagement.typeText")}),e.jsx("option",{value:2,children:a("channelManagement.typeVoice")}),e.jsx("option",{value:4,children:a("channelManagement.typeCategory")}),e.jsx("option",{value:5,children:a("channelManagement.typeAnnouncement")}),e.jsx("option",{value:15,children:a("channelManagement.typeForum")}),e.jsx("option",{value:13,children:a("channelManagement.typeStage")})]})})]}),H.type!==4&&e.jsx(De,{label:a("channelManagement.parentCategory"),children:e.jsxs("select",{value:H.parentId,onChange:s=>ce({...H,parentId:s.target.value}),className:ve,children:[e.jsx("option",{value:"",children:a("channelManagement.noCategory")}),Wa.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))]})}),(H.type===0||H.type===5)&&e.jsxs(e.Fragment,{children:[e.jsx(De,{label:a("channelManagement.channelTopic"),children:e.jsx("textarea",{value:H.topic,onChange:s=>ce({...H,topic:s.target.value}),className:`${ve} min-h-[80px]`,placeholder:a("channelManagement.placeholders.topic"),maxLength:1024})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 items-start",children:[e.jsx(De,{label:a("channelManagement.slowmode"),children:e.jsxs("div",{className:"flex items-center gap-4 bg-gray-50 dark:bg-dark-900 p-3 rounded-lg border border-gray-200 dark:border-dark-700",children:[e.jsx("input",{type:"range",min:"0",max:"21600",step:"5",value:H.rateLimitPerUser,onChange:s=>ce({...H,rateLimitPerUser:parseInt(s.target.value)}),className:"w-full accent-primary-500 h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer dark:bg-dark-700"}),e.jsxs("span",{className:"text-sm font-mono w-16 text-right text-gray-700 dark:text-gray-300",children:[H.rateLimitPerUser,"s"]})]})}),e.jsx("div",{className:"pt-7",children:e.jsxs("label",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-dark-900 rounded-lg border border-gray-200 dark:border-dark-700 cursor-pointer hover:bg-gray-100 dark:hover:bg-dark-800 transition-colors",children:[e.jsx("input",{type:"checkbox",checked:H.nsfw,onChange:s=>ce({...H,nsfw:s.target.checked}),className:"w-5 h-5 rounded border-gray-300 text-primary-600 focus:ring-primary-500 bg-white dark:bg-dark-800 dark:border-dark-600"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white flex items-center gap-2",children:a("channelManagement.nsfw")}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("channelManagement.nsfwDesc")})]})]})})]})]}),(H.type===2||H.type===13)&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(De,{label:a("channelManagement.bitrate"),children:e.jsxs("select",{value:H.bitrate,onChange:s=>ce({...H,bitrate:parseInt(s.target.value)}),className:ve,children:[e.jsx("option",{value:64e3,children:a("channelManagement.bitrateOptions.default")}),e.jsx("option",{value:96e3,children:a("channelManagement.bitrateOptions.good")}),e.jsx("option",{value:128e3,children:a("channelManagement.bitrateOptions.high")}),e.jsx("option",{value:256e3,children:a("channelManagement.bitrateOptions.vip")})]})}),e.jsx(De,{label:a("channelManagement.userLimit"),children:e.jsx("input",{type:"number",min:"0",max:"99",value:H.userLimit,onChange:s=>ce({...H,userLimit:parseInt(s.target.value)}),className:ve,placeholder:a("channelManagement.placeholders.userLimit")})})]})]}),I==="permissions"&&e.jsxs("div",{className:"space-y-4 sm:space-y-6 animate-fade-in min-h-[300px]",children:[e.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 p-3 sm:p-4 rounded-lg border border-yellow-100 dark:border-yellow-900/30 mb-3 sm:mb-4",children:e.jsxs("p",{className:"text-xs sm:text-sm text-yellow-800 dark:text-yellow-300 flex gap-2",children:[e.jsx(He,{className:"flex-shrink-0 mt-0.5 w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:a("channelManagement.permissionsWarning")})]})}),L.map(s=>{const V=H.permissionOverwrites.find(Z=>Z.id===s.id);return s.name!=="@everyone"&&!V?null:e.jsxs("div",{className:"border border-gray-200 dark:border-dark-700 rounded-lg overflow-hidden bg-white dark:bg-dark-800",children:[e.jsxs("div",{className:"bg-gray-50 dark:bg-dark-900/50 px-3 sm:px-4 py-2 sm:py-3 flex items-center justify-between border-b border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:"w-3 h-3 rounded-full shadow-sm flex-shrink-0",style:{backgroundColor:s.color?`#${s.color.toString(16)}`:"#99aab5"}}),e.jsx("span",{className:"font-medium text-sm sm:text-base text-gray-900 dark:text-white truncate",children:s.name})]}),s.name!=="@everyone"&&e.jsx("button",{type:"button",onClick:()=>{const Z=H.permissionOverwrites.filter(re=>re.id!==s.id);ce({...H,permissionOverwrites:Z})},className:"text-xs text-red-500 hover:text-red-600 dark:text-red-400 dark:hover:text-red-300 font-medium flex-shrink-0 ml-2",children:a("common.remove")})]}),e.jsx("div",{className:"p-3 sm:p-4 grid gap-2 sm:gap-3 max-h-80 overflow-y-auto",children:ut(H.type).map(Z=>{const re=jt(s.id,Z.value);return e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 group p-2 sm:p-0 bg-gray-50 sm:bg-transparent dark:bg-dark-900/50 sm:dark:bg-transparent rounded-lg sm:rounded-none",children:[e.jsx("span",{className:"text-xs sm:text-sm text-gray-600 dark:text-gray-300 group-hover:text-gray-900 dark:group-hover:text-white transition-colors",children:Z.label}),e.jsxs("div",{className:"flex bg-gray-100 dark:bg-dark-900 rounded-lg p-1 transition-colors self-end sm:self-auto flex-shrink-0",children:[e.jsx("button",{type:"button",onClick:()=>Qe(s.id,Z.value,"deny"),className:`p-1.5 sm:p-1.5 rounded-md transition-all ${re==="deny"?"bg-red-500 text-white shadow-md":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"}`,children:e.jsx(pe,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"})}),e.jsx("button",{type:"button",onClick:()=>Qe(s.id,Z.value,"inherit"),className:`p-1.5 sm:p-1.5 rounded-md transition-all ${re==="inherit"?"bg-white dark:bg-dark-700 text-gray-600 dark:text-gray-300 shadow-md":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"}`,children:e.jsx(ms,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 transform -rotate-45"})}),e.jsx("button",{type:"button",onClick:()=>Qe(s.id,Z.value,"allow"),className:`p-1.5 sm:p-1.5 rounded-md transition-all ${re==="allow"?"bg-green-500 text-white shadow-md":"text-gray-400 hover:text-gray-600 dark:hover:text-gray-200"}`,children:e.jsx(rt,{className:"w-3 h-3 sm:w-3.5 sm:h-3.5"})})]})]},Z.label)})})]},s.id)}),e.jsxs("div",{className:"mt-4",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:a("channelManagement.addRoleOverride")}),e.jsxs("div",{className:"relative",ref:le,children:[e.jsxs("button",{type:"button",onClick:()=>O(!p),className:`${ve} flex items-center justify-between cursor-pointer`,children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:a("channelManagement.selectRolePlaceholder")}),e.jsx(We,{className:`w-3 h-3 text-gray-400 transition-transform ${p?"rotate-180":""}`})]}),p&&e.jsxs("div",{className:"absolute z-[100] w-full bottom-full mb-1 bg-white dark:bg-dark-800 border border-gray-200 dark:border-dark-600 rounded-lg shadow-xl",children:[e.jsxs("div",{className:"max-h-60 overflow-y-auto",children:[L.filter(s=>s.name!=="@everyone"&&!H.permissionOverwrites.find(V=>V.id===s.id)).filter(s=>s.name.toLowerCase().includes(Y.toLowerCase())).map(s=>{const V=s.color?`#${s.color.toString(16).padStart(6,"0")}`:"#99aab5";return e.jsxs("button",{type:"button",onClick:()=>{Qe(s.id,0n,"inherit",!0),O(!1),J("")},className:"w-full flex items-center gap-3 px-3 py-2.5 hover:bg-gray-50 dark:hover:bg-dark-700 transition-colors text-left",children:[e.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0 shadow-sm",style:{backgroundColor:V}}),e.jsx("span",{className:"text-sm font-medium truncate",style:{color:V},children:s.name})]},s.id)}),L.filter(s=>s.name!=="@everyone"&&!H.permissionOverwrites.find(V=>V.id===s.id)).filter(s=>s.name.toLowerCase().includes(Y.toLowerCase())).length===0&&e.jsx("div",{className:"px-3 py-4 text-sm text-gray-500 dark:text-gray-400 text-center",children:a("channelManagement.noRolesFound")||"No roles found"})]}),e.jsx("div",{className:"p-2 border-t border-gray-100 dark:border-dark-700",children:e.jsxs("div",{className:"relative",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-3 h-3"}),e.jsx("input",{type:"text",value:Y,onChange:s=>J(s.target.value),placeholder:a("channelManagement.searchRoles")||"Search roles...",className:"w-full pl-8 pr-3 py-2 text-sm bg-gray-50 dark:bg-dark-900 border border-gray-200 dark:border-dark-700 rounded-md focus:ring-primary-500 focus:border-primary-500 text-gray-900 dark:text-white",autoFocus:!0})]})})]})]})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-6 border-t border-gray-100 dark:border-dark-700",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"btn-secondary",children:a("common.cancel")}),e.jsx("button",{type:"submit",className:"btn-primary",children:a("common.save")})]})]})]}),T&&e.jsx(Le,{isOpen:!!T,onClose:()=>A(null),title:a("common.confirm"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 bg-red-50 dark:bg-red-900/20 text-red-800 dark:text-red-300 rounded-lg border border-red-100 dark:border-red-900/30",children:[e.jsx(He,{className:"w-6 h-6 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold",children:a("channelManagement.deleteWarningTitle")}),e.jsx("p",{className:"text-sm",children:a("channelManagement.deleteWarningText")})]})]}),e.jsxs("p",{className:"text-gray-600 dark:text-gray-300",children:[a("channelManagement.confirmDelete")," ",e.jsxs("span",{className:"font-bold text-gray-900 dark:text-white",children:["#",T.name]}),"?",T.type===4&&e.jsx("span",{className:"block mt-2 text-sm text-red-500 font-medium",children:a("channelManagement.confirmDeleteCategory")})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-2",children:[e.jsx("button",{onClick:()=>A(null),className:"btn-secondary",children:a("common.cancel")}),e.jsx("button",{onClick:()=>pt(T.id),className:"btn-danger",children:a("common.delete")})]})]})}),e.jsx(Le,{isOpen:P,onClose:()=>w(!1),title:a("channelManagement.webhooks.title"),children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:ve,value:S,onChange:s=>h(s.target.value),placeholder:a("channelManagement.webhooks.namePlaceholder")}),e.jsx("button",{onClick:Ct,className:"btn-primary",children:a("channelManagement.webhooks.create")})]}),e.jsx("div",{className:"space-y-2",children:y.map(s=>e.jsxs("div",{className:"flex justify-between items-center p-2 bg-gray-50 dark:bg-dark-900 rounded",children:[e.jsx("span",{children:s.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:()=>{navigator.clipboard.writeText(s.url),f({type:"success",text:a("channelManagement.webhooks.copied")})},className:"text-gray-500 hover:text-white",children:e.jsx(da,{})}),e.jsx("button",{onClick:()=>St(s.id),className:"text-red-500",children:e.jsx(de,{})})]})]},s.id))})]})}),e.jsx(Le,{isOpen:W,onClose:()=>q(!1),title:a("channelManagement.pins.title"),children:e.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[K.map(s=>e.jsxs("div",{className:"p-3 bg-gray-50 dark:bg-dark-900 rounded border border-gray-200 dark:border-dark-700",children:[e.jsx("p",{className:"text-sm mb-2",children:s.content}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500",children:[e.jsx("span",{children:s.author.username}),e.jsx("button",{onClick:()=>Mt(s.id),className:"text-red-500 hover:underline",children:a("channelManagement.pins.unpin")})]})]},s.id)),K.length===0&&e.jsx("p",{className:"text-center text-gray-500",children:a("channelManagement.pins.empty")})]})}),e.jsx(Le,{isOpen:_,onClose:()=>r(!1),title:a("channelManagement.backups.title")||"Server Backups",maxWidth:"max-w-2xl",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-gradient-to-r from-primary-50 to-indigo-50 dark:from-primary-900/20 dark:to-indigo-900/20 p-4 rounded-xl border border-primary-100 dark:border-primary-800",children:[e.jsxs("h3",{className:"font-bold text-primary-800 dark:text-primary-300 mb-3 flex items-center gap-2",children:[e.jsx(xs,{className:"w-4 h-4"}),a("channelManagement.backups.createNew")||"Create New Backup"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",className:ve,value:ne,onChange:s=>ie(s.target.value),placeholder:a("channelManagement.backups.namePlaceholder")||"Backup name (optional)"}),e.jsxs("button",{onClick:ft,className:"btn-primary flex items-center gap-2 whitespace-nowrap",children:[e.jsx(lt,{className:"w-3 h-3"}),a("channelManagement.backups.create")||"Create"]})]}),e.jsx("p",{className:"text-xs text-primary-600 dark:text-primary-400 mt-2",children:a("channelManagement.backups.createDesc")||"Saves all channels and roles to the server."})]}),e.jsxs("div",{children:[e.jsxs("h3",{className:"font-bold text-gray-700 dark:text-gray-300 mb-3 flex items-center gap-2",children:[e.jsx(gs,{className:"w-4 h-4"}),a("channelManagement.backups.saved")||"Saved Backups"]}),ee?e.jsx("div",{className:"flex justify-center py-8",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):k.length===0?e.jsxs("div",{className:"text-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(qa,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:a("channelManagement.backups.empty")||"No backups yet"})]}):e.jsx("div",{className:"space-y-2 max-h-80 overflow-y-auto",children:k.map(s=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-900 rounded-lg border border-gray-200 dark:border-dark-700 hover:border-primary-300 dark:hover:border-primary-700 transition-colors",children:[e.jsxs("div",{className:"min-w-0 flex-1",children:[e.jsx("h4",{className:"font-semibold text-gray-900 dark:text-white truncate",children:s.name}),e.jsxs("div",{className:"flex flex-wrap gap-3 text-xs text-gray-500 dark:text-gray-400 mt-1",children:[e.jsx("span",{children:new Date(s.timestamp).toLocaleString()}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(me,{className:"w-3 h-3"}),s.channelCount," ",a("channelManagement.backups.channels")||"channels"]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ce,{className:"w-3 h-3"}),s.roleCount," ",a("channelManagement.backups.roles")||"roles"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsxs("button",{onClick:()=>Nt(s.id),disabled:he===s.id,className:"btn-primary py-1.5 px-3 text-sm flex items-center gap-1.5",title:a("channelManagement.backups.restore")||"Restore",children:[he===s.id?e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}):e.jsx(hs,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:a("channelManagement.backups.restore")||"Restore"})]}),e.jsx("button",{onClick:()=>vt(s.id),className:"p-2 text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:a("common.delete"),children:e.jsx(de,{className:"w-3.5 h-3.5"})})]})]},s.id))})]}),e.jsx("div",{className:"pt-2 border-t border-gray-100 dark:border-dark-700",children:e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("channelManagement.backups.note")||"Note: Restoring a backup creates new channels and roles. Existing ones are not deleted."})})]})})]}):e.jsx("div",{className:"flex justify-center items-center h-64",children:e.jsx("p",{className:"text-red-500",children:"Error: Invalid channel data"})})},Os=x=>e.jsx("svg",{stroke:"currentColor",fill:"currentColor",strokeWidth:"0",viewBox:"0 0 640 512",height:"1em",width:"1em",xmlns:"http://www.w3.org/2000/svg",...x,children:e.jsx("path",{d:"M624 208H432c-8.8 0-16 7.2-16 16v32c0 8.8 7.2 16 16 16h192c8.8 0 16-7.2 16-16v-32c0-8.8-7.2-16-16-16zm-400 48c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"})}),Us=({category:x,onEdit:f,onDelete:a,onCreateChannel:o,channelCount:m,isCollapsed:L,onToggleCollapse:G,selected:j,toggleSelection:v,t:M})=>e.jsxs("div",{className:"group flex items-center justify-between p-3 rounded-xl bg-gray-50 dark:bg-dark-900 border border-gray-200 dark:border-dark-700 shadow-sm mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden flex-1",children:[e.jsx("input",{type:"checkbox",checked:j,onChange:()=>v(x.id),className:"rounded border-gray-300 text-primary-600"}),e.jsx("button",{onClick:G,className:"p-1 text-gray-400 hover:bg-gray-200 rounded",children:e.jsx(za,{className:`transition-transform duration-200 ${L?"":"rotate-90"}`})}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ys,{className:"text-orange-500"}),e.jsx("span",{className:"font-bold text-sm dark:text-gray-200",children:x.name}),e.jsx("span",{className:"text-[10px] bg-gray-200 dark:bg-dark-700 px-2 py-0.5 rounded-full",children:m})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("button",{onClick:o,className:"p-2 text-green-500 hover:bg-green-50 rounded",children:e.jsx(oe,{})}),e.jsx("button",{onClick:()=>f(x),className:"p-2 text-primary-500 hover:bg-primary-50 rounded",children:e.jsx(Me,{})}),e.jsx("button",{onClick:()=>a(x),className:"p-2 text-red-500 hover:bg-red-50 rounded",children:e.jsx(de,{})})]})]}),Qa=({channel:x,onEdit:f,onDelete:a,onClone:o,onSync:m,onArchive:L,onWebhooks:G,onPins:j,selected:v,toggleSelection:M,isNested:d,t})=>{const T=(I=>{switch(I){case 2:return Ae;case 5:return ct;case 13:return xt;case 15:return mt;default:return me}})(x.type),A=x.type===0||x.type===5;return e.jsxs("div",{className:`group flex items-center justify-between p-2 rounded-lg border transition-all mb-1 ${v?"bg-primary-50 dark:bg-primary-900/20 border-primary-300 dark:border-primary-700":"bg-white dark:bg-dark-800 border-transparent hover:border-gray-200 dark:hover:border-dark-600"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("input",{type:"checkbox",checked:v,onChange:()=>M(x.id),className:"rounded border-gray-300 dark:border-dark-600"}),e.jsx(T,{className:"text-gray-400 dark:text-gray-500 flex-shrink-0"}),e.jsx("span",{className:"truncate text-sm text-gray-700 dark:text-gray-300",children:x.name}),x.nsfw&&e.jsx("span",{className:"text-[10px] bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400 px-1.5 py-0.5 rounded",children:"NSFW"})]}),e.jsxs("div",{className:"flex items-center gap-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>o(x),className:"p-1.5 text-gray-400 hover:text-blue-500 hover:bg-blue-50 dark:hover:bg-blue-900/20 rounded",title:t("channelManagement.clone")||"Clone",children:e.jsx(da,{size:14})}),x.parentId&&e.jsx("button",{onClick:()=>m(x),className:"p-1.5 text-gray-400 hover:text-green-500 hover:bg-green-50 dark:hover:bg-green-900/20 rounded",title:t("channelManagement.syncPerms")||"Sync Permissions",children:e.jsx(us,{size:14})}),A&&e.jsx("button",{onClick:()=>L(x),className:"p-1.5 text-gray-400 hover:text-yellow-500 hover:bg-yellow-50 dark:hover:bg-yellow-900/20 rounded",title:t("channelManagement.archive")||"Archive",children:e.jsx(ps,{size:14})}),A&&e.jsx("button",{onClick:()=>G(x),className:"p-1.5 text-gray-400 hover:text-purple-500 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded",title:t("channelManagement.webhooks.title")||"Webhooks",children:e.jsx(Te,{size:14})}),A&&e.jsx("button",{onClick:()=>j(x),className:"p-1.5 text-gray-400 hover:text-indigo-500 hover:bg-indigo-50 dark:hover:bg-indigo-900/20 rounded",title:t("channelManagement.pins.title")||"Pins",children:e.jsx(bs,{size:14})}),e.jsx("button",{onClick:()=>f(x),className:"p-1.5 text-gray-400 hover:text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded",title:t("common.edit")||"Edit",children:e.jsx(Se,{size:14})}),e.jsx("button",{onClick:()=>a(x),className:"p-1.5 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded",title:t("common.delete")||"Delete",children:e.jsx(de,{size:14})})]})]})},Bs={ADMINISTRATOR:{value:0x8n,label:"Administrator",description:"Full access to all features",dangerous:!0},MANAGE_GUILD:{value:0x20n,label:"Manage Server",description:"Edit server settings"},MANAGE_ROLES:{value:0x10000000n,label:"Manage Roles",description:"Create and edit roles below this one"},MANAGE_CHANNELS:{value:0x10n,label:"Manage Channels",description:"Create, edit, and delete channels"},KICK_MEMBERS:{value:0x2n,label:"Kick Members",description:"Remove members from the server"},BAN_MEMBERS:{value:0x4n,label:"Ban Members",description:"Permanently ban members"},MANAGE_MESSAGES:{value:0x2000n,label:"Manage Messages",description:"Delete messages and add reactions"},MENTION_EVERYONE:{value:0x20000n,label:"Mention Everyone",description:"Use @everyone and @here"},MUTE_MEMBERS:{value:0x400000n,label:"Mute Members",description:"Mute members in voice channels"},DEAFEN_MEMBERS:{value:0x800000n,label:"Deafen Members",description:"Deafen members in voice channels"},MOVE_MEMBERS:{value:0x1000000n,label:"Move Members",description:"Move members between voice channels"},MANAGE_NICKNAMES:{value:0x8000000n,label:"Manage Nicknames",description:"Change other members nicknames"},MANAGE_WEBHOOKS:{value:0x20000000n,label:"Manage Webhooks",description:"Create, edit, and delete webhooks"},MANAGE_EMOJIS:{value:0x40000000n,label:"Manage Emojis",description:"Add, edit, and remove custom emojis"},VIEW_AUDIT_LOG:{value:0x80n,label:"View Audit Log",description:"View the server audit log"},VIEW_CHANNEL:{value:0x400n,label:"View Channels",description:"View text and voice channels"},SEND_MESSAGES:{value:0x800n,label:"Send Messages",description:"Send messages in text channels"},EMBED_LINKS:{value:0x4000n,label:"Embed Links",description:"Send embedded links"},ATTACH_FILES:{value:0x8000n,label:"Attach Files",description:"Upload files and images"},READ_MESSAGE_HISTORY:{value:0x10000n,label:"Read History",description:"View older messages"},ADD_REACTIONS:{value:0x40n,label:"Add Reactions",description:"Add reactions to messages"},USE_EXTERNAL_EMOJIS:{value:0x40000n,label:"External Emojis",description:"Use emojis from other servers"},CONNECT:{value:0x100000n,label:"Connect",description:"Connect to voice channels"},SPEAK:{value:0x200000n,label:"Speak",description:"Speak in voice channels"},STREAM:{value:0x200n,label:"Video/Stream",description:"Share video or stream"},USE_VAD:{value:0x2000000n,label:"Voice Activity",description:"Use voice activity detection"},PRIORITY_SPEAKER:{value:0x100n,label:"Priority Speaker",description:"Be heard over others"},CREATE_INSTANT_INVITE:{value:0x1n,label:"Create Invite",description:"Create server invites"},CHANGE_NICKNAME:{value:0x4000000n,label:"Change Nickname",description:"Change own nickname"},USE_APPLICATION_COMMANDS:{value:0x80000000n,label:"Use Commands",description:"Use bot slash commands"},MODERATE_MEMBERS:{value:0x10000000000n,label:"Timeout Members",description:"Timeout members"}},Vs=[{name:"Red",value:15158332},{name:"Orange",value:15105570},{name:"Yellow",value:15844367},{name:"Green",value:3066993},{name:"Teal",value:1752220},{name:"Blue",value:3447003},{name:"Purple",value:10181046},{name:"Pink",value:15277667},{name:"Gray",value:9807270},{name:"Dark",value:3426654}],Gs=({guildId:x,setMessage:f})=>{const{t:a}=ge(),[o,m]=u.useState([]),[L,G]=u.useState(!0),[j,v]=u.useState(0),[M,d]=u.useState(!1),[t,C]=u.useState(null),[T,A]=u.useState(null),[I,l]=u.useState([]),[i,U]=u.useState(""),[N,E]=u.useState(!1),[g,z]=u.useState({name:"",color:0,hoist:!1,mentionable:!1,permissions:"0"}),P=(k,F="")=>{const ee=a(k);return typeof ee=="string"?ee:F||k};u.useEffect(()=>{w()},[x]);const w=async()=>{try{G(!0);const k=await X.getGuildRoles(x);m(k.data.data.roles||[]),v(k.data.data.botHighestPosition||0)}catch{f({type:"error",text:P("roleManagement.fetchError","Failed to load roles")})}finally{G(!1)}},y=()=>{z({name:"",color:0,hoist:!1,mentionable:!1,permissions:"0"}),E(!1)},b=()=>{C(null),y(),d(!0)},S=k=>{C(k),z({name:k.name,color:k.color,hoist:k.hoist,mentionable:k.mentionable,permissions:k.permissions||"0"}),d(!0)},h=async k=>{k.preventDefault();try{t?(await X.updateRole(x,t.id,g),f({type:"success",text:P("roleManagement.updateSuccess","Role updated!")})):(await X.createRole(x,g),f({type:"success",text:P("roleManagement.createSuccess","Role created!")})),d(!1),w()}catch{f({type:"error",text:P("roleManagement.error","Operation failed")})}},W=async k=>{try{await X.deleteRole(x,k.id),f({type:"success",text:P("roleManagement.deleteSuccess","Role deleted!")}),A(null),w()}catch{f({type:"error",text:P("roleManagement.deleteError","Failed to delete role")})}},q=async k=>{try{await X.cloneRole(x,k.id),f({type:"success",text:P("roleManagement.cloneSuccess","Role cloned!")}),w()}catch{f({type:"error",text:P("roleManagement.error","Failed to clone role")})}},K=async()=>{if(confirm(P("roleManagement.confirmBulkDelete",`Delete ${I.length} roles?`)))try{await X.bulkDeleteRoles(x,I),f({type:"success",text:P("roleManagement.bulkDeleteSuccess","Roles deleted!")}),l([]),w()}catch{f({type:"error",text:P("roleManagement.error","Failed to delete roles")})}},te=k=>{I.includes(k)?l(I.filter(F=>F!==k)):l([...I,k])},p=()=>{const k=o.filter(F=>F.canManage).map(F=>F.id);I.length===k.length?l([]):l(k)},O=k=>(BigInt(g.permissions)&k)===k,Y=k=>{const F=BigInt(g.permissions),ee=O(k)?F&~k:F|k;z({...g,permissions:ee.toString()})},J=k=>k?"#"+k.toString(16).padStart(6,"0"):"#99AAB5",le=k=>parseInt(k.replace("#",""),16),_=o.filter(k=>i?k.name.toLowerCase().includes(i.toLowerCase()):!0),r="w-full px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:placeholder-gray-400 dark:text-white transition-colors";return L?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"})}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-900 dark:text-white flex items-center gap-2",children:[e.jsx(Ce,{className:"text-primary-500"}),P("roleManagement.title","Role Management")]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mt-1",children:P("roleManagement.description","Manage server roles, permissions, and hierarchy")})]}),e.jsx("div",{className:"flex items-center gap-2 text-sm",children:e.jsxs("span",{className:"px-3 py-1.5 bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300 rounded-full font-medium",children:[o.length," ",P("roleManagement.roles","roles")]})})]}),j===0&&o.length>0&&e.jsx("div",{className:"mt-4 p-4 bg-amber-50 dark:bg-amber-900/20 border border-amber-200 dark:border-amber-800 rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Te,{className:"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-amber-800 dark:text-amber-200",children:P("roleManagement.botNeedsRole","Bot needs a role higher in hierarchy to manage other roles. Please assign a role with Manage Roles permission to the bot.")})]})}),e.jsx("div",{className:"mt-4 flex flex-col sm:flex-row gap-3",children:e.jsxs("div",{className:"relative flex-1",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:P("roleManagement.searchPlaceholder","Search roles..."),value:i,onChange:k=>U(k.target.value),className:`${r} pl-10`})]})}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2 mt-4 pt-4 border-t border-gray-100 dark:border-dark-700",children:[e.jsxs("button",{onClick:p,className:"btn-secondary flex items-center gap-2 text-sm",children:[e.jsx(gt,{className:"w-4 h-4"}),e.jsx("span",{children:I.length>0?P("common.deselectAll","Deselect All"):P("common.selectAll","Select All")})]}),I.length>0&&e.jsxs("button",{onClick:K,className:"btn-danger flex items-center gap-2 text-sm",children:[e.jsx(de,{className:"w-3 h-3"})," ",P("roleManagement.bulkDelete","Delete")," (",I.length,")"]}),e.jsx("div",{className:"flex-1"}),e.jsxs("button",{onClick:b,className:"btn-primary flex items-center gap-2 text-sm shadow-lg shadow-primary-500/20",children:[e.jsx(oe,{className:"w-3 h-3"}),P("roleManagement.createRole","Create Role")]})]})]}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 bg-gray-50 dark:bg-dark-900/50 border-b border-gray-100 dark:border-dark-700 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[e.jsx(Ce,{className:"w-4 h-4"}),e.jsxs("span",{children:[_.length," ",P("roleManagement.rolesFound","roles found")]})]}),e.jsx("span",{className:"text-xs text-gray-400",children:P("roleManagement.hierarchyNote","Roles are sorted by hierarchy (highest first)")})]}),e.jsxs("div",{className:"divide-y divide-gray-100 dark:divide-dark-700",children:[_.map(k=>e.jsx(Ks,{role:k,onEdit:S,onDelete:A,onClone:q,selected:I.includes(k.id),toggleSelection:te,intToHex:J,botHighestPosition:j,t:P},k.id)),_.length===0&&e.jsxs("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:[e.jsx(Ce,{className:"w-12 h-12 mx-auto mb-3 opacity-30"}),e.jsx("p",{children:P("roleManagement.noRoles","No roles found")})]})]})]}),e.jsx(Le,{isOpen:M,onClose:()=>d(!1),title:t?P("roleManagement.editRole","Edit Role"):P("roleManagement.createRole","Create Role"),maxWidth:"max-w-2xl",children:e.jsxs("form",{onSubmit:h,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:P("roleManagement.form.name","Role Name")}),e.jsx("input",{type:"text",value:g.name,onChange:k=>z({...g,name:k.target.value}),className:r,placeholder:"New Role",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:P("roleManagement.form.color","Color")}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"color",value:J(g.color),onChange:k=>z({...g,color:le(k.target.value)}),className:"w-10 h-10 rounded cursor-pointer border-0"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Vs.map(k=>e.jsx("button",{type:"button",onClick:()=>z({...g,color:k.value}),className:`w-6 h-6 rounded-full border-2 transition-transform hover:scale-110 ${g.color===k.value?"border-gray-900 dark:border-white":"border-transparent"}`,style:{backgroundColor:J(k.value)},title:k.name},k.value))})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.hoist,onChange:k=>z({...g,hoist:k.target.checked}),className:"rounded border-gray-300 text-primary-600"}),e.jsx(Ia,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:P("roleManagement.form.hoist","Display separately")})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g.mentionable,onChange:k=>z({...g,mentionable:k.target.checked}),className:"rounded border-gray-300 text-primary-600"}),e.jsx(ht,{className:"w-4 h-4 text-gray-400"}),e.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:P("roleManagement.form.mentionable","Allow mentions")})]})]}),e.jsxs("div",{children:[e.jsxs("button",{type:"button",onClick:()=>E(!N),className:"flex items-center gap-2 text-sm font-medium text-gray-700 dark:text-gray-300 hover:text-primary-500",children:[N?e.jsx(We,{}):e.jsx(za,{}),e.jsx(Te,{className:"w-4 h-4"}),P("roleManagement.form.permissions","Permissions")]}),N&&e.jsx("div",{className:"mt-4 p-4 bg-gray-50 dark:bg-dark-900 rounded-lg max-h-64 overflow-y-auto",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Object.entries(Bs).map(([k,F])=>e.jsxs("label",{className:`flex items-center gap-2 p-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-dark-700 ${F.dangerous?"border border-red-200 dark:border-red-900":""}`,children:[e.jsx("input",{type:"checkbox",checked:O(F.value),onChange:()=>Y(F.value),className:"rounded border-gray-300 text-primary-600"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("span",{className:`text-sm font-medium ${F.dangerous?"text-red-600 dark:text-red-400":"text-gray-700 dark:text-gray-300"}`,children:F.label}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:F.description})]})]},k))})})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-100 dark:border-dark-700",children:[e.jsx("button",{type:"button",onClick:()=>d(!1),className:"btn-secondary",children:P("common.cancel","Cancel")}),e.jsx("button",{type:"submit",className:"btn-primary",children:t?P("common.save","Save"):P("common.create","Create")})]})]})}),e.jsxs(Le,{isOpen:!!T,onClose:()=>A(null),title:P("roleManagement.confirmDelete","Delete Role"),maxWidth:"max-w-md",children:[e.jsxs("div",{className:"text-center py-4",children:[e.jsx("div",{className:"w-16 h-16 mx-auto mb-4 rounded-full bg-red-100 dark:bg-red-900/30 flex items-center justify-center",children:e.jsx(de,{className:"w-8 h-8 text-red-500"})}),e.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:P("roleManagement.deleteWarning","Are you sure you want to delete")}),e.jsx("p",{className:"font-bold text-lg",style:{color:J(T==null?void 0:T.color)},children:T==null?void 0:T.name}),e.jsx("p",{className:"text-sm text-gray-500 mt-2",children:P("roleManagement.deleteNote","This action cannot be undone.")})]}),e.jsxs("div",{className:"flex justify-center gap-3 pt-4",children:[e.jsx("button",{onClick:()=>A(null),className:"btn-secondary",children:P("common.cancel","Cancel")}),e.jsx("button",{onClick:()=>W(T),className:"btn-danger",children:P("common.delete","Delete")})]})]})]})},Ks=({role:x,onEdit:f,onDelete:a,onClone:o,selected:m,toggleSelection:L,intToHex:G,botHighestPosition:j,t:v})=>{const M=x.name==="@everyone",d=x.managed,t=x.canManage;return e.jsxs("div",{className:`group flex items-center justify-between p-4 hover:bg-gray-50 dark:hover:bg-dark-700/50 transition-colors ${t?"":"opacity-60"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 overflow-hidden flex-1",children:[t&&e.jsx("input",{type:"checkbox",checked:m,onChange:()=>L(x.id),className:"rounded border-gray-300 text-primary-600"}),e.jsx("div",{className:"w-4 h-4 rounded-full flex-shrink-0 ring-2 ring-offset-2 ring-offset-white dark:ring-offset-dark-800",style:{backgroundColor:G(x.color),ringColor:G(x.color)}}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-900 dark:text-white truncate",children:x.name}),d&&e.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400 rounded flex items-center gap-1",children:[e.jsx(we,{className:"w-2.5 h-2.5"})," Bot"]}),x.hoist&&e.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded flex items-center gap-1",children:[e.jsx(Ia,{className:"w-2.5 h-2.5"})," Hoisted"]}),x.mentionable&&e.jsxs("span",{className:"px-1.5 py-0.5 text-[10px] font-medium bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400 rounded flex items-center gap-1",children:[e.jsx(ht,{className:"w-2.5 h-2.5"})," Mentionable"]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[e.jsxs("span",{children:["Position: ",x.position]}),!t&&!M&&e.jsxs("span",{className:"text-amber-500 flex items-center gap-1",children:[e.jsx(Te,{className:"w-3 h-3"})," ",v("roleManagement.cannotManage","Cannot manage")]})]})]})]}),t&&e.jsxs("div",{className:"flex items-center gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[e.jsx("button",{onClick:()=>o(x),className:"p-2 text-gray-400 hover:text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",title:v("common.clone","Clone"),children:e.jsx(da,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>f(x),className:"p-2 text-gray-400 hover:text-primary-500 hover:bg-primary-50 dark:hover:bg-primary-900/20 rounded-lg transition-colors",title:v("common.edit","Edit"),children:e.jsx(Me,{className:"w-4 h-4"})}),e.jsx("button",{onClick:()=>a(x),className:"p-2 text-gray-400 hover:text-red-500 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-lg transition-colors",title:v("common.delete","Delete"),children:e.jsx(de,{className:"w-4 h-4"})})]})]})};function _s({guildId:x,channels:f,initialSettings:a,setMessage:o,onSave:m}){const{t:L}=ge(),[G,j]=u.useState(!1),v=(i,U="")=>{const N=L(i);return typeof N=="string"?N:U||i},[M,d]=u.useState({tempVoice:{enabled:!1,creatorChannelId:"",categoryId:"",nameTemplate:"ðŸ”Š KanaÅ‚ {user}",deleteAfterSeconds:30,userLimit:0,bitrate:64e3}});u.useEffect(()=>{a!=null&&a.tempVoice&&d(i=>({...i,tempVoice:{...i.tempVoice,...a.tempVoice}}))},[a]);const t=(i,U)=>{d(N=>({...N,tempVoice:{...N.tempVoice,[i]:U}}))},C=async i=>{i.preventDefault(),j(!0);try{await X.updateGuildSettings(x,M),o({type:"success",text:L("dashboard.settingsSaved")}),m&&m()}catch{o({type:"error",text:L("dashboard.settingsSaveFailed")})}finally{j(!1)}},T=i=>{t("nameTemplate",M.tempVoice.nameTemplate+i)},A=(f||[]).filter(i=>i.type===2),I=(f||[]).filter(i=>i.type===4),l=[{value:32e3,label:"32 kbps"},{value:64e3,label:"64 kbps"},{value:96e3,label:"96 kbps"},{value:128e3,label:"128 kbps"},{value:256e3,label:"256 kbps"},{value:384e3,label:"384 kbps"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("form",{onSubmit:C,children:e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx("span",{className:"p-2 bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400 rounded-lg mr-3",children:e.jsx(Ye,{})}),v("tempVoice.title","Temp Channels")]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:v("tempVoice.description","Automatically create temporary voice channels when users join the creator channel.")}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-700 rounded-lg border border-gray-200 dark:border-dark-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:v("tempVoice.enabled","Temp channels enabled")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:v("tempVoice.enabledDesc","Create temporary voice channels when users join the creator channel")})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:M.tempVoice.enabled,onChange:i=>t("enabled",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-dark-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v("tempVoice.creatorChannel","Creator channel")}),e.jsxs("select",{value:M.tempVoice.creatorChannelId,onChange:i=>t("creatorChannelId",i.target.value),className:"w-full px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-colors",children:[e.jsx("option",{value:"",children:v("tempVoice.selectCreatorChannel","Select creator voice channel...")}),A.map(i=>e.jsxs("option",{value:i.id,children:["ðŸ”Š"," ",i.name]},i.id))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:v("tempVoice.creatorChannelHint","Users join this channel to trigger temp channel creation")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v("tempVoice.category","Category")}),e.jsxs("select",{value:M.tempVoice.categoryId,onChange:i=>t("categoryId",i.target.value),className:"w-full px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-colors",children:[e.jsx("option",{value:"",children:v("tempVoice.selectCategory","Select category...")}),I.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:v("tempVoice.categoryHint","New temp channels will be created in this category")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v("tempVoice.nameTemplate","Channel name template")}),e.jsx("input",{type:"text",value:M.tempVoice.nameTemplate,onChange:i=>t("nameTemplate",i.target.value),className:"w-full px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-colors",placeholder:"ðŸ”Š KanaÅ‚ {user}"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:["{user}","{username}","{count}"].map(i=>e.jsx("button",{type:"button",onClick:()=>T(i),className:"px-3 py-1 text-xs font-mono bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300 rounded-md hover:bg-purple-200 dark:hover:bg-purple-900/50 transition-colors border border-purple-200 dark:border-purple-800",children:i},i))}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:v("tempVoice.nameTemplateHint","{user} = display name, {username} = username, {count} = channel number")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v("tempVoice.deleteAfter","Delete after (seconds)")}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"range",min:"0",max:"300",step:"5",value:M.tempVoice.deleteAfterSeconds,onChange:i=>t("deleteAfterSeconds",parseInt(i.target.value)),className:"flex-1"}),e.jsxs("span",{className:"text-lg font-bold text-purple-600 dark:text-purple-400 w-16 text-center",children:[M.tempVoice.deleteAfterSeconds,"s"]})]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:v("tempVoice.deleteAfterHint","0 = delete immediately when empty, default 30 seconds")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v("tempVoice.userLimit","User limit")}),e.jsx("input",{type:"number",min:"0",max:"99",value:M.tempVoice.userLimit,onChange:i=>t("userLimit",parseInt(i.target.value)||0),className:"w-full max-w-xs px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-colors",placeholder:"0"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:v("tempVoice.userLimitHint","0 = unlimited")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:v("tempVoice.bitrate","Bitrate")}),e.jsx("select",{value:M.tempVoice.bitrate,onChange:i=>t("bitrate",parseInt(i.target.value)),className:"w-full max-w-xs px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-colors",children:l.map(i=>e.jsx("option",{value:i.value,children:i.label},i.value))})]}),e.jsxs("button",{type:"submit",disabled:G,className:"w-full bg-primary-600 text-white py-3 rounded-lg hover:bg-primary-700 disabled:bg-gray-400 dark:disabled:bg-dark-600 flex items-center justify-center space-x-2 transition-colors",children:[e.jsx(Re,{}),e.jsx("span",{children:G?v("dashboard.saving","Saving..."):v("common.saveChanges","Save changes")})]})]})}),e.jsxs("div",{className:"bg-blue-50 dark:bg-dark-700 rounded-xl p-6 border border-blue-200 dark:border-dark-600",children:[e.jsxs("h3",{className:"font-bold mb-3 text-blue-900 dark:text-white flex items-center",children:[e.jsx(Ve,{className:"mr-2"})," ",v("tempVoice.infoTitle","How it works")]}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-blue-800 dark:text-gray-400 text-sm",children:[e.jsx("li",{children:v("tempVoice.info1","Users join the creator channel to get their own temporary voice channel")}),e.jsx("li",{children:v("tempVoice.info2","The bot creates a new voice channel and moves the user into it")}),e.jsx("li",{children:v("tempVoice.info3","When the channel is empty, it is automatically deleted after the configured timeout")}),e.jsx("li",{children:v("tempVoice.info4","The bot needs Manage Channels and Move Members permissions")}),e.jsx("li",{children:v("tempVoice.info5","Created channels inherit permissions from the parent category")})]})]})]})}function et(x){if(!x)return"0:00";const f=Math.floor(x/1e3),a=Math.floor(f/60),o=Math.floor(a/60),m=f%60,L=a%60;return o>0?`${o}:${String(L).padStart(2,"0")}:${String(m).padStart(2,"0")}`:`${L}:${String(m).padStart(2,"0")}`}function qs({guildId:x,voiceChannels:f}){const{t:a}=ge(),o=(_,r="")=>{const k=a(_);return typeof k=="string"?k:r||_},[m,L]=u.useState(null),[G,j]=u.useState([]),[v,M]=u.useState(""),[d,t]=u.useState(""),[C,T]=u.useState(!1),[A,I]=u.useState(""),[l,i]=u.useState(50),[U,N]=u.useState(!1),[E,g]=u.useState(!1),z=u.useRef(null),P=u.useRef(null),w=u.useCallback(async()=>{var _;try{const k=(await Ee.getStatus(x)).data.data;L(k),g(!1),U||i(k.volume??50),k.voiceChannelId&&!v&&M(k.voiceChannelId)}catch(r){((_=r.response)==null?void 0:_.status)===503&&g(!0)}},[x,U,v]),y=u.useCallback(async()=>{var _;try{const r=await Ee.getQueue(x);j(((_=r.data.data)==null?void 0:_.tracks)||[])}catch{}},[x]);u.useEffect(()=>(w(),y(),z.current=setInterval(()=>{document.hidden||(w(),y())},3e3),()=>{z.current&&clearInterval(z.current)}),[w,y]);const b=async()=>{var _,r,k,F;if(!(!d.trim()||!v)){T(!0),I("");try{await Ee.play(x,{query:d.trim(),voiceChannelId:v}),t(""),await w(),await y()}catch(ee){const se=((r=(_=ee.response)==null?void 0:_.data)==null?void 0:r.message)||((F=(k=ee.response)==null?void 0:k.data)==null?void 0:F.error)||"Failed to play track";I(se)}finally{T(!1)}}},S=async()=>{try{await Ee.pause(x),await w()}catch{I("Failed to toggle pause")}},h=async()=>{try{await Ee.skip(x),setTimeout(()=>{w(),y()},500)}catch{I("Failed to skip")}},W=async()=>{try{await Ee.stop(x),setTimeout(()=>{w(),y()},500)}catch{I("Failed to stop")}},q=_=>{const r=parseInt(_);i(r),N(!0),P.current&&clearTimeout(P.current),P.current=setTimeout(async()=>{try{await Ee.setVolume(x,r)}catch{}finally{N(!1)}},300)},K=async _=>{try{await Ee.removeTrack(x,_),await y()}catch{I("Failed to remove track")}},te=_=>{_.key==="Enter"&&b()};m==null||m.playing;const p=m==null?void 0:m.paused,O=m==null?void 0:m.track,Y=(m==null?void 0:m.position)||0,J=(m==null?void 0:m.duration)||0,le=J>0?Math.min(Y/J*100,100):0;return E?e.jsx("div",{className:"card p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(He,{className:"w-8 h-8 mb-3 text-yellow-500"}),e.jsx("p",{className:"font-medium",children:o("music.botOffline","Bot is offline")}),e.jsx("p",{className:"text-sm mt-1",children:o("music.botOfflineDesc","The music bot is not running. Start the bot to use music controls.")})]})}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"card p-6 space-y-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx("span",{className:"p-2 bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 rounded-lg mr-3",children:e.jsx(Ue,{className:"w-4 h-4"})}),o("music.playerTitle","Music Player")]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:o("music.selectVoiceChannelPlayer","Voice Channel")}),e.jsxs("select",{value:v,onChange:_=>M(_.target.value),className:"w-full px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-colors",children:[e.jsx("option",{value:"",children:o("music.chooseVoiceChannel","Select voice channel...")}),(f||[]).map(_=>e.jsx("option",{value:_.id,children:_.name},_.id))]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(Be,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",value:d,onChange:_=>t(_.target.value),onKeyDown:te,placeholder:o("music.searchPlaceholder","Search for a song or paste a URL..."),className:"w-full pl-10 pr-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-colors"})]}),e.jsxs("button",{onClick:b,disabled:!d.trim()||!v||C,className:"px-6 py-2.5 bg-rose-600 text-white rounded-lg hover:bg-rose-700 disabled:bg-gray-400 dark:disabled:bg-dark-600 disabled:cursor-not-allowed flex items-center gap-2 transition-colors font-medium text-sm",title:v?"":o("music.selectVoiceFirst","Select a voice channel first"),children:[C?e.jsx(js,{className:"w-4 h-4 animate-spin"}):e.jsx(Na,{className:"w-3 h-3"}),e.jsx("span",{children:o("music.play","Play")})]})]}),!v&&e.jsx("p",{className:"text-xs text-amber-600 dark:text-amber-400",children:o("music.voiceChannelRequired","You must select a voice channel before playing music.")}),A&&e.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:A})]}),e.jsx("div",{className:"card p-6",children:O?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-4",children:[O.artworkUrl?e.jsx("img",{src:O.artworkUrl,alt:O.title,className:"w-20 h-20 rounded-lg object-cover shadow-md flex-shrink-0"}):e.jsx("div",{className:"w-20 h-20 rounded-lg bg-gradient-to-br from-rose-500 to-purple-600 flex items-center justify-center shadow-md flex-shrink-0",children:e.jsx(Ue,{className:"w-8 h-8 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h4",{className:"font-bold text-gray-900 dark:text-white truncate",children:O.title}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 truncate",children:O.author}),O.requestedBy&&e.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-1",children:[o("music.requestedBy","Requested by"),": ",O.requestedBy]})]})]}),!O.isStream&&e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"w-full h-2 bg-gray-200 dark:bg-dark-600 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-rose-500 to-purple-500 rounded-full transition-all duration-1000",style:{width:`${le}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 dark:text-gray-400",children:[e.jsx("span",{children:et(Y)}),e.jsx("span",{children:O.durationFormatted||et(J)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:S,className:"w-12 h-12 rounded-full bg-rose-600 hover:bg-rose-700 text-white flex items-center justify-center transition-colors shadow-md",children:p?e.jsx(Na,{className:"w-4 h-4 ml-0.5"}):e.jsx(va,{className:"w-4 h-4"})}),e.jsx("button",{onClick:h,className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-dark-600 hover:bg-gray-300 dark:hover:bg-dark-500 text-gray-700 dark:text-gray-300 flex items-center justify-center transition-colors",children:e.jsx(ks,{className:"w-4 h-4"})}),e.jsx("button",{onClick:W,className:"w-10 h-10 rounded-full bg-gray-200 dark:bg-dark-600 hover:bg-gray-300 dark:hover:bg-dark-500 text-gray-700 dark:text-gray-300 flex items-center justify-center transition-colors",children:e.jsx(fs,{className:"w-4 h-4"})})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[l===0?e.jsx(vs,{className:"w-4 h-4 text-gray-400"}):e.jsx(Ae,{className:"w-4 h-4 text-gray-400"}),e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:l,onChange:_=>q(_.target.value),className:"w-24 sm:w-32"}),e.jsxs("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400 w-10 text-right",children:[l,"%"]})]})]})]}):e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 text-gray-500 dark:text-gray-400",children:[e.jsx(Ue,{className:"w-8 h-8 mb-3 opacity-30"}),e.jsx("p",{className:"font-medium",children:o("music.nothingPlaying","Nothing playing")}),e.jsx("p",{className:"text-sm mt-1",children:o("music.searchToPlay","Search for a song above to start playing")})]})}),G.length>0&&e.jsxs("div",{className:"card p-6",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:[o("music.queue","Queue")," (",G.length,")"]}),e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:G.map((_,r)=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-dark-700 rounded-lg group hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx("span",{className:"text-sm font-bold text-gray-400 dark:text-gray-500 w-6 text-center",children:r+1}),_.artworkUrl?e.jsx("img",{src:_.artworkUrl,alt:"",className:"w-10 h-10 rounded object-cover flex-shrink-0"}):e.jsx("div",{className:"w-10 h-10 rounded bg-gradient-to-br from-rose-500 to-purple-600 flex items-center justify-center flex-shrink-0",children:e.jsx(Ue,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:_.title}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 truncate",children:[_.author," - ",_.durationFormatted]})]}),e.jsx("button",{onClick:()=>K(r),className:"p-2 text-gray-400 hover:text-red-500 opacity-0 group-hover:opacity-100 transition-all",title:o("music.removeFromQueue","Remove from queue"),children:e.jsx(de,{className:"w-3 h-3"})})]},r))})]})]})}function Xs({guildId:x,channels:f,roles:a,initialSettings:o,setMessage:m,onSave:L}){const{t:G}=ge(),[j,v]=u.useState(!1),M=(i,U="")=>{const N=G(i);return typeof N=="string"?N:U||i},[d,t]=u.useState({music:{enabled:!1,twentyFourSeven:!1,voiceChannelId:"",requestChannelId:"",defaultVolume:50,djRoleId:"",maxQueueSize:100,announceNowPlaying:!0,defaultPlaylist:""}});u.useEffect(()=>{o!=null&&o.music&&t(i=>({...i,music:{...i.music,...o.music}}))},[o]);const C=(i,U)=>{t(N=>({...N,music:{...N.music,[i]:U}}))},T=async i=>{i.preventDefault(),v(!0);try{await X.updateGuildSettings(x,d),m({type:"success",text:G("dashboard.settingsSaved")}),L&&L()}catch{m({type:"error",text:G("dashboard.settingsSaveFailed")})}finally{v(!1)}},A=(f||[]).filter(i=>i.type===2),I=(f||[]).filter(i=>i.type===0),l=(a||[]).filter(i=>i.name!=="@everyone");return e.jsxs("div",{className:"space-y-6",children:[e.jsx("form",{onSubmit:T,children:e.jsxs("div",{className:"card p-6 space-y-6",children:[e.jsxs("h2",{className:"text-xl font-bold text-gray-800 dark:text-white flex items-center",children:[e.jsx("span",{className:"p-2 bg-rose-100 dark:bg-rose-900/30 text-rose-600 dark:text-rose-400 rounded-lg mr-3",children:e.jsx(Ue,{})}),M("music.title","Music")]}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:M("music.description","Configure the music bot and 24/7 mode")}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-700 rounded-lg border border-gray-200 dark:border-dark-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:M("music.enabled","Music system enabled")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:M("music.enabledDesc","Enable music module with text channel requests")})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.music.enabled,onChange:i=>C("enabled",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-dark-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-700 rounded-lg border border-gray-200 dark:border-dark-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:M("music.twentyFourSeven","24/7 Mode")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:M("music.twentyFourSevenDesc","Bot stays in voice channel and waits for requests")})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.music.twentyFourSeven,onChange:i=>C("twentyFourSeven",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-dark-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:M("music.voiceChannel","Voice Channel")}),e.jsxs("select",{value:d.music.voiceChannelId,onChange:i=>C("voiceChannelId",i.target.value),className:"w-full px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-colors",children:[e.jsx("option",{value:"",children:M("music.selectVoiceChannel","Select voice channel...")}),A.map(i=>e.jsxs("option",{value:i.id,children:["ðŸ”Š"," ",i.name]},i.id))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:M("music.voiceChannelHint","Voice channel where the bot will play music")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:M("music.requestChannel","Request Channel")}),e.jsxs("select",{value:d.music.requestChannelId,onChange:i=>C("requestChannelId",i.target.value),className:"w-full px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-colors",children:[e.jsx("option",{value:"",children:M("music.selectRequestChannel","Select text channel for requests...")}),I.map(i=>e.jsxs("option",{value:i.id,children:["# ",i.name]},i.id))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:M("music.requestChannelDesc","Text channel where users type song names")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:M("music.defaultVolume","Default Volume")}),e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:d.music.defaultVolume,onChange:i=>C("defaultVolume",parseInt(i.target.value)),className:"flex-1"}),e.jsxs("span",{className:"text-lg font-bold text-rose-600 dark:text-rose-400 w-16 text-center",children:[d.music.defaultVolume,"%"]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:M("music.djRole","DJ Role")}),e.jsxs("select",{value:d.music.djRoleId,onChange:i=>C("djRoleId",i.target.value),className:"w-full px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-colors",children:[e.jsx("option",{value:"",children:M("music.noDjRole","No DJ role (everyone can control)")}),l.map(i=>e.jsx("option",{value:i.id,children:i.name},i.id))]}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:M("music.djRoleDesc","Role that can control playback (skip, stop). Empty = everyone")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:M("music.maxQueueSize","Max songs in queue")}),e.jsx("input",{type:"number",min:"1",max:"500",value:d.music.maxQueueSize,onChange:i=>C("maxQueueSize",parseInt(i.target.value)||100),className:"w-full max-w-xs px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-colors",placeholder:"100"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 dark:bg-dark-700 rounded-lg border border-gray-200 dark:border-dark-600",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium text-gray-800 dark:text-white",children:M("music.announceNowPlaying","Announce now playing")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:M("music.announceNowPlayingDesc","Send embed with currently playing track info")})]}),e.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:d.music.announceNowPlaying,onChange:i=>C("announceNowPlaying",i.target.checked),className:"sr-only peer"}),e.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-primary-300 dark:peer-focus:ring-primary-800 rounded-full peer dark:bg-dark-600 peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all dark:border-gray-600 peer-checked:bg-primary-600"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:M("music.defaultPlaylist","Default Playlist")}),e.jsx("input",{type:"text",value:d.music.defaultPlaylist,onChange:i=>C("defaultPlaylist",i.target.value),className:"w-full px-4 py-2.5 text-sm bg-gray-50 border border-gray-300 rounded-lg text-gray-900 focus:ring-primary-500 focus:border-primary-500 dark:bg-dark-900 dark:border-dark-700 dark:text-white transition-colors",placeholder:M("music.defaultPlaylistPlaceholder","https://www.youtube.com/playlist?list=...")}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:M("music.defaultPlaylistDesc","Playlist URL (YouTube/Spotify) played when no requests in 24/7 mode")})]}),e.jsxs("button",{type:"submit",disabled:j,className:"w-full bg-primary-600 text-white py-3 rounded-lg hover:bg-primary-700 disabled:bg-gray-400 dark:disabled:bg-dark-600 flex items-center justify-center space-x-2 transition-colors",children:[e.jsx(Re,{}),e.jsx("span",{children:j?M("dashboard.saving","Saving..."):M("common.saveChanges","Save changes")})]})]})}),e.jsxs("div",{className:"bg-blue-50 dark:bg-dark-700 rounded-xl p-6 border border-blue-200 dark:border-dark-600",children:[e.jsxs("h3",{className:"font-bold mb-3 text-blue-900 dark:text-white flex items-center",children:[e.jsx(Ve,{className:"mr-2"})," ",M("music.infoTitle","How it works")]}),e.jsxs("ul",{className:"list-disc list-inside space-y-2 text-blue-800 dark:text-gray-400 text-sm",children:[e.jsx("li",{children:M("music.info1","Set up the request channel - users type song names there to queue music")}),e.jsx("li",{children:M("music.info2","Bot searches YouTube, Spotify, and SoundCloud for the song")}),e.jsx("li",{children:M("music.info3","In 24/7 mode, bot stays in the voice channel even when the queue is empty")}),e.jsx("li",{children:M("music.info4","Default playlist plays automatically when there are no user requests (24/7)")}),e.jsx("li",{children:M("music.info5","Bot needs Connect and Speak permissions in the voice channel")})]})]}),d.music.enabled&&e.jsx(qs,{guildId:x,voiceChannels:A})]})}const ba=[{id:"main",labelKey:"dashboard.categories.main",icon:ws,tabs:[{id:"overview",labelKey:"dashboard.overview",icon:Ca,color:"text-blue-500",bg:"bg-blue-500/10"},{id:"bot-customization",labelKey:"dashboard.botCustomization",icon:we,color:"text-purple-500",bg:"bg-purple-500/10"}]},{id:"management",labelKey:"dashboard.categories.management",icon:Me,tabs:[{id:"channel-management",labelKey:"channelManagement.title",icon:me,color:"text-gray-500",bg:"bg-gray-500/10"},{id:"role-management",labelKey:"roleManagement.title",icon:Ma,color:"text-amber-500",bg:"bg-amber-500/10"},{id:"automod",labelKey:"dashboard.automod",icon:Ce,color:"text-red-500",bg:"bg-red-500/10"}]},{id:"engagement",labelKey:"dashboard.categories.engagement",icon:wa,tabs:[{id:"join-leave",labelKey:"dashboard.joinLeave",icon:ya,color:"text-green-500",bg:"bg-green-500/10"},{id:"invite-logger",labelKey:"dashboard.inviteLogger",icon:sa,color:"text-cyan-500",bg:"bg-cyan-500/10"},{id:"leveling",labelKey:"dashboard.leveling",icon:Ze,color:"text-yellow-500",bg:"bg-yellow-500/10"},{id:"giveaways",labelKey:"dashboard.giveaways",icon:Oe,color:"text-pink-500",bg:"bg-pink-500/10"},{id:"music",labelKey:"dashboard.music",icon:Ue,color:"text-rose-500",bg:"bg-rose-500/10"}]},{id:"utilities",labelKey:"dashboard.categories.utilities",icon:ot,tabs:[{id:"embed-creator",labelKey:"dashboard.embedCreator",icon:ra,color:"text-indigo-500",bg:"bg-indigo-500/10"},{id:"reaction-roles",labelKey:"dashboard.reactionRoles",icon:Cs,color:"text-orange-500",bg:"bg-orange-500/10"},{id:"tickets",labelKey:"dashboard.tickets",icon:nt,color:"text-emerald-500",bg:"bg-emerald-500/10"},{id:"custom-commands",labelKey:"dashboard.customCommands",icon:dt,color:"text-violet-500",bg:"bg-violet-500/10"},{id:"stats-channels",labelKey:"dashboard.statsChannels",icon:it,color:"text-teal-500",bg:"bg-teal-500/10"},{id:"temp-voice",labelKey:"dashboard.tempVoice",icon:Ye,color:"text-fuchsia-500",bg:"bg-fuchsia-500/10"}]}];function ar(){var y;const{guildId:x}=at(),f=At(),{t:a}=ge(),[o,m]=u.useState(null),[L,G]=u.useState([]),[j,v]=u.useState([]),[M,d]=u.useState(!0),[t,C]=u.useState({type:"",text:""}),[T,A]=u.useState("overview"),[I,l]=u.useState(!1),[i,U]=u.useState(["main","management","engagement","utilities"]),N=b=>{U(S=>S.includes(b)?S.filter(h=>h!==b):[...S,b])},E=()=>ba.flatMap(b=>b.tabs).map(b=>({...b,label:a(b.labelKey)})),g=()=>E().find(S=>S.id===T),z=async()=>{try{const b=await X.getGuildDetails(x);m(b.data.data)}catch{}};if(u.useEffect(()=>{(async()=>{try{d(!0);const[S,h,W]=await Promise.all([X.getGuildDetails(x),X.getGuildChannels(x),X.getGuildRoles(x)]);m(S.data.data),G(h.data.data);const q=W.data.data;v(Array.isArray(q)?q:(q==null?void 0:q.roles)||[])}catch{C({type:"error",text:a("dashboard.settingsSaveFailed")})}finally{d(!1)}})()},[x]),u.useEffect(()=>{if(t.text){const b=setTimeout(()=>C({type:"",text:""}),5e3);return()=>clearTimeout(b)}},[t]),M)return e.jsx("div",{className:"flex items-center justify-center min-h-[60vh]",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-16 h-16 border-4 border-primary-200 dark:border-primary-900 rounded-full"}),e.jsx("div",{className:"w-16 h-16 border-4 border-primary-500 border-t-transparent rounded-full animate-spin absolute top-0 left-0"})]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 font-medium",children:a("dashboard.loadingServer")})]})});if(!o)return e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[60vh] gap-6",children:[e.jsx("div",{className:"w-24 h-24 rounded-full bg-gradient-to-br from-gray-100 to-gray-200 dark:from-dark-700 dark:to-dark-800 flex items-center justify-center shadow-inner",children:e.jsx(Ca,{className:"w-10 h-10 text-gray-400"})}),e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white mb-2",children:a("dashboard.serverNotFound")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a("dashboard.serverNotFoundDesc")||"The server you are looking for does not exist or you do not have access."})]}),e.jsxs("button",{onClick:()=>f("/servers"),className:"btn-primary flex items-center gap-2",children:[e.jsx(Xa,{className:"w-4 h-4"}),a("dashboard.backToServers")]})]});const P=()=>{var b;switch(T){case"overview":return e.jsx(Ha,{guild:o,channels:L,roles:j,onSave:z});case"channel-management":return e.jsx($s,{guildId:x,setMessage:C});case"role-management":return e.jsx(Gs,{guildId:x,setMessage:C});case"bot-customization":return e.jsx(Ws,{guildId:x,initialSettings:o.settings,setMessage:C,onSave:z});case"join-leave":return e.jsx(Ms,{guildId:x,channels:L,initialSettings:o.settings,setMessage:C,onSave:z});case"invite-logger":return e.jsx(Ds,{guildId:x,channels:L,initialSettings:o.settings,setMessage:C,onSave:z});case"automod":return e.jsx(Rs,{guildId:x,initialSettings:o.settings,setMessage:C,onSave:z});case"embed-creator":return e.jsx(Es,{guildId:x,channels:L,setMessage:C});case"reaction-roles":return e.jsx(Is,{guildId:x,channels:L,roles:j,initialPanels:(b=o.settings)==null?void 0:b.reactionRoles,setMessage:C,onUpdate:z});case"tickets":return e.jsx(zs,{});case"custom-commands":return e.jsx(Ts,{guildId:x,setMessage:C});case"giveaways":return e.jsx(As,{guildId:x,channels:L,roles:j});case"leveling":return e.jsx(Ps,{guildId:x,channels:L,roles:j,initialSettings:o.settings,setMessage:C,onSave:z});case"stats-channels":return e.jsx(Fs,{guildId:x,channels:L,initialSettings:o.settings,setMessage:C,onSave:z});case"temp-voice":return e.jsx(_s,{guildId:x,channels:L,initialSettings:o.settings,setMessage:C,onSave:z});case"music":return e.jsx(Xs,{guildId:x,channels:L,roles:j,initialSettings:o.settings,setMessage:C,onSave:z});default:return e.jsx(Ha,{guild:o,channels:L,roles:j,onSave:z})}},w=g();return e.jsxs("div",{className:"min-h-screen",children:[e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-0 h-32 sm:h-40 bg-gradient-to-r from-primary-600 via-primary-500 to-indigo-600 rounded-2xl overflow-hidden",children:o.banner?e.jsx("img",{src:`https://cdn.discordapp.com/banners/${o.id}/${o.banner}.png?size=1024`,alt:"",className:"w-full h-full object-cover opacity-50"}):e.jsxs("div",{className:"absolute inset-0 opacity-30",children:[e.jsx("div",{className:"absolute top-4 left-10 w-20 h-20 bg-white/10 rounded-full blur-2xl"}),e.jsx("div",{className:"absolute bottom-4 right-20 w-32 h-32 bg-white/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-10 right-10 w-16 h-16 bg-white/5 rounded-full blur-xl"})]})}),e.jsxs("div",{className:"relative pt-6 sm:pt-8 px-4 sm:px-6",children:[e.jsxs("button",{onClick:()=>f("/servers"),className:"inline-flex items-center gap-2 text-white/80 hover:text-white transition-colors font-medium text-sm mb-4",children:[e.jsx(Xa,{className:"w-3 h-3"}),e.jsx("span",{children:a("common.back")})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4 pb-4",children:[e.jsxs("div",{className:"relative",children:[o.icon?e.jsx("img",{src:`https://cdn.discordapp.com/icons/${o.id}/${o.icon}.png?size=128`,alt:o.name,className:"w-20 h-20 sm:w-24 sm:h-24 rounded-2xl shadow-xl border-4 border-white dark:border-dark-800 bg-white dark:bg-dark-800"}):e.jsx("div",{className:"w-20 h-20 sm:w-24 sm:h-24 rounded-2xl shadow-xl border-4 border-white dark:border-dark-800 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-dark-700 dark:to-dark-800 flex items-center justify-center",children:e.jsx(Ca,{className:"w-8 h-8 sm:w-10 sm:h-10 text-gray-400"})}),o.premiumTier>0&&e.jsx("div",{className:"absolute -bottom-1 -right-1 w-7 h-7 bg-gradient-to-r from-pink-500 to-purple-500 rounded-lg flex items-center justify-center shadow-lg",children:e.jsx(Ma,{className:"w-3.5 h-3.5 text-white"})})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("h1",{className:"text-xl sm:text-2xl font-bold text-white truncate drop-shadow-md",children:o.name}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-white/80 text-sm",children:[e.jsx(na,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[((y=o.memberCount)==null?void 0:y.toLocaleString())||"0"," ",a("dashboard.members")||"members"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-white/80 text-sm",children:[e.jsx(me,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[L.length," ",a("dashboard.channels")||"channels"]})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-white/80 text-sm",children:[e.jsx(Ce,{className:"w-3.5 h-3.5"}),e.jsxs("span",{children:[j.length," ",a("dashboard.roles")||"roles"]})]})]})]})]})]})]}),t.text&&e.jsxs("div",{className:`
            fixed bottom-6 right-6 z-50 max-w-md
            flex items-center gap-3 p-4 rounded-xl shadow-2xl
            animate-slide-up backdrop-blur-sm
            ${t.type==="success"?"bg-green-50/95 dark:bg-green-900/80 text-green-800 dark:text-green-200 border border-green-200 dark:border-green-700":t.type==="warning"?"bg-yellow-50/95 dark:bg-yellow-900/80 text-yellow-800 dark:text-yellow-200 border border-yellow-200 dark:border-yellow-700":"bg-red-50/95 dark:bg-red-900/80 text-red-800 dark:text-red-200 border border-red-200 dark:border-red-700"}
          `,children:[t.type==="success"?e.jsx("div",{className:"w-8 h-8 rounded-full bg-green-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(Ns,{className:"w-4 h-4 text-green-600 dark:text-green-400"})}):e.jsx("div",{className:"w-8 h-8 rounded-full bg-red-500/20 flex items-center justify-center flex-shrink-0",children:e.jsx(tt,{className:"w-4 h-4 text-red-600 dark:text-red-400"})}),e.jsx("p",{className:"text-sm font-medium flex-1",children:t.text}),e.jsx("button",{onClick:()=>C({type:"",text:""}),className:"p-1 hover:bg-black/10 rounded-lg transition-colors",children:e.jsx(pe,{className:"w-3 h-3"})})]}),e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[e.jsx("div",{className:"w-full lg:w-72 flex-shrink-0",children:e.jsxs("div",{className:"card overflow-hidden lg:sticky lg:top-6",children:[e.jsxs("div",{className:"lg:hidden",children:[e.jsxs("button",{onClick:()=>l(!I),className:"w-full flex items-center justify-between gap-3 p-4 bg-gradient-to-r from-primary-50 to-indigo-50 dark:from-primary-900/30 dark:to-indigo-900/30 text-primary-700 dark:text-primary-300",children:[e.jsx("div",{className:"flex items-center gap-3",children:w&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:`w-8 h-8 rounded-lg ${w.bg} flex items-center justify-center`,children:e.jsx(w.icon,{className:`w-4 h-4 ${w.color}`})}),e.jsx("span",{className:"font-semibold",children:w.label})]})}),e.jsx(We,{className:`w-4 h-4 transition-transform duration-200 ${I?"rotate-180":""}`})]}),I&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"fixed inset-0 bg-black/20 backdrop-blur-sm z-10",onClick:()=>l(!1)}),e.jsx("div",{className:"absolute left-4 right-4 mt-2 bg-white dark:bg-dark-800 rounded-xl shadow-2xl border border-gray-100 dark:border-dark-700 py-2 z-20 max-h-[70vh] overflow-y-auto",children:ba.map(b=>e.jsxs("div",{children:[e.jsx("div",{className:"px-4 py-2 text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider",children:a(b.labelKey)||b.id}),b.tabs.map(S=>{const h=T===S.id;return e.jsxs("button",{onClick:()=>{A(S.id),l(!1)},className:`
                                w-full flex items-center gap-3 px-4 py-3
                                transition-all duration-200
                                ${h?"bg-primary-50 dark:bg-primary-900/30":"hover:bg-gray-50 dark:hover:bg-dark-700"}
                              `,children:[e.jsx("div",{className:`w-8 h-8 rounded-lg ${S.bg} flex items-center justify-center`,children:e.jsx(S.icon,{className:`w-4 h-4 ${S.color}`})}),e.jsx("span",{className:`font-medium ${h?"text-primary-700 dark:text-primary-300":"text-gray-700 dark:text-gray-300"}`,children:a(S.labelKey)}),h&&e.jsx(za,{className:"w-3 h-3 ml-auto text-primary-500"})]},S.id)})]},b.id))})]})]}),e.jsx("div",{className:"hidden lg:block p-3",children:ba.map((b,S)=>e.jsxs("div",{className:S>0?"mt-4":"",children:[e.jsxs("button",{onClick:()=>N(b.id),className:"w-full flex items-center justify-between px-3 py-2 text-xs font-bold text-gray-400 dark:text-gray-500 uppercase tracking-wider hover:text-gray-600 dark:hover:text-gray-400 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b.icon,{className:"w-3 h-3"}),e.jsx("span",{children:a(b.labelKey)||b.id})]}),e.jsx(We,{className:`w-3 h-3 transition-transform duration-200 ${i.includes(b.id)?"":"-rotate-90"}`})]}),i.includes(b.id)&&e.jsx("div",{className:"mt-1 space-y-1",children:b.tabs.map(h=>{const W=T===h.id;return e.jsxs("button",{onClick:()=>A(h.id),className:`
                              w-full flex items-center gap-3 px-3 py-2.5 rounded-xl
                              transition-all duration-200 group
                              ${W?"bg-gradient-to-r from-primary-50 to-indigo-50 dark:from-primary-900/40 dark:to-indigo-900/40 shadow-sm":"hover:bg-gray-50 dark:hover:bg-dark-700/50"}
                            `,children:[e.jsx("div",{className:`
                              w-8 h-8 rounded-lg flex items-center justify-center transition-all duration-200
                              ${W?h.bg:"bg-gray-100 dark:bg-dark-700 group-hover:"+h.bg}
                            `,children:e.jsx(h.icon,{className:`w-4 h-4 transition-colors duration-200 ${W?h.color:"text-gray-400 dark:text-gray-500 group-hover:"+h.color}`})}),e.jsx("span",{className:`text-sm font-medium transition-colors duration-200 ${W?"text-primary-700 dark:text-primary-300":"text-gray-600 dark:text-gray-400 group-hover:text-gray-900 dark:group-hover:text-white"}`,children:a(h.labelKey)}),W&&e.jsx("div",{className:"ml-auto w-1.5 h-1.5 rounded-full bg-primary-500"})]},h.id)})})]},b.id))}),e.jsxs("div",{className:"hidden lg:block px-4 py-3 border-t border-gray-100 dark:border-dark-700 bg-gray-50/50 dark:bg-dark-900/50",children:[e.jsx("p",{className:"text-[10px] text-gray-400 dark:text-gray-600 uppercase tracking-wider mb-1",children:"Server ID"}),e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 font-mono truncate",children:o.id})]})]})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[w&&e.jsxs("div",{className:"mb-6 flex items-center gap-4",children:[e.jsx("div",{className:`w-12 h-12 rounded-xl ${w.bg} flex items-center justify-center shadow-sm`,children:e.jsx(w.icon,{className:`w-6 h-6 ${w.color}`})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:w.label}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a(`dashboard.${T}Desc`)||a("dashboard.manageSettings")})]})]}),e.jsx(zt,{mode:"wait",children:e.jsx(Tt.div,{initial:{opacity:0,y:8},animate:{opacity:1,y:0},exit:{opacity:0,y:-8},transition:{duration:.2},children:P()},T)})]})]})]})}export{ar as default};
