import{j as e}from"./vendor-motion-DD2yjgze.js";import{r as d,L as S}from"./vendor-react-Chdf233T.js";import{u as C,G as L,b as F,bo as E,q as m,J as A,W as h,x as D,Y as I,bp as T,bq as $,br as q}from"./index-Cwht9-s6.js";import{a as B}from"./Skeleton-CfjySvX3.js";import"./vendor-utils-BpAiQRgT.js";import"./vendor-icons-DwoABqcb.js";function J(){const{user:M}=C(),u=L(),{t:a}=F(),[l,j]=d.useState([]),[y,N]=d.useState(!0),[i,b]=d.useState(""),[n,v]=d.useState("memberCount"),[x,p]=d.useState("desc");d.useEffect(()=>{f()},[]);const f=async()=>{try{const s=await E.getServers();j(s.data.data||[])}catch{u.error(a("adminServers.fetchError"))}finally{N(!1)}};if(y)return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"w-48 h-8 bg-gray-200 dark:bg-dark-700 rounded animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[1,2,3].map(s=>e.jsx("div",{className:"card p-6 h-20 animate-pulse bg-gray-200 dark:bg-dark-700 rounded-2xl"},s))}),e.jsx("div",{className:"card p-6",children:e.jsx(B,{rows:6})})]});const g=l.filter(s=>{var t,r;return((t=s.name)==null?void 0:t.toLowerCase().includes(i.toLowerCase()))||((r=s.id)==null?void 0:r.includes(i))}).sort((s,t)=>{let r=s[n]||0,c=t[n]||0;return typeof r=="string"&&(r=r.toLowerCase()),typeof c=="string"&&(c=c.toLowerCase()),x==="asc"?r>c?1:-1:r<c?1:-1}),k=s=>{n===s?p(x==="asc"?"desc":"asc"):(v(s),p("desc"))},w=({field:s})=>n!==s?e.jsx(T,{className:"text-gray-400"}):x==="asc"?e.jsx($,{className:"text-blue-500"}):e.jsx(q,{className:"text-blue-500"}),o=l.reduce((s,t)=>s+(t.memberCount||0),0);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(m,{className:"text-purple-500"}),a("adminServers.title")]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:a("adminServers.subtitle",{count:l.length,members:o.toLocaleString()})})]}),e.jsxs("div",{className:"relative w-full md:w-80",children:[e.jsx(A,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"}),e.jsx("input",{type:"text",placeholder:a("adminServers.searchPlaceholder"),value:i,onChange:s=>b(s.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-dark-800 border border-gray-200 dark:border-dark-600 rounded-xl focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4 mb-6",children:[e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-purple-100 dark:bg-purple-900/30 rounded-lg",children:e.jsx(m,{className:"text-purple-500 text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:l.length}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("adminServers.servers")})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-blue-100 dark:bg-blue-900/30 rounded-lg",children:e.jsx(h,{className:"text-blue-500 text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:o.toLocaleString()}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("adminServers.users")})]})]})}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-3 bg-green-100 dark:bg-green-900/30 rounded-lg",children:e.jsx(D,{className:"text-green-500 text-xl"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-gray-900 dark:text-white",children:Math.round(o/(l.length||1))}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a("adminServers.avgPerServer")})]})]})})]}),e.jsxs("div",{className:"card overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("adminServers.server")}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider cursor-pointer hover:text-gray-700 dark:hover:text-gray-200",onClick:()=>k("memberCount"),children:e.jsxs("div",{className:"flex items-center gap-1",children:[a("adminServers.members"),e.jsx(w,{field:"memberCount"})]})}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:"ID"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("adminServers.owner")}),e.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("adminServers.actions")})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-dark-700",children:g.map(s=>{var t;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700/50 transition-colors",children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:s.icon?`https://cdn.discordapp.com/icons/${s.id}/${s.icon}.png?size=64`:"https://cdn.discordapp.com/embed/avatars/0.png",alt:s.name,className:"w-10 h-10 rounded-lg"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[s.channels||"?"," ",a("adminServers.channels")]})]})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"text-gray-400"}),e.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:((t=s.memberCount)==null?void 0:t.toLocaleString())||"?"})]})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("code",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-dark-600 px-2 py-1 rounded",children:s.id})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm text-gray-600 dark:text-gray-400",children:s.ownerId||"N/A"})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:e.jsxs(S,{to:`/servers/${s.id}`,className:"inline-flex items-center gap-1 px-3 py-1.5 text-sm text-purple-600 dark:text-purple-400 hover:bg-purple-50 dark:hover:bg-purple-900/20 rounded-lg transition-colors",children:[e.jsx(I,{className:"text-xs"}),a("adminServers.dashboard")]})})]},s.id)})})]})}),g.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(m,{className:"text-4xl text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a(i?"adminServers.noResults":"adminServers.noServers")})]})]})]})}export{J as default};
