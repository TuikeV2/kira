import{j as e}from"./vendor-motion-DD2yjgze.js";import{r as n}from"./vendor-react-Chdf233T.js";import{u as k,b as w,a as S,G as A,p as $,o as L,e as F,bn as D,t as I,x as C,g as P,k as E,d as M,c as R,aS as T,q as U,aP as z}from"./index-Cwht9-s6.js";import{b as g}from"./Skeleton-CfjySvX3.js";import{P as G}from"./PageHeader-dyIY6vfZ.js";import"./vendor-utils-BpAiQRgT.js";import"./vendor-icons-DwoABqcb.js";function O(){const{user:t}=k(),{t:a,language:o,setLanguage:x}=w(),{isDark:d,toggleTheme:p}=S(),u=A(),[m,h]=n.useState([]),[l,j]=n.useState([]),[b,y]=n.useState(!0);n.useEffect(()=>{N()},[]);const N=async()=>{try{const[s,c]=await Promise.all([$.getPurchaseHistory().catch(()=>({data:{data:[]}})),L.getUserGuilds().catch(()=>({data:{data:[]}}))]);h(s.data.data||[]),j(c.data.data||[])}catch{u.error(a("common.fetchError"))}finally{y(!1)}},v=s=>{switch(s){case"VIP":return"from-purple-500 to-pink-500";case"PREMIUM":return"from-blue-500 to-cyan-500";default:return"from-gray-500 to-gray-600"}},f=s=>{switch(s){case"VIP":return"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300";case"PREMIUM":return"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300";default:return"bg-gray-100 dark:bg-gray-700 text-gray-700 dark:text-gray-300"}};if(b)return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-20 h-20 rounded-2xl bg-gray-200 dark:bg-dark-700 animate-pulse"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"w-40 h-6 bg-gray-200 dark:bg-dark-700 rounded animate-pulse"}),e.jsx("div",{className:"w-28 h-4 bg-gray-200 dark:bg-dark-700 rounded animate-pulse"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(g,{}),e.jsx(g,{})]}),e.jsx(g,{})]});const r=m.find(s=>s.isActive);return e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsx(G,{title:t.username,avatar:{src:t.avatar?`https://cdn.discordapp.com/avatars/${t.discordId}/${t.avatar}.png?size=128`:"https://cdn.discordapp.com/embed/avatars/0.png",alt:`Avatar ${t.username}`,badge:!0},children:e.jsxs("p",{className:"text-gray-500 dark:text-gray-400 flex items-center gap-2",children:[e.jsx(F,{className:"text-[#5865F2]"}),t.discordId]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"card p-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(D,{className:"text-blue-500"}),a("pages.account.accountInfo")]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(i,{label:a("pages.account.name"),value:t.username}),e.jsx(i,{label:a("pages.account.email"),value:t.email||a("pages.account.noEmail")}),e.jsx(i,{label:a("pages.account.discordId"),value:t.discordId,mono:!0}),e.jsx(i,{label:a("pages.account.createdAt"),value:t.createdAt?new Date(t.createdAt).toLocaleDateString():"N/A",last:!0})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(I,{className:"text-yellow-500"}),a("pages.account.licenseStatus")]}),r?e.jsxs("div",{className:`bg-gradient-to-r ${v(r.tier)} rounded-xl p-4 text-white`,children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx(C,{className:"text-2xl"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-bold text-lg",children:r.tier}),e.jsx("p",{className:"text-sm opacity-90",children:a("pages.account.activeLicense")})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mt-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"opacity-75",children:a("pages.account.maxServers")}),e.jsx("p",{className:"font-bold",children:r.maxServers===-1?a("common.unlimited"):r.maxServers})]}),e.jsxs("div",{children:[e.jsx("p",{className:"opacity-75",children:a("pages.account.expires")}),e.jsx("p",{className:"font-bold",children:r.expiresAt?new Date(r.expiresAt).toLocaleDateString():a("common.neverExpires")})]})]})]}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx(P,{className:"text-4xl text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:a("pages.account.noActiveLicense")}),e.jsx("a",{href:"/buy",className:"inline-block mt-4 btn-primary",children:a("pages.account.buyLicense")})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-1 flex items-center gap-2",children:[e.jsx(E,{className:"text-gray-500"}),a("pages.account.settings")]}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-5",children:a("pages.account.settingsDescription")}),e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[d?e.jsx(M,{className:"text-purple-400"}):e.jsx(R,{className:"text-yellow-500"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a("pages.account.theme")}),e.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:a(d?"pages.account.darkModeLabel":"pages.account.lightMode")})]})]}),e.jsx("button",{onClick:p,className:`relative w-12 h-6 rounded-full transition-colors ${d?"bg-purple-500":"bg-gray-300"}`,children:e.jsx("div",{className:`absolute top-0.5 w-5 h-5 bg-white rounded-full shadow transition-transform ${d?"translate-x-6":"translate-x-0.5"}`})})]}),e.jsx("div",{className:"border-t border-gray-100 dark:border-dark-700"}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(T,{className:"text-blue-500"}),e.jsx("div",{children:e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:a("pages.account.languageLabel")})})]}),e.jsxs("select",{value:o,onChange:s=>x(s.target.value),className:"px-3 py-1.5 bg-white dark:bg-dark-700 border border-gray-200 dark:border-dark-600 rounded-lg text-sm text-gray-900 dark:text-white focus:ring-2 focus:ring-primary-500",children:[e.jsx("option",{value:"pl",children:a("common.polish")}),e.jsx("option",{value:"en",children:a("common.english")}),e.jsx("option",{value:"ru",children:a("common.russian")})]})]})]})]}),e.jsxs("div",{className:"card p-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(U,{className:"text-green-500"}),a("pages.account.yourServers")," (",l.length,")"]}),l.length>0?e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:l.slice(0,6).map(s=>{var c;return e.jsxs("a",{href:`/servers/${s.id}`,className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-dark-700 rounded-xl hover:bg-gray-100 dark:hover:bg-dark-600 transition-colors",children:[e.jsx("img",{src:s.icon?`https://cdn.discordapp.com/icons/${s.id}/${s.icon}.png?size=64`:"https://cdn.discordapp.com/embed/avatars/0.png",alt:s.name,className:"w-10 h-10 rounded-lg",loading:"lazy"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-gray-900 dark:text-white truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:[((c=s.memberCount)==null?void 0:c.toLocaleString())||"?"," ",a("pages.account.membersCount")]})]})]},s.id)})}):e.jsx("p",{className:"text-center text-gray-500 dark:text-gray-400 py-8",children:a("pages.account.noServersWithBot")}),l.length>6&&e.jsxs("a",{href:"/servers",className:"block text-center text-blue-600 dark:text-blue-400 hover:underline mt-4",children:[a("pages.account.viewAllServers")," (",l.length,")"]})]}),m.length>0&&e.jsxs("div",{className:"card p-6",children:[e.jsxs("h2",{className:"text-lg font-bold text-gray-900 dark:text-white mb-4 flex items-center gap-2",children:[e.jsx(z,{className:"text-purple-500"}),a("pages.account.licenseHistory")]}),e.jsx("div",{className:"space-y-3",children:m.map(s=>{var c;return e.jsxs("div",{className:`flex items-center justify-between p-4 rounded-xl border ${s.isActive?"border-green-200 dark:border-green-800 bg-green-50 dark:bg-green-900/20":"border-gray-200 dark:border-dark-600 bg-gray-50 dark:bg-dark-700"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-1 rounded text-xs font-bold ${f(s.tier)}`,children:s.tier}),e.jsxs("code",{className:"text-sm font-mono text-gray-600 dark:text-gray-400",children:[(c=s.licenseKey)==null?void 0:c.slice(0,8),"..."]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:`text-sm font-medium ${s.isActive?"text-green-600 dark:text-green-400":"text-gray-500"}`,children:s.isActive?a("pages.account.active"):a("pages.account.inactive")}),e.jsx("p",{className:"text-xs text-gray-500",children:s.expiresAt?`${a("pages.account.expires")}: ${new Date(s.expiresAt).toLocaleDateString()}`:a("pages.account.lifetime")})]})]},s.id)})})]})]})}function i({label:t,value:a,mono:o,last:x}){return e.jsxs("div",{className:`flex justify-between items-center py-2 ${x?"":"border-b border-gray-100 dark:border-dark-700"}`,children:[e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:t}),e.jsx("span",{className:`font-medium text-gray-900 dark:text-white ${o?"font-mono text-sm":""}`,children:a})]})}export{O as default};
