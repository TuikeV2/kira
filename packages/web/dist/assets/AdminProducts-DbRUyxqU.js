import{j as e}from"./vendor-motion-DD2yjgze.js";import{r as l}from"./vendor-react-Chdf233T.js";import{u as A,G as D,b as O,bo as c,bs as j,B as g,a4 as L,l as P,ap as V,E as R,D as U,X as q}from"./index-Cwht9-s6.js";import{b as z}from"./Skeleton-CfjySvX3.js";import"./vendor-utils-BpAiQRgT.js";import"./vendor-icons-DwoABqcb.js";const N={name:"",description:"",tier:"VIP",duration:1,price:30,pricePerMonth:30,maxServers:1,features:[],isPopular:!1,savings:null,savingsType:"fixed",isActive:!0,sortOrder:0};function J(){const{user:B}=A(),i=D(),{t:a}=O(),[b,w]=l.useState([]),[C,F]=l.useState(!0),[S,n]=l.useState(!1),[o,h]=l.useState(null),[t,s]=l.useState(N),[p,y]=l.useState(!1),[x,k]=l.useState("");l.useEffect(()=>{m()},[]);const m=async()=>{try{const r=await c.getProducts();w(r.data.data||[])}catch{i.error(a("adminProducts.fetchError"))}finally{F(!1)}},v=()=>{h(null),s(N),n(!0)},M=r=>{h(r),s({name:r.name||"",description:r.description||"",tier:r.tier||"VIP",duration:r.duration||1,price:parseFloat(r.price)||0,pricePerMonth:parseFloat(r.pricePerMonth)||0,maxServers:r.maxServers||1,features:r.features||[],isPopular:r.isPopular||!1,savings:r.savings||null,savingsType:r.savingsType||"fixed",isActive:r.isActive!==!1,sortOrder:r.sortOrder||0}),n(!0)},E=async r=>{if(confirm(a("adminProducts.deleteConfirm")))try{await c.deleteProduct(r),i.success(a("adminProducts.deleted")),m()}catch{i.error(a("adminProducts.deleteError"))}},T=async r=>{r.preventDefault(),y(!0);try{const d={...t,pricePerMonth:t.pricePerMonth||t.price/t.duration};o?(await c.updateProduct(o.id,d),i.success(a("adminProducts.updated"))):(await c.createProduct(d),i.success(a("adminProducts.created"))),n(!1),m()}catch{i.error(a("adminProducts.saveError"))}finally{y(!1)}},f=()=>{x.trim()&&(s({...t,features:[...t.features,x.trim()]}),k(""))},I=r=>{s({...t,features:t.features.filter((d,u)=>u!==r)})};return C?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"w-48 h-8 bg-gray-200 dark:bg-dark-700 rounded animate-pulse"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4].map(r=>e.jsx(z,{},r))})]}):e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(j,{className:"text-amber-500"}),a("adminProducts.title")]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:a("adminProducts.subtitle")})]}),e.jsxs("button",{onClick:v,className:"flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-medium transition-colors",children:[e.jsx(g,{}),a("adminProducts.addProduct")]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[b.map(r=>e.jsxs("div",{className:`bg-white dark:bg-dark-800 rounded-xl border-2 p-6 relative ${r.isActive?r.isPopular?"border-amber-400 dark:border-amber-500":"border-gray-200 dark:border-dark-600":"border-red-200 dark:border-red-800 opacity-60"}`,children:[e.jsxs("div",{className:"absolute -top-3 left-4 flex gap-2",children:[r.isPopular&&e.jsxs("span",{className:"bg-amber-500 text-white text-xs font-bold px-2 py-1 rounded-full flex items-center gap-1",children:[e.jsx(L,{className:"text-xs"})," ",a("adminProducts.popular")]}),!r.isActive&&e.jsx("span",{className:"bg-red-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:a("adminProducts.inactive")})]}),r.savings&&e.jsx("div",{className:"absolute -top-3 right-4",children:e.jsxs("span",{className:"bg-green-500 text-white text-xs font-bold px-2 py-1 rounded-full",children:["-",r.savings,r.savingsType==="percentage"?"%":" zÅ‚"]})}),e.jsxs("div",{className:"pt-2",children:[e.jsx("span",{className:`inline-block px-2 py-1 rounded text-xs font-bold mb-2 ${r.tier==="VIP"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300"}`,children:r.tier}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 dark:text-white",children:r.name}),e.jsxs("div",{className:"flex items-baseline gap-1 mt-2",children:[e.jsx("span",{className:"text-3xl font-bold text-gray-900 dark:text-white",children:parseFloat(r.price).toFixed(0)}),e.jsx("span",{className:"text-gray-500",children:a("adminProducts.currency")})]}),e.jsxs("p",{className:"text-sm text-gray-500 dark:text-gray-400",children:[parseFloat(r.pricePerMonth).toFixed(2)," ",a("adminProducts.perMonth")]}),e.jsxs("div",{className:"mt-4 space-y-1 text-sm text-gray-600 dark:text-gray-400",children:[e.jsxs("p",{children:[a("adminProducts.durationLabel")," ",e.jsxs("span",{className:"font-medium",children:[r.duration," ",a("adminProducts.durationMonths")]})]}),e.jsxs("p",{children:[a("adminProducts.maxServersLabel")," ",e.jsx("span",{className:"font-medium",children:r.maxServers===-1?a("adminProducts.unlimited"):r.maxServers})]}),e.jsxs("p",{children:[a("adminProducts.orderLabel")," ",e.jsx("span",{className:"font-medium",children:r.sortOrder})]})]}),r.features&&r.features.length>0&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-dark-700",children:[e.jsxs("p",{className:"text-xs font-bold text-gray-500 uppercase mb-2",children:[a("adminProducts.features"),":"]}),e.jsxs("div",{className:"space-y-1",children:[r.features.slice(0,3).map((d,u)=>e.jsxs("p",{className:"text-sm text-gray-600 dark:text-gray-400 flex items-center gap-2",children:[e.jsx(P,{className:"text-green-500 text-xs"}),d]},u)),r.features.length>3&&e.jsx("p",{className:"text-xs text-gray-400",children:a("adminProducts.moreFeatures",{count:r.features.length-3})})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4 pt-4 border-t border-gray-100 dark:border-dark-700",children:[e.jsxs("button",{onClick:()=>M(r),className:"flex-1 flex items-center justify-center gap-2 px-3 py-2 bg-blue-50 dark:bg-blue-900/20 text-blue-600 dark:text-blue-400 rounded-lg hover:bg-blue-100 dark:hover:bg-blue-900/30 transition-colors",children:[e.jsx(V,{}),a("adminProducts.edit")]}),e.jsx("button",{onClick:()=>E(r.id),className:"px-3 py-2 bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 rounded-lg hover:bg-red-100 dark:hover:bg-red-900/30 transition-colors",children:e.jsx(R,{})})]})]})]},r.id)),b.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12 card",children:[e.jsx(j,{className:"text-4xl text-gray-300 dark:text-gray-600 mx-auto mb-3"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-4",children:a("adminProducts.noProducts")}),e.jsxs("button",{onClick:v,className:"inline-flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-medium transition-colors",children:[e.jsx(g,{}),a("adminProducts.addProduct")]})]})]}),S&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white dark:bg-dark-800 rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsx("div",{className:"p-6 border-b border-gray-200 dark:border-dark-700",children:e.jsx("h2",{className:"text-xl font-bold text-gray-900 dark:text-white",children:a(o?"adminProducts.editProduct":"adminProducts.newProduct")})}),e.jsxs("form",{onSubmit:T,className:"p-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminProducts.productName")}),e.jsx("input",{type:"text",value:t.name,onChange:r=>s({...t,name:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:a("adminProducts.productNamePlaceholder"),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminProducts.tier")}),e.jsxs("select",{value:t.tier,onChange:r=>s({...t,tier:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"PREMIUM",children:"PREMIUM"}),e.jsx("option",{value:"VIP",children:"VIP"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminProducts.duration")}),e.jsx("input",{type:"number",min:"1",value:t.duration,onChange:r=>s({...t,duration:parseInt(r.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminProducts.price")}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:t.price,onChange:r=>s({...t,price:parseFloat(r.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminProducts.pricePerMonth")}),e.jsx("input",{type:"number",min:"0",step:"0.01",value:t.pricePerMonth||(t.price/t.duration).toFixed(2),onChange:r=>s({...t,pricePerMonth:parseFloat(r.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminProducts.maxServers")}),e.jsx("input",{type:"number",min:"-1",value:t.maxServers,onChange:r=>s({...t,maxServers:parseInt(r.target.value)||1}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:a("adminProducts.maxServersPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminProducts.sortOrder")}),e.jsx("input",{type:"number",value:t.sortOrder,onChange:r=>s({...t,sortOrder:parseInt(r.target.value)||0}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminProducts.savings")}),e.jsx("input",{type:"number",min:"0",value:t.savings||"",onChange:r=>s({...t,savings:r.target.value?parseInt(r.target.value):null}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:a("adminProducts.savingsPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminProducts.savingsType")}),e.jsxs("select",{value:t.savingsType,onChange:r=>s({...t,savingsType:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",children:[e.jsx("option",{value:"fixed",children:a("adminProducts.savingsFixed")}),e.jsx("option",{value:"percentage",children:a("adminProducts.savingsPercentage")})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminProducts.description")}),e.jsx("textarea",{value:t.description,onChange:r=>s({...t,description:r.target.value}),className:"w-full px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",rows:2,placeholder:a("adminProducts.descriptionPlaceholder")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:a("adminProducts.features")}),e.jsxs("div",{className:"flex gap-2 mb-2",children:[e.jsx("input",{type:"text",value:x,onChange:r=>k(r.target.value),onKeyPress:r=>r.key==="Enter"&&(r.preventDefault(),f()),className:"flex-1 px-3 py-2 border border-gray-300 dark:border-dark-600 rounded-lg bg-white dark:bg-dark-700 text-gray-900 dark:text-white",placeholder:a("adminProducts.addFeature")}),e.jsx("button",{type:"button",onClick:f,className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:e.jsx(g,{})})]}),e.jsx("div",{className:"space-y-1",children:t.features.map((r,d)=>e.jsxs("div",{className:"flex items-center gap-2 p-2 bg-gray-50 dark:bg-dark-700 rounded-lg",children:[e.jsx(P,{className:"text-green-500 text-sm"}),e.jsx("span",{className:"flex-1 text-sm text-gray-700 dark:text-gray-300",children:r}),e.jsx("button",{type:"button",onClick:()=>I(d),className:"text-red-500 hover:text-red-600",children:e.jsx(U,{})})]},d))})]}),e.jsxs("div",{className:"flex gap-6",children:[e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.isActive,onChange:r=>s({...t,isActive:r.target.checked}),className:"rounded border-gray-300 text-amber-500 focus:ring-amber-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a("adminProducts.active")})]}),e.jsxs("label",{className:"flex items-center gap-2 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:t.isPopular,onChange:r=>s({...t,isPopular:r.target.checked}),className:"rounded border-gray-300 text-amber-500 focus:ring-amber-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:a("adminProducts.popular")})]})]}),e.jsxs("div",{className:"flex justify-end gap-3 pt-4 border-t border-gray-200 dark:border-dark-700",children:[e.jsx("button",{type:"button",onClick:()=>n(!1),className:"px-4 py-2 text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-lg transition-colors",children:a("adminProducts.cancel")}),e.jsxs("button",{type:"submit",disabled:p,className:"flex items-center gap-2 px-4 py-2 bg-amber-500 hover:bg-amber-600 text-white rounded-lg font-medium transition-colors disabled:opacity-50",children:[p?e.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}):e.jsx(q,{}),a(o?"adminProducts.saveChanges":"adminProducts.createProduct")]})]})]})]})})]})}export{J as default};
