import{j as e}from"./vendor-motion-DD2yjgze.js";import{e as k,r as d}from"./vendor-react-Chdf233T.js";import{b as v,G as w,p as L,t as o,s as C,x as p,l as E,C as S,w as F,q as T,v as D}from"./index-Cwht9-s6.js";import{b as K}from"./Skeleton-CfjySvX3.js";import"./vendor-utils-BpAiQRgT.js";import"./vendor-icons-DwoABqcb.js";function q(){const i=k(),{t:a}=v(),n=w(),[x,y]=d.useState([]),[u,c]=d.useState(!0),[l,m]=d.useState(null);d.useEffect(()=>{b()},[]);const b=async()=>{try{c(!0);const s=await L.getPurchaseHistory();y(s.data.data||[])}catch{n.error(a("errors.networkError"))}finally{c(!1)}},h=(s,r)=>{navigator.clipboard.writeText(s),m(r),n.success(a("pages.myLicenses.keyCopied")),setTimeout(()=>m(null),2e3)},N=s=>s.isActive?s.isExpired?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-red-100 dark:bg-red-900/30 text-red-600 dark:text-red-400",children:a("pages.myLicenses.expired")}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-green-100 dark:bg-green-900/30 text-green-600 dark:text-green-400",children:a("pages.myLicenses.active")}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-dark-600 text-gray-600 dark:text-gray-400",children:a("pages.myLicenses.inactive")}),j=s=>s.inUse?e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-blue-100 dark:bg-blue-900/30 text-blue-600 dark:text-blue-400",children:a("pages.myLicenses.inUse")}):e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-amber-100 dark:bg-amber-900/30 text-amber-600 dark:text-amber-400",children:a("pages.myLicenses.notAssigned")}),g=s=>{if(!s)return"Nigdy";const r=new Date(s);return isNaN(r.getTime())?"Nigdy":r.toLocaleDateString("pl-PL")},f=s=>{if(!s)return null;const r=new Date(s);return isNaN(r.getTime())?null:Math.ceil((r-new Date)/(1e3*60*60*24))};return u?e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex items-center gap-4 mb-6",children:e.jsx("div",{className:"w-40 h-8 bg-gray-200 dark:bg-dark-700 rounded animate-pulse"})}),e.jsx("div",{className:"grid gap-4",children:[1,2,3].map(s=>e.jsx(K,{},s))})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold text-gray-900 dark:text-white flex items-center gap-3",children:[e.jsx(o,{className:"text-amber-500"}),a("pages.myLicenses.title")]}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-1",children:a("pages.myLicenses.subtitle")})]}),e.jsxs("button",{onClick:()=>i("/buy"),className:"btn-primary flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),a("pages.myLicenses.buyNew")]})]}),x.length===0?e.jsxs("div",{className:"card p-12 text-center",children:[e.jsx(p,{className:"w-16 h-16 text-gray-300 dark:text-gray-600 mx-auto mb-4"}),e.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-white mb-2",children:a("pages.myLicenses.noLicenses")}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-6",children:a("pages.myLicenses.noLicensesDesc")}),e.jsx("button",{onClick:()=>i("/buy"),className:"btn-primary",children:a("pages.myLicenses.buyVip")})]}):e.jsx("div",{className:"grid gap-4",children:x.map(s=>{const r=f(s.expiresAt),t=r!==null&&r>0&&r<=7;return e.jsxs("div",{className:`card p-6 ${s.isExpired?"opacity-75":""}`,children:[e.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(o,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-500 dark:text-gray-400",children:a("pages.myLicenses.licenseKey")})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"bg-gray-100 dark:bg-dark-700 px-3 py-2 rounded-lg font-mono text-sm text-gray-900 dark:text-white",children:s.licenseKey}),e.jsx("button",{onClick:()=>h(s.licenseKey,s.id),className:`p-2 rounded-lg transition-colors ${l===s.id?"bg-green-100 dark:bg-green-900/30 text-green-600":"bg-gray-100 dark:bg-dark-700 text-gray-500 hover:text-primary-500"}`,title:a("pages.myLicenses.copyKey"),children:l===s.id?e.jsx(E,{className:"w-4 h-4"}):e.jsx(S,{className:"w-4 h-4"})})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[N(s),j(s),e.jsx("span",{className:"px-2 py-1 rounded-full text-xs font-medium bg-purple-100 dark:bg-purple-900/30 text-purple-600 dark:text-purple-400",children:s.tier})]})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-100 dark:border-dark-700",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${s.isExpired?"bg-red-100 dark:bg-red-900/30":t?"bg-amber-100 dark:bg-amber-900/30":"bg-gray-100 dark:bg-dark-700"}`,children:e.jsx(F,{className:`w-4 h-4 ${s.isExpired?"text-red-500":t?"text-amber-500":"text-gray-500"}`})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("pages.myLicenses.expires")}),e.jsx("p",{className:`font-medium ${s.isExpired?"text-red-600 dark:text-red-400":"text-gray-900 dark:text-white"}`,children:g(s.expiresAt)}),r!==null&&r>0&&e.jsxs("p",{className:`text-xs ${t?"text-amber-600":"text-gray-500"}`,children:["(",r," ",r===1?"dzien":"dni",")"]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-dark-700",children:e.jsx(T,{className:"w-4 h-4 text-gray-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("pages.myLicenses.server")}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:s.servers&&s.servers.length>0?s.servers[0].name:a("pages.myLicenses.notAssignedServer")})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-lg bg-gray-100 dark:bg-dark-700",children:e.jsx(p,{className:"w-4 h-4 text-amber-500"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:a("pages.myLicenses.purchased")}),e.jsx("p",{className:"font-medium text-gray-900 dark:text-white",children:g(s.createdAt)})]})]})]}),t&&!s.isExpired&&e.jsxs("div",{className:"mt-4 flex items-center gap-2 p-3 bg-amber-50 dark:bg-amber-900/20 rounded-lg border border-amber-200 dark:border-amber-800",children:[e.jsx(D,{className:"w-4 h-4 text-amber-500"}),e.jsx("span",{className:"text-sm text-amber-700 dark:text-amber-300",children:a("pages.myLicenses.expiresIn",{days:r,daysWord:a(r===1?"pages.myLicenses.day":"pages.myLicenses.days")})}),e.jsx("button",{onClick:()=>i("/buy"),className:"ml-auto text-sm font-medium text-amber-700 dark:text-amber-300 hover:underline",children:a("pages.myLicenses.extendNow")})]})]})]},s.id)})})]})}export{q as default};
