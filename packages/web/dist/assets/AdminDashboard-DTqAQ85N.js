import{j as e}from"./vendor-motion-DD2yjgze.js";import{e as Q,r as m,L as Z}from"./vendor-react-Chdf233T.js";import{u as _,b as ee,G as se,bo as ae,W as V,q,bs as re,aG as te,t as ie,j as oe,g as ne,ae as de,f as le}from"./index-Cwht9-s6.js";import{S as t}from"./StatCard-BNGy35B2.js";import{A as i}from"./AnimatedCard-CGD3nK9r.js";import{S as ce,a as X}from"./Skeleton-CfjySvX3.js";import{R as o,L as x,C as n,X as d,Y as l,T as c,a as y,B as he,b as me}from"./vendor-charts-8704ybuX.js";import"./vendor-utils-BpAiQRgT.js";import"./vendor-icons-DwoABqcb.js";const h={backgroundColor:"var(--tooltip-bg, #1f2937)",border:"none",borderRadius:"8px",color:"var(--tooltip-text, #fff)"};function Ne(){var g,u,j,p,b,k,f,v,N,D,w,S,z,A,T,B,K,L,U,F,C,W,R,P,E,G,M;const{user:xe}=_(),{t:a}=ee();Q();const Y=se(),[s,$]=m.useState(null),[O,H]=m.useState(!0);m.useEffect(()=>{I()},[]);const I=async()=>{try{const r=await ae.getDashboard();$(r.data.data)}catch{Y.error(a("common.fetchError")||"Failed to load dashboard data")}finally{H(!1)}};if(O)return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[e.jsx("div",{className:"w-48 h-8 bg-gray-200 dark:bg-dark-700 rounded animate-pulse"}),e.jsx("div",{className:"w-32 h-5 bg-gray-200 dark:bg-dark-700 rounded animate-pulse"})]}),e.jsx(ce,{}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsx("div",{className:"card p-6",children:e.jsx(X,{rows:4})}),e.jsx("div",{className:"card p-6",children:e.jsx(X,{rows:4})})]})]});const J=[{label:a("adminDashboard.users")||"Uzytkownicy",path:"/admin/users",icon:V,color:"text-blue-500"},{label:a("adminDashboard.servers")||"Serwery",path:"/admin/servers",icon:q,color:"text-green-500"},{label:a("adminDashboard.products")||"Produkty",path:"/admin/products",icon:re,color:"text-purple-500"},{label:a("adminDashboard.statistics")||"Statystyki",path:"/admin/stats",icon:te,color:"text-amber-500"}];return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"page-title",children:a("adminDashboard.title")||"Panel Admina"}),e.jsx("p",{className:"page-subtitle",children:a("adminDashboard.subtitle")||"Rozszerzony przeglad systemu"})]})}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-4",children:[e.jsx(t,{title:a("adminDashboard.totalUsers")||"Uzytkownicy",value:(s==null?void 0:s.totalUsers)||0,icon:V,color:"blue",trend:((u=(g=s==null?void 0:s.trends)==null?void 0:g.users)==null?void 0:u.direction)!=="none"?(p=(j=s==null?void 0:s.trends)==null?void 0:j.users)==null?void 0:p.direction:void 0,trendValue:(k=(b=s==null?void 0:s.trends)==null?void 0:b.users)==null?void 0:k.value}),e.jsx(t,{title:a("adminDashboard.totalServers")||"Serwery",value:(s==null?void 0:s.totalServers)||0,icon:q,color:"green",trend:((v=(f=s==null?void 0:s.trends)==null?void 0:f.servers)==null?void 0:v.direction)!=="none"?(D=(N=s==null?void 0:s.trends)==null?void 0:N.servers)==null?void 0:D.direction:void 0,trendValue:(S=(w=s==null?void 0:s.trends)==null?void 0:w.servers)==null?void 0:S.value}),e.jsx(t,{title:a("adminDashboard.totalLicenses")||"Licencje",value:(s==null?void 0:s.totalLicenses)||0,icon:ie,color:"purple",trend:((A=(z=s==null?void 0:s.trends)==null?void 0:z.licenses)==null?void 0:A.direction)!=="none"?(B=(T=s==null?void 0:s.trends)==null?void 0:T.licenses)==null?void 0:B.direction:void 0,trendValue:(L=(K=s==null?void 0:s.trends)==null?void 0:K.licenses)==null?void 0:L.value}),e.jsx(t,{title:a("adminDashboard.commandsToday")||"Komendy (24h)",value:(s==null?void 0:s.commandsToday)||0,icon:oe,color:"yellow"}),e.jsx(t,{title:a("adminDashboard.activeMutes")||"Aktywne wyciszenia",value:(s==null?void 0:s.totalMutes)||0,icon:ne,color:"red"}),e.jsx(t,{title:a("adminDashboard.newUsers")||"Nowi uzytkownicy",value:(s==null?void 0:s.newUsersThisWeek)||0,icon:de,color:"pink",subtitle:a("adminDashboard.thisWeek")||"ten tydzien"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(i,{className:"card p-6",delay:.1,children:[e.jsx("h2",{className:"section-title mb-4",children:a("adminDashboard.commandsPerDay")||"Komendy / dzien"}),e.jsx("div",{className:"h-64",children:((F=(U=s==null?void 0:s.charts)==null?void 0:U.commandsByDay)==null?void 0:F.length)>0?e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(x,{data:s.charts.commandsByDay,children:[e.jsx(n,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),e.jsx(d,{dataKey:"date",stroke:"#9ca3af",tick:{fontSize:12}}),e.jsx(l,{stroke:"#9ca3af"}),e.jsx(c,{contentStyle:h}),e.jsx(y,{type:"monotone",dataKey:"count",stroke:"#3b82f6",strokeWidth:2,dot:{r:4},name:a("adminDashboard.commands")||"Komendy"})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 dark:text-gray-500",children:a("pages.adminDashboard.noDataToShow")})})]}),e.jsxs(i,{className:"card p-6",delay:.15,children:[e.jsx("h2",{className:"section-title mb-4",children:a("adminDashboard.newUsersPerDay")||"Nowi uzytkownicy / dzien"}),e.jsx("div",{className:"h-64",children:((W=(C=s==null?void 0:s.charts)==null?void 0:C.usersByDay)==null?void 0:W.length)>0?e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(x,{data:s.charts.usersByDay,children:[e.jsx(n,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),e.jsx(d,{dataKey:"date",stroke:"#9ca3af",tick:{fontSize:12}}),e.jsx(l,{stroke:"#9ca3af"}),e.jsx(c,{contentStyle:h}),e.jsx(y,{type:"monotone",dataKey:"count",stroke:"#10b981",strokeWidth:2,dot:{r:4},name:a("adminDashboard.users")||"Uzytkownicy"})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 dark:text-gray-500",children:a("pages.adminDashboard.noDataToShow")})})]}),e.jsxs(i,{className:"card p-6",delay:.2,children:[e.jsx("h2",{className:"section-title mb-4",children:a("adminDashboard.serverGrowth")||"Wzrost serwerow"}),e.jsx("div",{className:"h-64",children:((P=(R=s==null?void 0:s.charts)==null?void 0:R.serversByDay)==null?void 0:P.length)>0?e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(x,{data:s.charts.serversByDay,children:[e.jsx(n,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),e.jsx(d,{dataKey:"date",stroke:"#9ca3af",tick:{fontSize:12}}),e.jsx(l,{stroke:"#9ca3af"}),e.jsx(c,{contentStyle:h}),e.jsx(y,{type:"monotone",dataKey:"count",stroke:"#8b5cf6",strokeWidth:2,dot:{r:4},name:a("adminDashboard.servers")||"Serwery"})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 dark:text-gray-500",children:a("pages.adminDashboard.noDataToShow")})})]}),e.jsxs(i,{className:"card p-6",delay:.25,children:[e.jsx("h2",{className:"section-title mb-4",children:a("adminDashboard.automodViolations")||"Naruszenia AutoMod"}),e.jsx("div",{className:"h-64",children:((G=(E=s==null?void 0:s.charts)==null?void 0:E.automodByType)==null?void 0:G.length)>0?e.jsx(o,{width:"100%",height:"100%",children:e.jsxs(he,{data:s.charts.automodByType,children:[e.jsx(n,{strokeDasharray:"3 3",stroke:"#374151",opacity:.3}),e.jsx(d,{dataKey:"type",stroke:"#9ca3af",tick:{fontSize:10},angle:-20,textAnchor:"end",height:60}),e.jsx(l,{stroke:"#9ca3af"}),e.jsx(c,{contentStyle:h}),e.jsx(me,{dataKey:"count",fill:"#ef4444",radius:[4,4,0,0],name:a("adminDashboard.violations")||"Naruszenia"})]})}):e.jsx("div",{className:"h-full flex items-center justify-center text-gray-400 dark:text-gray-500",children:a("pages.adminDashboard.noDataToShow")})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 card p-6",children:[e.jsx("h2",{className:"section-title mb-4",children:a("adminDashboard.recentActivity")||"Ostatnia aktywnosc"}),e.jsx("div",{className:"space-y-3 max-h-80 overflow-y-auto",children:((M=s==null?void 0:s.recentActivity)==null?void 0:M.length)>0?s.recentActivity.map(r=>e.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-dark-700/50 rounded-lg",children:[e.jsx("div",{className:`w-2 h-2 rounded-full flex-shrink-0 ${r.actionType.includes("BAN")?"bg-red-500":r.actionType.includes("MUTE")?"bg-amber-500":r.actionType.includes("WARN")?"bg-yellow-500":"bg-blue-500"}`}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-700 dark:text-gray-200 truncate",children:[e.jsx("span",{className:"font-semibold",children:r.actionType})," ",e.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:r.guildName})]}),r.reason&&e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 truncate",children:r.reason})]}),e.jsx("span",{className:"text-xs text-gray-400 dark:text-gray-500 flex-shrink-0",children:new Date(r.createdAt).toLocaleString("pl-PL",{day:"2-digit",month:"2-digit",hour:"2-digit",minute:"2-digit"})})]},r.id)):e.jsx("div",{className:"text-center py-8 text-gray-400 dark:text-gray-500",children:a("adminDashboard.noActivity")||"Brak aktywnosci"})})]}),e.jsxs("div",{className:"card p-6",children:[e.jsx("h2",{className:"section-title mb-4",children:a("adminDashboard.quickActions")||"Szybkie akcje"}),e.jsx("div",{className:"space-y-3",children:J.map(r=>e.jsxs(Z,{to:r.path,className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-dark-700/50 rounded-lg hover:bg-gray-100 dark:hover:bg-dark-700 transition-colors group",children:[e.jsx(r.icon,{className:`w-5 h-5 ${r.color}`}),e.jsx("span",{className:"flex-1 text-sm font-medium text-gray-700 dark:text-gray-200",children:r.label}),e.jsx(le,{className:"w-3 h-3 text-gray-400 group-hover:text-primary-500 transition-colors"})]},r.path))})]})]})]})}export{Ne as default};
