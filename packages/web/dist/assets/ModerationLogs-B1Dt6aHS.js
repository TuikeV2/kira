import{j as e}from"./vendor-motion-DD2yjgze.js";import{r as s}from"./vendor-react-Chdf233T.js";import{G as O,b as S,H as U,I as F,J as I,K as _,D as P,g as R}from"./index-Cwht9-s6.js";import{a as K}from"./Skeleton-CfjySvX3.js";import{E as W}from"./EmptyState-B_5ZdMq5.js";import{P as G}from"./Pagination-ByhZH2CY.js";import{P as H}from"./PageHeader-dyIY6vfZ.js";import{f as $,b as B}from"./vendor-utils-BpAiQRgT.js";import"./vendor-icons-DwoABqcb.js";const J=["MUTE","UNMUTE","WARN","CLEAR","AUTOMOD_WARN","AUTOMOD_MUTE","AUTOMOD_KICK","AUTOMOD_BAN"],l={MUTE:{color:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",label:"Mute"},UNMUTE:{color:"bg-green-100 dark:bg-green-900/30 text-green-700 dark:text-green-300",label:"Unmute"},WARN:{color:"bg-yellow-100 dark:bg-yellow-900/30 text-yellow-700 dark:text-yellow-300",label:"Warn"},CLEAR:{color:"bg-blue-100 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300",label:"Clear"},AUTOMOD_WARN:{color:"bg-orange-100 dark:bg-orange-900/30 text-orange-700 dark:text-orange-300",label:"AutoMod Warn"},AUTOMOD_MUTE:{color:"bg-red-100 dark:bg-red-900/30 text-red-700 dark:text-red-300",label:"AutoMod Mute"},AUTOMOD_KICK:{color:"bg-rose-100 dark:bg-rose-900/30 text-rose-700 dark:text-rose-300",label:"AutoMod Kick"},AUTOMOD_BAN:{color:"bg-red-200 dark:bg-red-900/40 text-red-800 dark:text-red-200",label:"AutoMod Ban"}},L=20;function ae(){const A=O(),{t:a}=S(),[u,b]=s.useState([]),[M,k]=s.useState(!0),[x,g]=s.useState(1),[f,C]=s.useState(1),[m,E]=s.useState(0),[o,N]=s.useState(""),[p,j]=s.useState(""),[d,D]=s.useState("");s.useEffect(()=>{const t=setTimeout(()=>D(p),300);return()=>clearTimeout(t)},[p]);const w=s.useCallback(async()=>{k(!0);try{const t={page:x,limit:L};o&&(t.actionType=o);const r=await U.getLogs(t);b(r.data.data||[]),r.data.pagination&&(C(r.data.pagination.totalPages),E(r.data.pagination.total))}catch{A.error(a("common.fetchError")||"Failed to load moderation logs"),b([])}finally{k(!1)}},[x,o]);s.useEffect(()=>{w()},[w]),s.useEffect(()=>{g(1)},[o]);const y=d?u.filter(t=>{var r;return(((r=t.guild)==null?void 0:r.guildName)||"").toLowerCase().includes(d.toLowerCase())||(t.moderatorId||"").includes(d)||(t.targetId||"").includes(d)||(t.reason||"").toLowerCase().includes(d.toLowerCase())}):u,v=t=>{try{return $(new Date(t),{addSuffix:!0})}catch{return t}},h=t=>{try{return B(new Date(t),"dd.MM.yyyy HH:mm:ss")}catch{return t}},c=(o?1:0)+(d?1:0),T=()=>{N(""),j(""),g(1)};return e.jsxs("div",{className:"space-y-6",children:[e.jsx(H,{title:a("pages.moderationLogs.title")||"Moderation Logs",subtitle:m>0?`${m} ${a("pages.moderationLogs.totalLogs")||"total logs"}`:void 0,icon:F,iconColor:"text-red-500"}),e.jsx("div",{className:"card p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(I,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx("input",{type:"text",placeholder:a("pages.moderationLogs.searchPlaceholder")||"Search by server, user ID, reason...",value:p,onChange:t=>j(t.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-dark-700 border border-gray-200 dark:border-dark-600 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900 dark:text-white text-sm"})]}),e.jsxs("div",{className:"relative",children:[e.jsx(_,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-3.5 h-3.5"}),e.jsxs("select",{value:o,onChange:t=>N(t.target.value),className:"pl-9 pr-8 py-2.5 bg-white dark:bg-dark-700 border border-gray-200 dark:border-dark-600 rounded-xl focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900 dark:text-white text-sm appearance-none min-w-[160px]",children:[e.jsx("option",{value:"",children:a("pages.moderationLogs.allActions")||"All Actions"}),J.map(t=>{var r;return e.jsx("option",{value:t,children:((r=l[t])==null?void 0:r.label)||t},t)})]})]}),c>0&&e.jsxs("button",{onClick:T,className:"flex items-center gap-2 px-4 py-2.5 text-sm text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-dark-700 rounded-xl transition-colors",children:[e.jsx(P,{className:"w-3 h-3"}),a("common.clearFilters")||"Clear"," (",c,")"]})]})}),M?e.jsx("div",{className:"card p-6",children:e.jsx(K,{rows:8})}):y.length===0?e.jsx("div",{className:"card",children:e.jsx(W,{icon:R,title:d||o?a("pages.moderationLogs.noResults")||"No matching logs":a("pages.moderationLogs.noLogs")||"No moderation logs",description:d||o?a("pages.moderationLogs.tryDifferentFilter")||"Try adjusting your filters":a("pages.moderationLogs.noLogsDescription")||"Moderation actions will appear here",actionLabel:c>0?a("common.clearFilters")||"Clear Filters":void 0,onAction:c>0?T:void 0})}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"card overflow-hidden hidden md:block",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50 dark:bg-dark-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("pages.moderationLogs.action")||"Action"}),e.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("pages.moderationLogs.server")||"Server"}),e.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("pages.moderationLogs.moderator")||"Moderator"}),e.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("pages.moderationLogs.target")||"Target"}),e.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("pages.moderationLogs.reason")||"Reason"}),e.jsx("th",{className:"px-5 py-3 text-left text-xs font-semibold text-gray-500 dark:text-gray-400 uppercase tracking-wider",children:a("pages.moderationLogs.date")||"Date"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100 dark:divide-dark-700",children:y.map(t=>{var r,n,i;return e.jsxs("tr",{className:"hover:bg-gray-50 dark:hover:bg-dark-700/50 transition-colors",children:[e.jsx("td",{className:"px-5 py-4 whitespace-nowrap",children:e.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-lg text-xs font-semibold ${((r=l[t.actionType])==null?void 0:r.color)||"bg-gray-100 dark:bg-dark-600 text-gray-700 dark:text-gray-300"}`,children:((n=l[t.actionType])==null?void 0:n.label)||t.actionType})}),e.jsx("td",{className:"px-5 py-4 whitespace-nowrap",children:e.jsx("span",{className:"text-sm font-medium text-gray-900 dark:text-white",children:((i=t.guild)==null?void 0:i.guildName)||"Unknown"})}),e.jsx("td",{className:"px-5 py-4 whitespace-nowrap",children:e.jsx("code",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-dark-600 px-2 py-0.5 rounded",children:t.moderatorId})}),e.jsx("td",{className:"px-5 py-4 whitespace-nowrap",children:t.targetId?e.jsx("code",{className:"text-sm text-gray-600 dark:text-gray-400 bg-gray-100 dark:bg-dark-600 px-2 py-0.5 rounded",children:t.targetId}):e.jsx("span",{className:"text-sm text-gray-400 dark:text-gray-500",children:"-"})}),e.jsx("td",{className:"px-5 py-4 max-w-[250px]",children:e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 truncate",title:t.reason||void 0,children:t.reason||e.jsx("span",{className:"italic text-gray-400 dark:text-gray-500",children:a("pages.moderationLogs.noReason")||"No reason"})})}),e.jsx("td",{className:"px-5 py-4 whitespace-nowrap",children:e.jsxs("div",{title:h(t.created_at),children:[e.jsx("p",{className:"text-sm text-gray-900 dark:text-gray-100",children:v(t.created_at)}),e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500",children:h(t.created_at)})]})})]},t.id)})})]})}),e.jsx("div",{className:"space-y-3 md:hidden",children:y.map(t=>{var r,n,i;return e.jsxs("div",{className:"card p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:`inline-flex px-2.5 py-1 rounded-lg text-xs font-semibold ${((r=l[t.actionType])==null?void 0:r.color)||"bg-gray-100 dark:bg-dark-600 text-gray-700 dark:text-gray-300"}`,children:((n=l[t.actionType])==null?void 0:n.label)||t.actionType}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",title:h(t.created_at),children:v(t.created_at)})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 uppercase font-medium",children:a("pages.moderationLogs.server")||"Server"}),e.jsx("p",{className:"text-gray-900 dark:text-white font-medium truncate",children:((i=t.guild)==null?void 0:i.guildName)||"Unknown"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 uppercase font-medium",children:a("pages.moderationLogs.moderator")||"Moderator"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-mono text-xs truncate",children:t.moderatorId})]})]}),t.targetId&&e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 uppercase font-medium",children:a("pages.moderationLogs.target")||"Target"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400 font-mono text-xs",children:t.targetId})]}),t.reason&&e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-xs text-gray-400 dark:text-gray-500 uppercase font-medium",children:a("pages.moderationLogs.reason")||"Reason"}),e.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:t.reason})]})]},t.id)})}),f>1&&e.jsx(G,{currentPage:x,totalPages:f,totalItems:m,itemsPerPage:L,onPageChange:g})]})]})}export{ae as default};
