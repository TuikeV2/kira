import{j as r,m as P}from"./vendor-motion-DD2yjgze.js";import{r as n,e as J}from"./vendor-react-Chdf233T.js";import{b as Q,G as W,o as K,q as u,J as X,M,N as B,O as Y,P as Z,Q as ee,v as re,R as se,x as te,S as ae,y as I,B as G}from"./index-Cwht9-s6.js";import{b as oe}from"./Skeleton-CfjySvX3.js";import{E as ne}from"./EmptyState-B_5ZdMq5.js";import{P as ie}from"./PageHeader-dyIY6vfZ.js";import"./vendor-utils-BpAiQRgT.js";import"./vendor-icons-DwoABqcb.js";const le={hidden:{opacity:0},visible:{opacity:1,transition:{staggerChildren:.1,delayChildren:.1}}},ce={hidden:{opacity:0,y:20},visible:{opacity:1,y:0,transition:{type:"spring",damping:25,stiffness:300}}};function de({children:a,className:p=""}){return r.jsx(P.div,{variants:le,initial:"hidden",animate:"visible",className:p,children:a})}function me({children:a,className:p=""}){return r.jsx(P.div,{variants:ce,className:p,children:a})}const xe=["all","active","botOnly","noBot"];function ke(){const[a,p]=n.useState([]),[E,O]=n.useState(!0),[l,N]=n.useState(""),[d,R]=n.useState("all"),[c,T]=n.useState("name"),[m,w]=n.useState(!0),[f,C]=n.useState("grid"),S=J(),{t:s}=Q(),V=W();n.useEffect(()=>{H()},[]);const H=async()=>{try{const e=await K.getUserGuilds();p(e.data.data)}catch{V.error(s("common.fetchError")||"Failed to load servers")}finally{O(!1)}},b=n.useMemo(()=>a.filter(e=>e.registered&&e.isActive&&e.license),[a]),v=n.useMemo(()=>a.filter(e=>e.registered&&(!e.license||!e.isActive)),[a]),y=n.useMemo(()=>a.filter(e=>!e.registered),[a]),U=n.useMemo(()=>({all:a.length,active:b.length,botOnly:v.length,noBot:y.length}),[a,b,v,y]),_={all:s("pages.servers.filterAll")||"All",active:s("pages.servers.activeServers")||"Active",botOnly:s("pages.servers.botWithoutLicense")||"No License",noBot:s("pages.servers.withoutBot")||"No Bot"},$=e=>e.registered&&e.isActive&&e.license?"active":e.registered?"botOnly":"noBot",k=n.useMemo(()=>{let e=a;if(d==="active"?e=b:d==="botOnly"?e=v:d==="noBot"&&(e=y),l.trim()){const t=l.toLowerCase();e=e.filter(o=>{var x,i;return((x=o.name)==null?void 0:x.toLowerCase().includes(t))||((i=o.id)==null?void 0:i.includes(t))})}return e=[...e].sort((t,o)=>c==="name"?m?(t.name||"").localeCompare(o.name||""):(o.name||"").localeCompare(t.name||""):c==="members"?m?(t.memberCount||0)-(o.memberCount||0):(o.memberCount||0)-(t.memberCount||0):0),e},[a,b,v,y,d,l,c,m]),A=e=>{c===e?w(!m):(T(e),w(!0))},D="https://discord.com/oauth2/authorize?client_id=1237706962158878752&permissions=8&scope=bot%20applications.commands",F=e=>`${D}&guild_id=${e}`,L={active:{icon:se,iconColor:"text-green-500",bgHover:"hover:border-green-300 dark:hover:border-green-700"},botOnly:{icon:re,iconColor:"text-amber-500",bgHover:"hover:border-amber-300 dark:hover:border-amber-700"},noBot:{icon:ee,iconColor:"text-gray-400 dark:text-gray-500",bgHover:"hover:border-primary-300 dark:hover:border-primary-700"}},z=e=>{var h;const t=$(e),o=L[t],x=o.icon,i=t==="active"||t==="botOnly",g=t==="noBot";return r.jsx("div",{onClick:()=>i&&S(`/servers/${e.id}`),className:`
          card p-4 md:p-5 transition-all duration-200 group hover:translate-y-[-2px]
          ${i?`cursor-pointer ${o.bgHover} hover:shadow-soft-lg dark:hover:shadow-dark-lg`:g?`${o.bgHover} hover:shadow-soft-lg dark:hover:shadow-dark-lg`:"opacity-60 cursor-not-allowed"}
        `,children:r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[e.icon?r.jsx("img",{src:`https://cdn.discordapp.com/icons/${e.id}/${e.icon}.png`,alt:e.name,className:"w-12 h-12 md:w-14 md:h-14 rounded-xl object-cover shadow-sm",loading:"lazy"}):r.jsx("div",{className:"w-12 h-12 md:w-14 md:h-14 rounded-xl bg-gray-200 dark:bg-dark-700 flex items-center justify-center shadow-sm",children:r.jsx(u,{className:"text-gray-400 dark:text-gray-500 text-xl"})}),r.jsx("div",{className:"absolute -bottom-1 -right-1 p-1 rounded-full bg-white dark:bg-dark-800 shadow-sm",children:r.jsx(x,{className:`w-3.5 h-3.5 ${o.iconColor}`})})]}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h3",{className:"font-semibold text-gray-900 dark:text-white truncate",children:e.name}),r.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-0.5",children:[((h=e.memberCount)==null?void 0:h.toLocaleString())||"?"," ",s("common.members")]}),e.license&&r.jsxs("p",{className:"text-xs text-gray-400 dark:text-gray-500 mt-0.5",children:[s("pages.servers.expires"),": ",e.license.expiresAt?new Date(e.license.expiresAt).toLocaleDateString():s("pages.servers.never")]})]}),r.jsxs("div",{className:"flex items-center gap-2 md:gap-3",children:[e.license&&r.jsxs("span",{className:`
                hidden sm:inline-flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs font-semibold
                ${e.license.tier==="VIP"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":e.license.tier==="PREMIUM"?"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300":"bg-gray-100 dark:bg-dark-700 text-gray-600 dark:text-gray-400"}
              `,children:[e.license.tier==="VIP"?r.jsx(te,{className:"w-3 h-3"}):e.license.tier==="PREMIUM"?r.jsx(ae,{className:"w-3 h-3"}):null,e.license.tier]}),i&&r.jsx(I,{className:"w-4 h-4 text-gray-300 dark:text-gray-600 group-hover:text-primary-500 dark:group-hover:text-primary-400 group-hover:translate-x-1 transition-all"}),g&&r.jsxs("a",{href:F(e.id),target:"_blank",rel:"noopener noreferrer",onClick:j=>j.stopPropagation(),className:"inline-flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-semibold bg-primary-500 hover:bg-primary-600 text-white transition-all shadow-sm hover:shadow-md",children:[r.jsx(G,{className:"w-3 h-3"}),r.jsx("span",{className:"hidden sm:inline",children:s("pages.servers.inviteBot")})]})]})]})},e.id)},q=e=>{var h;const t=$(e),o=L[t],x=o.icon,i=t==="active"||t==="botOnly",g=t==="noBot";return r.jsxs("div",{onClick:()=>i&&S(`/servers/${e.id}`),className:`
          flex items-center gap-4 px-4 py-3 border-b border-gray-100 dark:border-dark-700 last:border-b-0 transition-colors
          ${i?"cursor-pointer hover:bg-gray-50 dark:hover:bg-dark-700/50":g?"":"opacity-60"}
        `,children:[r.jsxs("div",{className:"relative flex-shrink-0",children:[e.icon?r.jsx("img",{src:`https://cdn.discordapp.com/icons/${e.id}/${e.icon}.png`,alt:e.name,className:"w-10 h-10 rounded-lg object-cover",loading:"lazy"}):r.jsx("div",{className:"w-10 h-10 rounded-lg bg-gray-200 dark:bg-dark-700 flex items-center justify-center",children:r.jsx(u,{className:"text-gray-400 text-sm"})}),r.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 p-0.5 rounded-full bg-white dark:bg-dark-800",children:r.jsx(x,{className:`w-2.5 h-2.5 ${o.iconColor}`})})]}),r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-white truncate",children:e.name})}),r.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 hidden sm:block",children:[((h=e.memberCount)==null?void 0:h.toLocaleString())||"?"," ",s("common.members")]}),e.license&&r.jsx("span",{className:`
            hidden md:inline-flex items-center gap-1 px-2 py-1 rounded text-xs font-semibold
            ${e.license.tier==="VIP"?"bg-purple-100 dark:bg-purple-900/30 text-purple-700 dark:text-purple-300":"bg-primary-100 dark:bg-primary-900/30 text-primary-700 dark:text-primary-300"}
          `,children:e.license.tier}),i&&r.jsx(I,{className:"w-3.5 h-3.5 text-gray-300 dark:text-gray-600"}),g&&r.jsx("a",{href:F(e.id),target:"_blank",rel:"noopener noreferrer",onClick:j=>j.stopPropagation(),className:"btn-primary btn-sm",children:r.jsx(G,{className:"w-3 h-3"})})]},e.id)};return E?r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-6",children:[r.jsx("div",{className:"w-40 h-8 bg-gray-200 dark:bg-dark-700 rounded animate-pulse"}),r.jsx("div",{className:"w-28 h-5 bg-gray-200 dark:bg-dark-700 rounded animate-pulse"})]}),r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:Array.from({length:6},(e,t)=>r.jsx(oe,{},t))})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsx(ie,{title:s("pages.servers.title"),subtitle:s("pages.servers.subtitle"),icon:u,iconColor:"text-blue-500",actions:r.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400",children:[a.length," ",s("pages.servers.servers")]})}),r.jsxs("div",{className:"card p-4",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative flex-1",children:[r.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-400 w-4 h-4"}),r.jsx("input",{type:"text",placeholder:s("pages.servers.searchPlaceholder")||"Search servers...",value:l,onChange:e=>N(e.target.value),className:"w-full pl-10 pr-4 py-2.5 bg-white dark:bg-dark-700 border border-gray-200 dark:border-dark-600 rounded-xl focus:ring-2 focus:ring-primary-500 focus:border-transparent text-gray-900 dark:text-white text-sm"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("button",{onClick:()=>A("name"),className:`flex items-center gap-1.5 px-3 py-2.5 rounded-xl text-sm font-medium transition-colors ${c==="name"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-700"}`,children:[c==="name"&&(m?r.jsx(M,{className:"w-3 h-3"}):r.jsx(B,{className:"w-3 h-3"})),s("pages.servers.sortName")||"Name"]}),r.jsxs("button",{onClick:()=>A("members"),className:`flex items-center gap-1.5 px-3 py-2.5 rounded-xl text-sm font-medium transition-colors ${c==="members"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600 dark:text-primary-400":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-700"}`,children:[c==="members"&&(m?r.jsx(M,{className:"w-3 h-3"}):r.jsx(B,{className:"w-3 h-3"})),s("pages.servers.sortMembers")||"Members"]}),r.jsxs("div",{className:"hidden sm:flex items-center border border-gray-200 dark:border-dark-600 rounded-xl overflow-hidden ml-1",children:[r.jsx("button",{onClick:()=>C("grid"),className:`p-2.5 transition-colors ${f==="grid"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600":"text-gray-400 hover:text-gray-600"}`,children:r.jsx(Y,{className:"w-3.5 h-3.5"})}),r.jsx("button",{onClick:()=>C("list"),className:`p-2.5 transition-colors ${f==="list"?"bg-primary-50 dark:bg-primary-900/20 text-primary-600":"text-gray-400 hover:text-gray-600"}`,children:r.jsx(Z,{className:"w-3.5 h-3.5"})})]})]})]}),r.jsx("div",{className:"flex gap-2 mt-3 pt-3 border-t border-gray-100 dark:border-dark-700 overflow-x-auto no-scrollbar",children:xe.map(e=>r.jsxs("button",{onClick:()=>R(e),className:`flex items-center gap-1.5 px-4 py-2 rounded-xl text-sm font-medium whitespace-nowrap transition-colors ${d===e?"bg-primary-500 text-white shadow-sm":"text-gray-600 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-dark-700"}`,children:[_[e],r.jsx("span",{className:`px-1.5 py-0.5 rounded-full text-xs font-bold ${d===e?"bg-white/20 text-white":"bg-gray-200 dark:bg-dark-600 text-gray-600 dark:text-gray-400"}`,children:U[e]})]},e))})]}),k.length===0?r.jsx("div",{className:"card",children:r.jsx(ne,{icon:u,title:l?s("pages.servers.noSearchResults")||"No servers found":s("pages.servers.noServers")||"No servers",description:l?s("pages.servers.tryDifferentSearch")||"Try a different search term":s("pages.servers.noServersDescription")||"No servers match this filter",actionLabel:l?s("common.clearSearch")||"Clear search":void 0,onAction:l?()=>N(""):void 0})}):f==="list"?r.jsx("div",{className:"card overflow-hidden",children:k.map(q)}):r.jsx(de,{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:k.map(e=>r.jsx(me,{children:z(e)},e.id))})]})}export{ke as default};
